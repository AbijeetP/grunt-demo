function RefreshBillingReportData(){$("#divBillingReportLoading").css("display","block"),loadFieldsDataToBillRprt(),$("#divBillingReportLoading").css("display","none")}function loadFieldsDataToBillRprt(){var a=$("#txtBillingRprtFromDate,#txtBillingRprtToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,showButtonPanel:!0,changeMonth:!0,changeYear:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(b){if($.trim($("#txtBillingRprtFromDate").val()).length>0){$("#txtBillingRprtFromDate").removeClass("error");for(var c=0;c<a.length;++c)a[c].id>this.id&&$(a[c]).datepicker("option","minDate",b)}}});$("#txtBillingRprtToDate").datepicker("option","minDate","-1d"),$("#txtBillingRprtFromDate").datepicker("setDate",-1),$("#txtBillingRprtToDate").datepicker("setDate",new Date),bindDataToBillingRprtDropDownDyn(),1!=_vrBRCheckCallFromLogin&&loadjqxBillingReportGrid(),vrLoginRoleId=_UserRoleId,1==vrLoginRoleId?($("#chkBillingReportBeyondScope").show(),$("#lblBillingRprtBeyondScope").show()):($("#chkBillingReportBeyondScope").hide(),$("#lblBillingRprtBeyondScope").hide())}function loadjqxBillingReportGrid(){try{$("#divBillingReportLoading").css("display","inline"),_vrDragDropBillRprt.length>0?(_vrDragDropBillRprt="",_vrEmpId=_EmpId):(_vrEmpId=$("#ddlBillingRprtEmpName").val(),_vrEmpId=null==_vrEmpId?_EmpId:_vrEmpId),_vrProjectId=$("#ddlBillingRprtProjectName").val(),_vrProjectId=null==_vrProjectId?"0":_vrProjectId;var a=$("#txtBillingRprtFromDate").val().split("/");_vrFromDate=""!=a&&void 0!=a?a[2]+"-"+a[1]+"-"+a[0]:0;var b=$("#txtBillingRprtToDate").val().split("/");_vrToDate=""!=b&&void 0!=b?b[2]+"-"+b[1]+"-"+b[0]:0,_vrblnEmpId="0"==_vrEmpId?!1:!0,_vrblnProjId="0"==_vrProjectId?!1:!0,_vrblnFromDate="0"==_vrFromDate?!1:!0,_vrblnToDate="0"==_vrToDate?!1:!0,_vrFilterClickInBillingReport=0,FilterBillingReport()}catch(c){$("#divBillingReportLoading").css("display","none")}}function loadJqBillingModifiedsGrid(){bindDataToJqx("jqxBillingReport",_vrBillingReportData,_vrBillingReportcolumns,_vrMagnifyGridWidth),$("#jqxBillingReport").jqxGrid({source:_vrBillingReportData}),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager&&($("#jqxBillingReport").jqxGrid("setcolumnproperty","ProjectName","width","140px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","TaskName","width","210px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","Comments","width","240px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","95px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","NonBillableHours","width","125px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","EmpFirstName","width","120px"),$("#jqxBillingReport").jqxGrid("hidecolumn","ApprovedBillableHours"),$("#btnUpdateAprroveBillHour").css("display","none")),disableJqxPagerButtonsOnLoad("jqxBillingReport")}function decreaseJqxBillingReportGrid(){setLocalStorageFromDialog("jqxBillingReport",_vrBillingReportGridWidth),bindDataToJqx("jqxBillingReport",_vrBillingReportData,_vrBillingReportcolumns,_vrBillingReportGridWidth),filterProjectsJqxGrid(),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager?($("#jqxBillingReport").jqxGrid("setcolumnproperty","TaskName","width","130px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","Comments","width","187px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","95px"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","NonBillableHours","width","108px"),$("#jqxBillingReport").jqxGrid("hidecolumn","ApprovedBillableHours")):$("#btnUpdateAprroveBillHour").css("display","block")}function bindBillingReportData(a){var b="",c=a.MultipleResults;b=a.RecordCount>0?c[0].LstBillingDetails:[];var d="",e="",f=sortingcolumns("jqxBillingReport");d=f.vrSortColumnName,e=f.vrSortOrder;var c=a.MultipleResults;_vrBillingReportData={datatype:"json",type:"POST",cache:!1,datafields:_vrBillingReportDataFields,localdata:b};var g=$("#MagnifierDialog").dialog("isOpen");$("#divBillingReportLoading").css("display","inline"),g?($("#divBillingReportLoading").css("display","inline"),bindDataToJqx("jqxBillingReport",_vrBillingReportData,_vrBillingReportcolumns,_vrMagnifyGridWidth),"undefined"!=typeof c?_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId||"undefined"==typeof c[0].IsProjectManager||(0==c[0].IsProjectManager?($("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","13.6%"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","NonBillableHours","width","16%"),$("#jqxBillingReport").jqxGrid("hidecolumn","ApprovedBillableHours"),$("#btnUpdateAprroveBillHour").css("display","none")):($("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","10.8%"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","NonBillableHours","width","11%"),$("#jqxBillingReport").jqxGrid("showcolumn","ApprovedBillableHours"),$("#btnUpdateAprroveBillHour").css("display","block"))):$("#btnUpdateAprroveBillHour").css("display","block")):1==vrLoginRoleId?($("#divBillingReportLoading").css("display","inline"),""!=_vrBillReportFlag?bindDataToJqx("ReportGrid",_vrBillingReportData,_vrBillingReportcolumns,_vrMagnifyGridWidth):bindDataToJqx("jqxBillingReport",_vrBillingReportData,_vrBillingReportcolumns,_vrBillingReportGridWidth),$("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","10.5%"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","ApprovedBillableHours","width","7.7%"),$("#btnUpdateAprroveBillHour").css("display","block")):($("#divBillingReportLoading").css("display","inline"),""!=_vrBillReportFlag?bindDataToJqx("ReportGrid",_vrBillingReportData,_vrBillingReportcolumns,_vrMagnifyGridWidth):bindDataToJqx("jqxBillingReport",_vrBillingReportData,_vrBillingReportcolumns,_vrBillingReportGridWidth),"undefined"!=typeof c&&(_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId||"undefined"==typeof c[0].IsProjectManager?$("#btnUpdateAprroveBillHour").css("display","none"):0==c[0].IsProjectManager?($("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","12.6%"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","NonBillableHours","width","13.6%"),$("#jqxBillingReport").jqxGrid("hidecolumn","ApprovedBillableHours"),$("#btnUpdateAprroveBillHour").css("display","none")):($("#jqxBillingReport").jqxGrid("setcolumnproperty","BillableHours","width","8%"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","NonBillableHours","width","8.2%"),$("#jqxBillingReport").jqxGrid("setcolumnproperty","ApprovedBillableHours","width","10%"),$("#jqxBillingReport").jqxGrid("showcolumn","ApprovedBillableHours"),$("#btnUpdateAprroveBillHour").css("display","block")))),$("#jqxBillingReport").jqxGrid({source:_vrBillingReportData}),vrBillRprtBillableHrs=0,vrBillRprtNonBillableHrs=0,vrBillRprtTotalHrs=0;for(var h="undefined"!=typeof _vrBillingReportData.localdata?_vrBillingReportData.localdata:0,i=0;i<h.length;i++){var j=isNaN(h[i].BillableHours)?0:h[i].BillableHours,k=isNaN(h[i].NonBillableHours)?0:h[i].NonBillableHours;vrBillRprtBillableHrs+=parseFloat(j),vrBillRprtNonBillableHrs+=parseFloat(k)}vrBillRprtTotalHrs=parseFloat(vrBillRprtBillableHrs)+parseFloat(vrBillRprtNonBillableHrs),cropText($("#lblBillRprtBillVal"),displayFormat(vrBillRprtBillableHrs),_varMaxTimecharlen),cropText($("#lblBillRprtNonBillVal"),displayFormat(vrBillRprtNonBillableHrs),_varMaxTimecharlen),cropText($("#lblBillRprtTtlBillVal"),displayFormat(vrBillRprtTotalHrs),_varMaxTimecharlen),$("#divBillingReportLoading").css("display","none"),$("#imgBIllingReportrMagnify").attr("disabled",!1),_vrBillingLoadingFlag==_vrBillingGridInit&&($("#txtBillingRprtFromDate").datepicker("setDate",-1),$("#txtBillingRprtToDate").datepicker("setDate",new Date),$("#txtBillingRprtToDate").datepicker("option","minDate","-1d"),_vrBillingLoadingFlag=""),_vrWidgetCOntrolData.length>0&&_BRIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_BRIndexNO]).length>0&&($("#txtBillingRprtToDate").datepicker("option","minDate",_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtFromDate),$("#txtBillingRprtToDate").datepicker("setDate",_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtToDate),$("#txtBillingRprtFromDate").datepicker("setDate",_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtFromDate)),""==_vrBillReportFlag&&disableJqxPagerButtonsOnLoad("jqxBillingReport"),setRecordCountPosition("jqxBillingReport"),sortOrderUserPref("jqxBillingReport",d,e),$("#divBillingReportLoading").css("display","none"),$("#imgMainLoader").css("display","none"),_vrBRCheckCallFromLogin=""}function bindDataToBillingRprtDropDownDyn(){try{_UserRoleId!=_vrClientRoleId?(_BaseUrl=_vrLocationOrigin+"/User/GetActiveEmployeeDetails?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBIllingReportBindEmployees)):(_BaseUrl=_vrLocationOrigin+"/customer/GetCustomerProjectEmployees?intCustomerEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBIllingReportBindEmployees)),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBIllingReportBindProjects)}catch(a){}}function FilterBillingReport(){_BaseUrl=_vrLocationOrigin+"/Task/FilterBillingDetails";var a={BlnEmpID:_vrblnEmpId,EmpID:_vrEmpId,BlnProject:_vrblnProjId,ProjectID:_vrProjectId,BlnFromDate:_vrblnFromDate,FromDate:_vrFromDate,BlnToDate:_vrblnToDate,ToDate:_vrToDate,IsBeyondScope:vrBlnBeyondScope,TokenID:_vrUserTokenId,ProjectManager:_EmpId,RoleID:_UserRoleId,IsProjectManager:_vrUserIsProjManager,LoggedInEmpID:_EmpId};vrBillingFlag=!0,ajaxCallWithObject(_BaseUrl,a,bindBillingReportData),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager&&$("#ddlBillingRprtEmpName").attr("disabled",!0)}function GetBeyondScopeFilteringDetails(){$("#divBillingReportLoading").css("display","block"),_vrEmpId=$("#ddlBillingRprtEmpName").val(),_vrProjectId=$("#ddlBillingRprtProjectName").val();var a=$("#txtBillingRprtFromDate").val().split("/");vrBlnBeyondScope=$("#chkBillingReportBeyondScope").prop("checked"),_vrFromDate=""!=a&&void 0!=a?a[2]+"-"+a[1]+"-"+a[0]:0;var b=$("#txtBillingRprtToDate").val().split("/");_vrToDate=""!=b&&void 0!=b?b[2]+"-"+b[1]+"-"+b[0]:0,_vrblnEmpId="0"==_vrEmpId?!1:!0,_vrblnProjId="0"==_vrProjectId?!1:!0,_vrblnFromDate="0"==_vrFromDate?!1:!0,_vrblnToDate="0"==_vrToDate?!1:!0,_vrFilterClickInBillingReport=0,FilterBillingReport()}function FilterBillingReportDetail(){_BRIndexNO=-1,FilterBillingReportDetails()}function FilterBillingReportDetails(){$("#divBillingReportLoading").css("display","block"),_vrEmpId=$("#ddlBillingRprtEmpName").val(),_vrProjectId=$("#ddlBillingRprtProjectName").val();var a=$("#txtBillingRprtFromDate").val().split("/");""!=a&&void 0!=a&&(_vrFromDate=a[2]+"-"+a[1]+"-"+a[0]);var b=$("#txtBillingRprtToDate").val().split("/");""!=b&&void 0!=b&&(_vrToDate=b[2]+"-"+b[1]+"-"+b[0]),_vrblnEmpId="0"==_vrEmpId?!1:!0,_vrblnProjId="0"==_vrProjectId?!1:!0,_vrblnFromDate="0"==_vrFromDate?!1:!0,_vrblnToDate="0"==_vrToDate?!1:!0,vrBlnBeyondScope=$("#chkBillingReportBeyondScope").prop("checked"),FilterBillingReport()}function getBillingReportBasedEmployee(){_BRIndexNO=-1,_vrFilterClickInBillingReport=0,FilterBillingReportDetails();var a=$("#ddlBillingRprtProjectName option:selected").text();$("#ddlBillingRprtProjectName").prop("title",a);var b=$("#ddlBillingRprtEmpName option:selected").text();$("#ddlBillingRprtEmpName").prop("title",b)}function GetBillingReportFormat(a){if("undefined"==typeof a&&null==a);else{var b=a,c=b.split("-");if(c.length>1){var d=c[2].split("T"),e=d[0]+"/"+c[1]+"/"+c[0]+" "+d[1];return e}}}function ApproveBillableHourBillingReport(){$("#divBillingReportLoading").css("display","block");for(var a=$("#jqxBillingReport").jqxGrid("getrows"),b={ID:"",ApprvedBillHours:0},c=[],d=0;d<a.length;d++)b={ID:"",ApprvedBillHours:0,TokenID:""},"undefined"!=typeof a[d].ApprovedBillableHours&&(b.ID=a[d].ID,b.ApprvedBillHours=parseFloat(a[d].ApprovedBillableHours),c.push(b));var e={ApprovedBillHours:c,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/task/UpdateApprovedHours",ajaxCallWithObject(_BaseUrl,e,sucess)}function sucess(a){a.ResponseId>=1?loadjqxBillingReportGrid():$("#divBillingReportLoading").css("display","none")}function pushDatatoArray(a){for(var b=0;b<a.length;b++){var c=new Object;c.SubCategoryID=a[b].SubCategoryID,c.CategoryID=a[b].CategoryID,c.Description=a[b].Description,c.Points=a[b].Points,c.Frequency=a[b].Frequency,arrData.push(c)}}function BindScoreData(){var a=$("#ddlSubCatergory").val();if("0"==a)$(".clsbrtxtfields").val(""),$("#lblFrequency").html("");else for(var b=0;b<arrData.length;b++)a==arrData[b].SubCategoryID&&($("#txtGivenScore").val(arrData[b].Points),$("#txtDefaultScore").val(arrData[b].Points),$("#lblFrequency").html("0"==arrData[b].Frequency?"":capitalize(arrData[b].Frequency)))}function InsertBRPoints(){if(!validateEmpName())return validateBrFields(),!1;if(validateBrFields()){vrLoginEmpId=parseInt(localStorage.getItem("LoggedEmpId")),vrLoginEmpName=localStorage.getItem("LoggedEmpName");for(var a=parseInt($("#ddlCatergory").val()),b=$("#ddlCatergory option:selected").text(),c=parseInt($("#ddlSubCatergory").val()),d=$("#ddlSubCatergory option:selected").text(),e=parseInt($("#txtDefaultScore").val()),f=parseInt($("#txtGivenScore").val()),g=$("#ddlEmployeeName").val(),h=getCurrentDate(),i=$("#txtBoosterNotes").val().replace(/\'/g,"''"),j=parseInt($("input:radio[name=pointsTypeRadio]:checked").val()),k=g[0],l=1;l<g.length;l++)k=k+","+g[l];var m=getBrAllotedEmpNames(ddlEmployeeName,k),n={ProjectManagerID:vrLoginEmpId,CategoryID:a,CategoryName:b,SubCategoryID:c,SubCategoryType:d,DefaultPoints:e,BREmpPoints:f,BREmpGivenPoints:f,EmpIDs:k,MentorFirstName:vrLoginEmpName,PointsGivenDate:h,Notes:i,ScoreType:j,TokenID:_vrUserTokenId,EmpFirstName:m};$("#divMainLoader").css("display","block"),_BaseUrl=_vrLocationOrigin+"/user/InsrtEmpBRPnts",ajaxCallWithOnlyObject(_BaseUrl,n),addBoosterARooster("1"),clearBoostaroosterFields()}}function ajaxCallWithOnlyObject(a,b){$.ajax({type:"POST",url:a,contentType:"application/json;charset=utf-8",data:JSON.stringify(b),processData:!1,crossDomain:!0,dataType:"json",timeout:3e4,success:function(a){return a.ResponseId==_vrExpiredTokendIdResponse?(logOutUser(),!1):(a.ResponseId>0&&($(".info").html(_vrPointsAllot),showStatusDiv(),LoadBARDataToSlider(),"0"!=$(".clsbrPoints #idShowBARInMagnify").length&&loadBARData()),$("input[type = submit]").attr("disabled",!1),void $("#divMainLoader").css("display","none"))},error:function(){return displayError(),$("#divMainLoader").css("display","none"),$(".clsSpnLoading").css("display","none"),$("input[type = submit]").attr("disabled",!1),!1}})}function empPointsDetails(){$("#BtnAllotPoints").show(),$("#divBARInnerFieldsDeatils").hide(),$("#BtnEmpPoints").hide(),$("#employeeDiv").show(),_vrFlagValue=_vrFlagBrActiveEmployees,$("#ddlFltrEmployeeName").empty(),$("#ddlFltrEmployeeName").append("<option value='0'>Select employee</option>"),GetAllActiveEmployees(_vrFlagValue),BindValuesToDateFields(),filterBrPoints()}function BindValuesToDateFields(){try{var a=$("#txtBrPointsFromDate,#txtBrPointsToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(b){if($.trim($("#txtBrPointsFromDate").val()).length>0)for(var c=0;c<a.length;++c)a[c].id>this.id&&$(a[c]).datepicker("option","minDate",b)}}),b=new Date,c=b.getMonth(),d=b.getFullYear(),e=new Date(d,c,1);$("#txtBrPointsToDate").datepicker("option","minDate",e),$(".ui-datepicker-current").hide(),$("#txtBrPointsToDate").datepicker("setDate",b),$("#txtBrPointsFromDate").datepicker("setDate",e)}catch(f){}}function LoadDataToBARControls(){$("#ddlBRYear").empty();var a=new Date,b="",c="";0==_varcheckDragDropBAR&&(b=a.getFullYear(),_selYearInBAR=b,c=DoubleDigit(a.getMonth()+1),_selMonthInBAR=c);for(var d=new Date,e=d.getFullYear(),f=-2;1>f;f++)$("#ddlBRYear").append("<option value="+(e+parseInt(f))+">"+(e+parseInt(f))+"</option>");$("#ddlBRYear").val(_selYearInBAR),loadMonthsData(),$("#lblMonth").text("Data shown is of :"),$("#ddlBRMonth").val(_selMonthInBAR),$("#ddlBRYear").val(_selYearInBAR),$("#ddlBRYear").attr("title",_selYearInBAR),$("#btnBRFilter").attr("disabled",!1),$("#divMainLoader").css("display","none")}function filterBrPoints(){if($("#divMainLoader").css("display","inline"),vrEmpID=parseInt($("#ddlFltrEmployeeName").val()),vrEmpSelect="0"==vrEmpID?!1:!0,_vrBrFromDate=$("#txtBrPointsFromDate").val(),_vrBrToDate=$("#txtBrPointsToDate").val(),0==$.trim(_vrBrFromDate).length&&0==$.trim(_vrBrToDate).length)_vrFilterDates=!1;else{var a=_vrBrFromDate.split("/"),b=_vrBrToDate.split("/");_vrBrFromDate=a[2]+"-"+a[1]+"-"+a[0],_vrBugTrToDate=b[2]+"-"+b[1]+"-"+b[0],_vrFilterDates=!0}_BaseUrl=_vrLocationOrigin+"/user/GetBREmpData?blnEmp="+vrEmpSelect+"&&strEmpID="+vrEmpID+"&&strStartDate="+_vrBrFromDate+"&&strEndDate="+_vrBugTrToDate+"&&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindBoosterData)}function loadBARData(){_selYearInBAR==(new Date).getFullYear()&&_selMonthInBAR>(new Date).getMonth()+1&&(_selMonthInBAR=(new Date).getMonth()+1);var a=new Date(_selYearInBAR,_selMonthInBAR,1,-1).getDate(),b=_selYearInBAR+"-"+_selMonthInBAR+"-1",c=_selYearInBAR+"-"+_selMonthInBAR+"-"+a;_BaseUrl=_vrLocationOrigin+"/User/GetEmpMonthBRData?strFirstDate="+b+"&strLastDate="+c+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,getBRPoints)}function bindBoosterData(a){var b="";"undefined"!=typeof a?"undefined"!=typeof a&&a.RecordCount>0?b=a.MultipleResults:"undefined"!=typeof a&&0==a.RecordCount?b=[]:"undefined"!=typeof a&&(b=a):b=[],_vrBrPointsData={datatype:"json",type:"GET",cache:!1,datafields:_vrBrDataFields,localdata:b,pagesize:_vrDefaultBARSizer},1==_vrFlagBrClick?($("#jqxgridBrpoints").jqxGrid({width:_vrProjectsMagTasksWidth,source:_vrBrPointsData,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,pagermode:"simple",filterable:!0,autosavestate:!0,autoloadstate:!0,columns:_vrEmpBrPointsColumns,columnsresize:!0}),disableJqxPagerButtonsOnLoad("jqxgridBrpoints"),$("#jqxgridBrpoints").on("pagechanged",function(a){disableEnablePagingButtons("jqxgridBrpoints",a)}),_vrFlagBrClick="0"):($("#jqxgridBrpoints").jqxGrid({source:_vrBrPointsData}),disableJqxPagerButtonsOnLoad("jqxgridBrpoints"),$("#jqxgridBrpoints").on("pagechanged",function(a){disableEnablePagingButtons("jqxgridBrpoints",a)})),$("#divMainLoader").css("display","none")}function Pointsrenderer(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c)return _Brpointstype=JSON.stringify(c.BREmpPointsType).toString(),_BrPositive=JSON.stringify(c.BREmpPstvPoints).toString(),_BrNegative=JSON.stringify(c.BREmpNgtvPoints).toString(),0==parseInt(_Brpointstype)?"<div class='pointsclass' title='"+_BrNegative+"'>"+_BrNegative+"</div>":"<div class='pointsclass' title='"+_BrPositive+"'>"+_BrPositive+"</div>"}catch(d){}}function deleteRowrenderer(a,b){var c="",d=$("#"+a).jqxGrid("getrowdata",b);return 0!=d.RecordCount&&(c=d.BRID.toString()),"<img title='delete' src='img/trash.png ' class='clsbrPointimginner' onclick='delteBrPoint("+parseInt(c)+","+b+")'/>"}function delteBrPoint(a,b){$("#btnSubmitDelete").css("display","block"),_vrDeleteBRRecId=a,_vrDeleteRowIndex=b,displayMessage(_vrAlert,_vrDeleteMsg),$("#btnSubmitDelete").click(function(){var a=$("#jqxgridBrpoints").jqxGrid("getrowid",_vrDeleteRowIndex);_BaseUrl=_vrLocationOrigin+"/user/DeleteEmpBRpoints?intEmpBRID="+_vrDeleteBRRecId+"&&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,DeleteData),$("#jqxgridBrpoints").jqxGrid("deleterow",a),$("#divUnderDevelopment").dialog("close")})}function DeleteData(){$(".info").html(_vrBRDeleteStatus),showStatusDiv(),loadBARData()}function validateBrFields(){return $(".clsnewBoostermandatory").each(function(){0==$.trim($(this).val())&&$(this).addClass("error")}),$(".error").length>0?($("#BRErrorDiv").css("display","inline"),!1):($("#BRErrorDiv").css("display","none"),!0)}function validateEmpName(){var a=$("#ddlEmployeeName").val();return null==a?$(".clsBoosterData").find(".chosen-choices").addClass("error"):$(".clsBoosterData").find(".chosen-choices").removeClass("error"),$(".error").length>0?($("#BRErrorDiv").css("display","inline"),!1):($("#BRErrorDiv").css("display","none"),!0)}function showbrEmpgraph(){$("#MagnifierDialog").dialog("option","title",_BARTitle),$("#MagnifierDialog").dialog("open"),$("#divMainLoader").css("display","none"),$("#idBARLoading").css("display","inline"),"undefined"==typeof $("#idShowBARInMagnify").html()?$("#MagnifierDialog").html(_vrHTMLBRWidget):$("#MagnifierDialog").append($("#idShowBARInMagnify")),_vrSetWidthOfGraph=1080,_vrSetHeightOfGraph=400,LoadDataToBARControls(),loadBARData()}function clearBoostaroosterFields(){$("#ddlEmployeeName").empty().trigger("chosen:updated"),$("input:radio[name=pointsTypeRadio]").prop("checked",!1),$(".clsbrtxtfields").val(""),$("#lblFrequency").html(""),$("#ddlCatergory").empty(),$("#ddlCatergory").append("<option value='0'>Select category</option>"),$("#ddlSubCatergory").empty(),$("#ddlSubCatergory").append("<option value='0'>Select subcategory</option>"),GetAllActiveEmployees(_vrFlagActiveEmployees),$(".clsBoosterData").find(".chosen-choices").removeClass("error"),$(".clsnewBoostermandatory").removeClass("error"),$(".clsnewBoostermandatory").each(function(){$(this).removeClass("error")}),$(".chosen-choices").each(function(){$(this).removeClass("error")}),$("#BRErrorDiv").css("display","none"),$("#ddlFltrEmployeeName").empty(),$("#ddlFltrEmployeeName").append("<option value='0'>Select employee</option>")}function LoadBARDataToSlider(){_BaseUrl=_vrLocationOrigin+"/mobile/GetEmpMonthBRData?intEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,SetBARDataToSliderLabel)}function SetBARDataToSliderLabel(a){0!=$.trim(a).length&&(parseInt(a[0].HighestTotalPoints)>parseInt(a[1].HighestTotalPoints)?($("#lblHdrYourScore").text(a[0].HighestTotalPoints),$("#lblHdrHighest").text(a[0].HighestTotalPoints)):($("#lblHdrYourScore").text(a[0].HighestTotalPoints),$("#lblHdrHighest").text(a[1].HighestTotalPoints)))}function getBrAllotedEmpNames(a,b){for(var c=b.split(","),d="",e=0;e<c.length;e++)if(c[0].length>0)try{d+=$("#ddlEmployeeName option[value="+c[e]+"]").html()+", "}catch(f){}return d.substr(0,d.length-2)}function loadMonthsData(){var a=["","January","February","March","April","May","June","July","August","September","October","November","December"],b=DoubleDigit((new Date).getMonth()+1);if($("#ddlBRYear").val()<(new Date).getFullYear()){$("#ddlBRMonth").empty();for(var c=1;c<a.length;c++)$("#ddlBRMonth").append("<option value="+c+">"+a[c]+"</option>")}else{vrCurSelmonth=$("#ddlBRMonth").val(),$("#ddlBRMonth").empty();for(var c=1;b>=c;c++)$("#ddlBRMonth").append("<option value="+c+">"+a[c]+"</option>");vrCurSelmonth>=b&&(vrCurSelmonth=b,$("#ddlBRMonth").val(vrCurSelmonth))}$("#ddlBRMonth").attr("title",a[vrCurSelmonth])}function capitalize(a){return a[0].toUpperCase()+a.slice(1).toLowerCase()}function showBAREmpgraph(){_varcheckDragDropBAR="0",showbrEmpgraph()}function refreshBoosterGraph(){$("#idBARLoading").css("display","block"),_varcheckDragDropBAR=0,LoadDataToBARControls(),loadBARData()}function fixdata(a){for(var b="",c=0,d=10240;c<a.byteLength/d;++c)b+=String.fromCharCode.apply(null,new Uint8Array(a.slice(c*d,c*d+d)));return b+=String.fromCharCode.apply(null,new Uint8Array(a.slice(c*d)))}function ab2str(a){for(var b="",c=0,d=10240;c<a.byteLength/d;++c)b+=String.fromCharCode.apply(null,new Uint16Array(a.slice(c*d,c*d+d)));return b+=String.fromCharCode.apply(null,new Uint16Array(a.slice(c*d)))}function s2ab(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0;d!=a.length;++d)c[d]=a.charCodeAt(d);return[c,b]}function xw_noxfer(a,b){var c=new Worker(XW.noxfer);c.onmessage=function(a){switch(a.data.t){case"ready":break;case"e":console.error(a.data.d);break;case XW.msg:b(JSON.parse(a.data.d))}};var d=rABS?a:btoa(fixdata(a));c.postMessage({d:d,b:rABS})}function xw_xfer(a,b){var c=new Worker(rABS?XW.rABS:XW.norABS);if(c.onmessage=function(a){switch(a.data.t){case"ready":break;case"e":console.error(a.data.d);break;default:xx=ab2str(a.data).replace(/\n/g,"\\n").replace(/\r/g,"\\r"),console.log("done"),b(JSON.parse(xx))}},rABS){var d=s2ab(a);c.postMessage(d[1],[d[1]])}else c.postMessage(a,[a])}function xw(a,b){transferable=!1,transferable?xw_xfer(a,b):xw_noxfer(a,b)}function get_radio_value(a){for(var b=document.getElementsByName(a),c=0;c<b.length;c++)if(b[c].checked||1===b.length)return b[c].value}function to_json(a){var b={};return"undefined"!=typeof a&&a.SheetNames.forEach(function(c){var d=X.utils.sheet_to_row_object_array(a.Sheets[c]);d.length>0&&(b[c]=d)}),b}function process_wb(a){use_worker&&XLS.SSF.load_table(a.SSF);var b="";b=JSON.stringify(to_json(a),2,2),_vrJsonOutput=JSON.parse(b)}function handleFile(a){try{$("#errNewExcelTskError").css("display","none"),$("#divSuccesTaskCreationDiv").empty(),$("#divSuccesTaskCreationDiv").css("display","none"),$("#divNonSuccesTaskCreationDiv").empty(),$("#divNonSuccesTaskCreationDiv").css("display","none"),$("#errExcelFile").css("display","none"),$("#idDisplayCreatedTasks").css("display","none"),$("#idDisplayNonCreatedTasks").css("display","none"),rABS=!1,use_worker=!1;{var b=a.target.files,c=b[0],d=new FileReader;c.name}d.onload=function(a){"undefined"!=typeof console&&console.log("onload",new Date,rABS,use_worker);var b=a.target.result;if(use_worker)xw(b,process_wb);else{var c;if(rABS)c=X.read(b,{type:"binary"});else{var d=fixdata(b);try{c=X.read(btoa(d),{type:"base64"})}catch(a){$("#errExcelFile").css("display","inline"),$("#idChooseExcel").replaceWith($("#idChooseExcel").clone())}}process_wb(c)}},rABS?d.readAsBinaryString(c):d.readAsArrayBuffer(c)}catch(a){}}function bindCustomersDetails(){var a={GetStatus:!1,Active:"",GetCustomerID:!1,CustomerID:0,TokenID:_vrUserTokenId};null==$("#ddlCustomerProject").val()&&(_BaseUrl=_vrLocationOrigin+"/User/GetActiveStatusDetails?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBindStatusRole)),_BaseUrl=_vrLocationOrigin+"/customer/getcustomerdata",ajaxCallWithObject(_BaseUrl,a,bindCustomersData)}function bindCustomersData(a){var b=a.MultipleResults,c="",d="";setLocalStorageFromDialog("jqxCustomerTrial",_vrCustomersGridWidth);var e=sortingcolumns("jqxCustomerTrial");c=e.vrSortColumnName,d=e.vrSortOrder,_DataFields=[{name:"CustomerID"},{name:"ContactPerson"},{name:"Email"},{name:"Phone"},{name:"Website"},{name:"Address"},{name:"CustomerNotes"},{name:"CustomerCountryID"},{name:"Active",type:"bool"},{name:"CustomerCompanyName"}],_vrCustomersData={datatype:"json",type:"GET",cache:!1,datafields:_DataFields,localdata:b,pagesize:_vrDefaultCustomerSizer},bindDataToJqx("jqxCustomerTrial",_vrCustomersData,_vrCustColumns,_vrCustomersGridWidth),_vrSelCustomerStatus.length>0||_vrSelCustomerStatus==_vrSelCustomerUserStatusText?_vrSelCustomerStatus!=_vrSelCustomerUserStatusText&&$("#ddlCustomerProject").val(_vrSelCustomerStatus):$("#ddlCustomerProject").val(_vrDefaultActiveStatus),_vrWidgetCOntrolData.length>0&&_custIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_custIndexNO]).length>0&&($("#ddlUserstatus").val(_vrWidgetCOntrolData[_custIndexNO].ddlUserstatus),$("#txtUserSearch").val(_vrWidgetCOntrolData[_custIndexNO].txtUserSearch)),filterCustomersJqxGrid(),CheckBrowserNAddCSS(),LoadPageNumForCustomer(),$("#imgCustomerMagnifier").attr("disabled",!1),$("#idCustomerLoding").css("display","none"),setRecordCountPosition("jqxCustomerTrial"),sortOrderUserPref("jqxCustomerTrial",c,d),_custIndexNO=-1}function customerValuesLink(a,b,c,d,e){_vrCustDetails=1,_vrCustDialogOpen=1;var f=$("#MagnifierDialog").dialog("option","title");f==_vrCustomerDialogHdr?(_vrLocalCustDataOnCustClick=null,_vrLocalCustDataOnCustClick=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial"))):f!=_vrDialogBoxCustomerTrail&&(_vrLocalCustDataOnCustClick=null,_vrLocalCustDataOnCustClick=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial"))),$(".clslblgetvalue").text(""),checkWidgetsAndAppend(),$(".clslnkcustomercontact").css("display","inline"),$(".clsmagcompanyname").css("display","block"),$("#divMainLoader").css("display","block"),$("#divMagnifyHdrTitle").css("height","80px"),_vrMagnifyCustId=a,_vrCustContName=b,_vrCustEmailId=c,_vrCustWebsiteName=d,_vrCustName=e,b=convertCharToDoubleSingle(b),c=convertCharToDoubleSingle(c),d=convertCharToDoubleSingle(d),e=convertCharToDoubleSingle(e),"undefined"!=typeof d&&"-1"==d.indexOf(_vrHostAddressDefault)&&(d=_vrHostAddressDefault+d),$("#lblMagCompanyFieldValue").text(e),$("#lblMagfieldtext1").text(_vrCustNameLbl),$("#lblMagfieldtext2").text(_vrCustEmailIdLbl),$("#lblMagfieldtext3").text(_vrCustWebsite),$("#lblMagFieldVal1").text(b),$("#lblMagFieldVal2").text(""),$("#lblMagFieldVal3").text(""),$("#lnkCompanyEmailId").text(c),$("#lnkCompanyWebsite").text(d),$("#lnkCompanyEmailId").attr("href","mailto:"+c),$("#lnkCompanyWebsite").attr("href",d),_BaseUrl=_vrLocationOrigin+"/Project/GetProjectData";var g={ProjectName:0,ProjectCustomerID:0,ProjectStatusID:"0",ProjectID:0,TokenID:_vrUserTokenId};0==_vrCustDetCnt?ajaxCallWithObject(_BaseUrl,g,customerProjValues):1==_vrCustDetCnt&&($("#divMagnifyHdrTitle").css("display","block"),openMagnifyDialogBox(_vrCustomerDetDialogHdr,"jqxPreviewGrid",_vrDefaultPreviewPager),$("#divMagnifierGrid").css("display","inline"),_vrJqxMagnifyLoadedFlag!=_vrProjectsMagnifyLoaded&&(vrCustomerProjData={datatype:"json",type:"GET",cache:!1,datafields:_vrProjDataFields,localdata:_vrCustSourceData},bindDataToJqxInMagnifier("jqxPreviewGrid",vrCustomerProjData,_vrProjeMagnifierCustValues,__vrCustProjMagTasksWidth),null!=_vrTaskDataOnCPUOnTaskClick&&$("#jqxPreviewGrid").jqxGrid("gotopage",_vrTaskDataOnCPUOnTaskClick.pagenum),_vrTaskDataOnCPUOnTaskClick=null,_vrCustDetCnt=0),_vrJqxMagnifyLoadedFlag=_vrProjectsMagnifyLoaded,$(".clsmagnifyeditbuttons").css("display","none"),$("#btnEditCustomerFields").css("display","inline"),$("#divMainLoader").css("display","none"),_vrCustDetCnt=0),event.preventDefault()}function customerProjValues(a){$("#divMagnifyHdrTitle").css("display","block");var b=a.MultipleResults[0].LstProjects,c=jQuery.grep(b,function(a){return a.ProjectCustomerID==parseInt(_vrMagnifyCustId)});openMagnifyDialogBox(_vrCustomerDetDialogHdr,"jqxPreviewGrid",_vrDefaultPreviewPager),$(".ui-dialog :button").focus(),$("#divMagnifierGrid").css("display","inline"),_vrJqxMagnifyLoadedFlag!=_vrProjectsMagnifyLoaded?(vrCustomerProjData={datatype:"json",type:"GET",cache:!1,datafields:_vrProjDataFields,localdata:c},bindDataToJqxInMagnifier("jqxPreviewGrid",vrCustomerProjData,_vrProjeMagnifierCustValues,__vrCustProjMagTasksWidth),_vrCustSourceData=c):(vrCustomerProjData.localdata=c,_vrCustSourceData=c,$("#jqxPreviewGrid").jqxGrid({source:vrCustomerProjData}),disableJqxPagerButtonsOnLoad("jqxPreviewGrid"),$("#jqxPreviewGrid").on("pagechanged",function(a){disableEnablePagingButtons("jqxPreviewGrid",a)})),_vrJqxMagnifyLoadedFlag=_vrProjectsMagnifyLoaded,$(".clsmagnifyeditbuttons").css("display","none"),$("#btnEditCustomerFields").css("display","inline"),$("#divMainLoader").css("display","none"),event.preventDefault()}function filterCustomerTrStatus(){_custIndexNO=-1,filterCustomersJqxGrid(),_vrSelCustomerStatus=$("#ddlCustomerProject").val();var a=$("#ddlCustomerProject option:selected").text();$("#ddlCustomerProject").attr("title",""),$("#ddlCustomerProject").attr("title",a),0==_vrSelCustomerStatus.length&&(_vrSelCustomerStatus=_vrSelCustomerUserStatusText)
}function LoadCustomerDetails(){setTimeout(function(){filterCustomersJqxGrid()},5)}function SearchCustomer(){filterCustomersJqxGrid()}function filterCustomersJqxGrid(){try{var a=$("#ddlCustomerProject").val(),b=$("#idSearchCustomer").val().toLowerCase(),c=_vrCustomersData,d=_vrCustomersData.localdata,e=d;null!=a&&$("#ddlCustomerProject").val().length>0&&(e=jQuery.grep(d,function(b){return b.Active==parseInt(a)})),$.trim(b).length>0&&(e=jQuery.grep(e,function(a){return a.CustomerCompanyName.toLowerCase().indexOf(b)>-1})),0==$.trim(b).length&&0==$("#ddlCustomerProject").val().length&&(e=d),c.localdata=e,$("#jqxCustomerTrial").jqxGrid({source:c}),_vrCustomersData.localdata=d,disableJqxPagerButtonsOnLoad("jqxCustomerTrial"),$("#idCustomerLoding").css("visibility","none")}catch(f){}}function loadJqxCustomersGrid(){try{bindDataToJqx("jqxCustomerTrial",_vrCustomersData,_vrCustColumns,_vrMagnifyGridWidth),filterCustomersJqxGrid()}catch(a){}}function decreaseJqxCustomersGrid(){try{bindDataToJqx("jqxCustomerTrial",_vrCustomersData,_vrCustColumns,_vrCustomersGridWidth),filterCustomersJqxGrid()}catch(a){}}function createNewCustomer(){try{$("#ddlCountryList").removeClass("error"),$("#errUserExist").css("display","none"),$("#errDataNotInserted").css("display","none"),$("#txtCustomerName").removeClass("error"),$(".clstextfieldwidth").val(""),$("#errEmail").css("display","none"),$("#errWebsite").css("display","none"),$("#errNewCustomerError").css("display","none"),$("#dailog").dialog("option","title",_vrDialogBoxCustomerAddingTrail),_vrDialogBoxTitle=_vrDialogBoxCustomerAddingTrail,$(".clsdailogfields").css("display","none"),$("#idShowCustomerDetails").css("display","inline-block"),$(".clsexistedcustomerfields").css("display","none"),_BaseUrl=_vrLocationOrigin+"/Customer/GetCountries?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBindCountrys),$("#chkActive").prop("checked",!0),count=0,$("#dailog").dialog("open"),$("#btnSave").css("display","inline"),$("#btnUpdate").css("display","none")}catch(a){}}function SaveCustomer(){_vrLocalCustDataOnCustClick=null,_vrLocalCustDataOnCustClick=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial")),$("#divMainLoader").css("display","inline");var a=$("#txtCustomerName").val(),b=$("#txtPrimaryContact").val(),c=$("#txtEmail").val(),d=$("#txtAddress").val(),e=$("#txtWebsite").val(),f=$("#ddlCountryList").val(),g=$("#txtPhone").val(),h=$("#txtNotes").val();if(""==a||0==$.trim($("#ddlCountryList").val()).length){if(0==$.trim(a).length&&$("#txtCustomerName").addClass("error"),0==$.trim($("#ddlCountryList").val()).length&&$("#ddlCountryList").addClass("error"),$("#errUserExist").css("display","none"),$(".error").length>0)return $("#divMainLoader").css("display","none"),$("#errNewCustomerError").css("display","inline"),!1;$("input[type = submit]").attr("disabled",!0)}else if(validateEmail(c)&&validateWebsite(e)){varActive=$("#chkActive").is(":checked")?1:0;var i={ContactPerson:b,CustomerCompanyName:a,Email:c,Phone:g,Website:e,Address:d,CustomerNotes:h,CustomerCountryID:f,Active:varActive,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Customer/InsertCustomer",ajaxCallToInsertObject(_BaseUrl,i)}}function CheckExistingCompanys(a){for(var b=_vrCustomersData.localdata.length,c=0;b>c;c++)if(_vrCustomersData.localdata[c].CustomerCompanyName==a)return!0;return!1}function LoadPageNumForCustomer(){try{null!=_vrLocalCustDataOnCustClick&&(localStorage.setItem("jqxGridjqxCustomerTrial",JSON.stringify(_vrLocalCustDataOnCustClick)),$("#jqxCustomerTrial").jqxGrid("gotopage",_vrLocalCustDataOnCustClick.pagenum)),LoadTaskPageNumForUserInMaginfy()}catch(a){}}function LoadPageNumForUser(){try{null!=_vrLocalUserDataOnUserClick&&(localStorage.setItem("jqxGridjqxUserTrial",JSON.stringify(_vrLocalUserDataOnUserClick)),$("#jqxUserTrial").jqxGrid("gotopage",_vrLocalUserDataOnUserClick.pagenum))}catch(a){}}function LoadTaskPageNumForUserInMaginfy(){try{null!=_vrTaskDataOnCPUOnTaskClick&&$("#jqxPreviewGrid").jqxGrid("gotopage",_vrTaskDataOnCPUOnTaskClick.pagenum)}catch(a){}}function LoadPageNumForProj(){try{null!=_vrLocalTaskDataOnProjClick&&(localStorage.setItem("jqxGridjqxProjectsGrid",JSON.stringify(_vrLocalTaskDataOnProjClick)),$("#jqxProjectsGrid").jqxGrid("gotopage",_vrLocalTaskDataOnProjClick.pagenum))}catch(a){}}function ajaxCallToInsertObject(a,b){$.ajax({type:"POST",url:a,contentType:"application/json;charset=utf-8",data:JSON.stringify(b),processData:!1,crossDomain:!0,dataType:"json",timeout:18e3,success:function(b){if(b.ResponseId==_vrResponseId){if(_BaseUrl=_vrLocationOrigin+"/User/GetCustProjUserCount?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindRecordsCount),bindCustomersDetails(),$("#dailog").dialog("close"),LoadCountDataToCustUserProjSilde(),a==_vrLocationOrigin+"/Customer/UpdateCustomer"){$(".info").html(_vrCustomerUpdatedStatus);var c=$("#txtCustomerName").val(),d=$("#txtPrimaryContact").val(),e=$("#txtEmail").val(),f=$("#txtWebsite").val();customerValuesLink(_vrMagnifyCustId,d,e,f,c),$("#errUserExist").css("display","none")}else $(".info").html(_vrCustomerCreatedStatus),$("#errUserExist").css("display","none");b.ResponseId==_vrErrResponseId&&displayError(),$("input[type = submit]").attr("disabled",!1),_vrCustomerCreation="",showStatusDiv(),$("#errUserExist").css("display","none")}else b.ResponseId==_vrResponseFailureId?($("#errUserExist").css("display","inline"),$("#divMainLoader").css("display","none")):($("#errDataNotInserted").css("display","inline"),$("#divMainLoader").css("display","none"));$("#MagnifierDialog").dialog("isOpen")===!1&&$("#divMainLoader").css("display","none"),$("input[type = submit]").attr("disabled",!1)},error:function(){return displayError(),$("#divMainLoader").css("display","none"),_vrCustomerCreatedStatus="",_vrFunctionalityStatus="",$("input[type = submit]").attr("disabled",!1),!1}})}function CancelCustomerDetails(){$("#ddlCountryList").empty(),$(".clstextfieldwidth").val(""),$("#errNewCustomerError").css("display","none"),$("#errEmail").css("display","none"),count=0,$("#errWebsite").css("display","none"),$("#txtCustomerName").removeClass("error"),$("#txtEmail").removeClass("error"),$("#txtWebsite").removeClass("error"),$("#dailog").dialog("close")}function validateEmail(a){a.charAt(0);if(a.charCodeAt(0)<=122&&a.charCodeAt(0)>=97||a.charCodeAt(0)<=90&&a.charCodeAt(0)>=65){var b=a.split("@");if(2==b.length){b[0];for(var c=0,d=0;d<b[0].length;d++)if(b[0].charCodeAt(d)<=47&&b[0].charCodeAt(d)>=32){var e=b[0].indexOf(b[0].charAt(d));if(e>0){var f=1;f+=e;var g=b[0].indexOf(b[0].charAt(d),f);g>e&&g==f&&c++}}if(0==c){var h=/^[a-zA-Z0-9_\!#$%^&*()+-]+(\.[a-zA-Z0-9_\!#$%^&*()+-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,4})$/;return""==a?($("#errEmail").css("display","none"),!0):h.test(a)?($("#errEmail").css("display","none"),!0):($("#errEmail").css("display","inline"),$("#divMainLoader").css("display","none"),!1)}return $("#errEmail").css("display","inline"),$("#divMainLoader").css("display","none"),!1}return $("#errEmail").css("display","inline"),$("#divMainLoader").css("display","none"),!1}return 0==a.length?($("#errEmail").css("display","none"),!0):($("#errEmail").css("display","inline"),$("#divMainLoader").css("display","none"),!1)}function validateWebsite(a){var b=/^((http|https|ftp):\/\/(www\.)?|www\.)[a-zA-Z0-9\_\-]+\.([a-zA-Z]{2,4}|[a-zA-Z]{2}\.[a-zA-Z]{2})(\/[a-zA-Z0-9\-\._\?\&=,'\+%\$#~]*)*$/,b=/^((http|https|ftp):\/\/(www\.)?|www\.)[a-zA-Z0-9\_\-]+\.([a-zA-Z]{2,4}|[a-zA-Z]{2}\.[a-zA-Z]{2})(\/[a-zA-Z0-9\-\._\?\&=,'\+%\$#~]*)*$/;return""==a||void 0==a?($("#errWebsite").css("display","none"),!0):b.test(a)?($("#errWebsite").css("display","none"),!0):($("#errWebsite").css("display","inline"),$("#divMainLoader").css("display","none"),!1)}function editCustomerProfile(){$("#divMainLoader").css("display","inline"),$("#divMainLoader").css("display","inline"),$("#errUserExist").css("display","none"),$("#dailog").dialog("option","title",_vrDialogBoxCustomerUpdateTrail),$("#dailog").dialog("open"),$(".clscustomererrordiv").css("display","none"),$("#txtCustomerName").removeClass("error"),$("#ddlCountryList").removeClass("error"),objCustomerDetailsMagnify={GetCustomerID:!0,CustomerID:_vrMagnifyCustId,TokenID:_vrUserTokenId},_BaseUrl=_vrLocationOrigin+"/Customer/GetCountries?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBindUpdatedCountrys)}function UpdateFunction(a){$("#divMainLoader").css("display","block"),$("#txtCustomerName").val(a.MultipleResults[0].CustomerCompanyName),$("#txtPrimaryContact").val(a.MultipleResults[0].ContactPerson),$("#txtEmail").val(a.MultipleResults[0].Email),$("#txtAddress").val(a.MultipleResults[0].Address),$("#txtWebsite").val(a.MultipleResults[0].Website),$("#txtPhone").val(a.MultipleResults[0].Phone),$("#txtNotes").val(a.MultipleResults[0].CustomerNotes),$("#ddlCountryList").val(a.MultipleResults[0].CustomerCountryID),a.MultipleResults[0].Active==_vrResponseId?$("#chkActive").prop("checked",!0):$("#chkActive").prop("checked",!1),_vrDialogBoxTitle=_vrDialogBoxCustomerTrail,$(".clsdailogfields").css("display","none"),$("#idShowCustomerDetails").css("display","inline-block"),$(".clsexistedcustomerfields").css("display","none"),$("#btnSave").css("display","none"),$("#errEmail").css("display","none"),$("#errWebsite").css("display","none"),$("#btnUpdate").css("display","inline"),$("#divMainLoader").css("display","none")}function UpdateCustomerDetails(){var a=$("#txtCustomerName").val(),b=$("#txtPrimaryContact").val(),c=$("#txtEmail").val(),d=$("#txtAddress").val(),e=$("#txtWebsite").val(),f=$("#txtPhone").val(),g=$("#txtNotes").val(),h=$("#ddlCountryList").val();if(vrActive=1==$("#chkActive").prop("checked")?1:0,""==a||0==$.trim($("#ddlCountryList").val()).length){if(0==$.trim(a).length&&$("#txtCustomerName").addClass("error"),0==$.trim($("#ddlCountryList").val()).length&&$("#ddlCountryList").addClass("error"),$(".error").length>0)return $("#divMainLoader").css("display","none"),$("#errNewCustomerError").css("display","inline"),!1;$("input[type = submit]").attr("disabled",!0)}else validateEmail(c)?validateWebsite(e)?(objCustomer={CustomerID:_vrMagnifyCustId,ContactPerson:b,CustomerCompanyName:a,Email:c,Phone:f,Website:e,Address:d,CustomerNotes:g,CustomerCountryID:h,Active:vrActive,TokenID:_vrUserTokenId},$("#divMainLoader").css("display","block"),$("#errUserExist").css("display","none"),$("#errNewCustomerError").css("display","none"),_BaseUrl=_vrLocationOrigin+"/Customer/UpdateCustomer",ajaxCallToInsertObject(_BaseUrl,objCustomer)):$("#errWebsite").css("display","inline"):$("#errEmail").css("display","inline")}function PhoneValidation(){var a=document.getElementById("txtPhone").value;if(0==a.length)a="";else if(a.length<10)a=a;else if(0==validateNumeric(a))a=a;else if(10==a.length){var b=new String("("+a.substr(0,3)+")"+a.substr(3,3)+"-"+a.substr(6,4));a=b}document.getElementById("txtPhone").value=a}function validateNumeric(a){var b=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/;return b.test(a)}function GetCustomerName(){$("#txtCustomerName").val().length>0?($("#txtCustomerName").removeClass("error"),0==$("#idShowCustomerDetails .error").length&&$("#errNewCustomerError").css("display","none")):($("#errNewCustomerError").css("display","inline"),$("#txtCustomerName").addClass("error"),$("#divMainLoader").css("display","none")),$("#errUserExist").css("display","none")}function LoadNewProcDialog(){try{$("#divMainLoader").css("display","block"),ResetProcsFields(),$("#dailog").dialog("option","title",_vrAddProcHdr),_vrDialogBoxTitle=_vrAddProcHdr,$(".clsdailogfields").css("display","none"),$("#idShowNewPolicy").css("display","inline-block"),$("#dailog").dialog("open"),$("#divMainLoader").css("display","none")}catch(a){}}function ResetProcsFields(){$(".clsclearnewpolicyfields").val("")}function SubmitSavePolicy(){validateNewPolicyFields()}function CancelNewPolicy(){$("#btnCloseNewPolicy").dialog("close")}function validateNewPolicyFields(){return $(".clsnewpolicymandatory").each(function(){0==$.trim($(this).val()).length&&$(this).addClass("error")}),$(".error").length>0?($("#mandatoryPolicyReqField").css("display","inline"),!1):($("#mandatoryPolicyReqField").css("display","none"),!0)}function LoadProcsNTemlate(){"1"==_ProcAndTemplate?(_dbURL="/WebstationDBConnector.asmx/GetTemplateHistoryDetails",_insertHeading="Add new template",_editHeading="Edit template"):"2"==_ProcAndTemplate?(_dbURL="/WebstationDBConnector.asmx/GetPolicyHistoryDetails",_insertHeading="Add new policy",_editHeading="Edit policy"):"3"==_ProcAndTemplate&&(_dbURL="/WebstationDBConnector.asmx/GetStandardsHistoryDetails",_insertHeading="Add new standards",_editHeading="Edit standards")}function CheckBrowserNAddCSS(){-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?($("#txtUserSearch").css("padding-right","0px"),$("#txtProjTrProjects").css("padding-right","0px"),$("#idSearchCustomer").css("padding-right","0px"),$("#txtUserSearch").css("width","120px"),$("#txtProjTrProjects").css("width","119px"),$("#idSearchCustomer").css("width","112px")):($("#txtUserSearch").css("padding-right","20px"),$("#txtProjTrProjects").css("padding-right","20px"),$("#idSearchCustomer").css("padding-right","20px"),$("#idSearchCustomer").css("margin-left","0px"))}function LoadUserDataToWidget(){_BaseUrl=_vrLocationOrigin+"/User/GetEmployeeData";var a={EmpID:0,UserRoleID:0,GetStatus:!1,Active:"",TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,a,bindUsersData)}function bindUsersData(a){try{var b="",c="",d=sortingcolumns("jqxUserTrial");b=d.vrSortColumnName,c=d.vrSortOrder;var e=a.MultipleResults;_vrUsersData={datatype:"json",type:"GET",cache:!1,datafields:_vrUserDataFields,localdata:e,pagesize:_vrDefaulUserSizer},$("#MagnifierDialog").dialog("isOpen")===!0&&"Users"===$("#MagnifierDialog").dialog("option","title")?bindDataToJqx("jqxUserTrial",_vrUsersData,_vrUserColumns,_vrMagnifyUserTrailGridWidth):bindDataToJqx("jqxUserTrial",_vrUsersData,_vrUserColumns,_vrUsersGridWidth),_vrSelUserStatus.length>0||_vrSelUserStatus==_vrSelCustomerUserStatusText?_vrSelUserStatus!=_vrSelCustomerUserStatusText&&$("#ddlUserstatus").val(_vrSelUserStatus):$("#ddlUserstatus").val(_vrDefaultActiveStatus),_vrWidgetCOntrolData.length>0&&_userIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_userIndexNO]).length>0&&($("#ddlUserstatus").val(_vrWidgetCOntrolData[_userIndexNO].ddlUserstatus),$("#txtUserSearch").val(_vrWidgetCOntrolData[_userIndexNO].txtUserSearch),_userIndexNO=-1),filterUserJqxGrid(),$("#divUserLoading").css("display","none"),CheckBrowserNAddCSS(),LoadPageNumForUser(),$("#imgUserMagnify").attr("disabled",!1),setRecordCountPosition("jqxUserTrial"),sortOrderUserPref("jqxCustomerTrial",b,c)}catch(f){$("#imgUserMagnify").attr("disabled",!1),$("#divUserLoading").css("display","none")}}function checkIsUndefined(a){var b="";return"undefined"!=typeof a&&(b=a),b}function userValueLink(a,b,c,d){_vrUserDialogOpen=1,$(".clslblgetvalue").text(""),_vrEmpProfilePicImage="";var e=$("#MagnifierDialog").dialog("option","title");return"Users"==e?(_vrLocalUserDataOnUserClick=null,_vrLocalUserDataOnUserClick=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial"))):e!=_vrUserDetDialogHdr&&(_vrLocalUserDataOnUserClick=null,_vrLocalUserDataOnUserClick=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial"))),checkWidgetsAndAppend(),$("#divMainLoader").css("display","block"),_vrMagnifyUserId=a,$("#divMagnifyHdrTitle").css("display","block"),b=convertCharToDoubleSingle(b),d=convertCharToDoubleSingle(d),$("#lblMagfieldtext1").text(_vrUserNameLbl),$("#lblMagfieldtext2").text(_vrUserMobileLbl),$("#lblMagfieldtext3").text(_vrUserAddressLbl),$("#lblMagFieldVal1").text(b),$("#lblMagFieldVal2").text(c),cropText($("#lblMagFieldVal3"),d,_vrTextFieldUserManagerLen),bindTasksBasedOnClientID(_vrDdlDefault,a,_vrBlnExcludeDefault,bindUserMagnifyGrid),!1}function bindUserMagnifyGrid(a){var a=a;openMagnifyDialogBox(_vrUserDetDialogHdr,"jqxPreviewGrid",_vrDefaultPreviewPager),$("#divMagnifierGrid").css("display","inline"),$(".ui-dialog :button").focus(),_vrJqxMagnifyLoadedFlag!=_vrTasksMagnifyLoaded?(_vrProjectsTasksData={datatype:"json",type:"GET",cache:!1,datafields:_vrTasksDataFields,localdata:a},bindDataToJqxInMagnifier("jqxPreviewGrid",_vrProjectsTasksData,_vrTasksMagnifierColumns,_vrProjectsMagTasksWidth)):(_vrProjectsTasksData.localdata=a,$("#jqxPreviewGrid").jqxGrid({source:_vrProjectsTasksData}),LoadTaskPageNumForUserInMaginfy(),disableJqxPagerButtonsOnLoad("jqxPreviewGrid"),$("#jqxPreviewGrid").on("pagechanged",function(a){disableEnablePagingButtons("jqxPreviewGrid",a)})),_vrJqxMagnifyLoadedFlag=_vrTasksMagnifyLoaded,$(".clsmagnifyeditbuttons").css("display","none"),$("#btnEditUserFields").css("display","inline"),$("#divMainLoader").css("display","none"),$("#imgMagnifydialogLoader").css("display","none"),$("#MagnifierDialog").parent().find("button").attr("disabled",!1),_vrMagnifyCloneTitle=_vrDialogBoxUser}function loadJqxUserMagifyClickGrid(){bindDataToJqx("jqxUserTrial",_vrUsersData,_vrUserColumns,_vrMagnifyUserTrailGridWidth),filterUserJqxGrid(),LoadPageNumForUser()}function decreaseJqxUserGrid(){try{setLocalStorageFromDialog("jqxUserTrial",_vrUsersGridWidth),bindDataToJqx("jqxUserTrial",_vrUsersData,_vrUserColumns,_vrUsersGridWidth),filterUserJqxGrid()}catch(a){}}function showUserDetails(){_vrMagnifyUserId=_EmpId,editUserProfile()}function editUserProfile(){UpdateExistingUser(_vrMagnifyUserId),$("#ddlNewUserTimeZone").empty(),$("#ddlNewUserDesignation").empty(),$("#ddlNewUserBloodGrp").empty(),$("#ddlNewUserRole").empty(),_vrEditUserProfile=_vrUserEditProfileDefault,$("#divMainLoader").css("display","inline")}function bindUserStatus(){null==$("#ddlUserstatus").val()&&(_BaseUrl=_vrLocationOrigin+"/User/GetActiveStatusDetails?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBindStatusRoleUser))}function filterUserBasedOnStatus(){filterUserJqxGrid(),_vrSelUserStatus=$("#ddlUserstatus").val();var a=$("#ddlUserstatus option:selected").text();$("#ddlUserstatus").attr("title",""),$("#ddlUserstatus").attr("title",a),0==_vrSelUserStatus.length&&(_vrSelUserStatus=_vrSelCustomerUserStatusText)}function SearchUser(){filterUserJqxGrid()}function LoadUserDetails(){setTimeout(function(){filterUserJqxGrid()},5)}function filterUserJqxGrid(){try{var a=$("#ddlUserstatus").val(),b=$("#txtUserSearch").val().toLowerCase(),c=_vrUsersData,d=_vrUsersData.localdata,e=d;null!=a&&0!=$("#ddlUserstatus").val().length&&(e=jQuery.grep(d,function(b){return b.Active==parseInt(a)})),$.trim(b).length>0&&(e=jQuery.grep(e,function(a){return a.EmpFirstName.toLowerCase().indexOf(b)>-1})),0==$.trim(b).length&&0==$("#ddlUserstatus").val().length&&(e=d),c.localdata=e,$("#jqxUserTrial").jqxGrid({source:_vrUsersData}),_vrUsersData.localdata=d,disableJqxPagerButtonsOnLoad("jqxUserTrial"),$("#divUserLoading").css("display","none")}catch(f){$("#divUserLoading").css("display","none")}}function LoadNewUserDialog(){$("#divMainLoader").css("display","block"),_vrEditUserProfile="",ResetUserFields(),$("#userProfilePicture").attr("src",_vrUploadEmpPicdefault),$(".clsshowonupdate").css("display","inline"),$("#ddlNewUserTimeZone").empty(),$("#ddlNewUserDesignation").empty(),$("#ddlNewUserBloodGrp").empty(),$("#ddlNewUserRole").empty(),$("#btnSaveNewUser").css("display","inline"),count=0,createNewUser(),_vrLocalUserDataOnUserClick=null,_vrLocalUserDataOnUserClick=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial"))}function createNewUser(){try{$("#dailog").dialog("option","title",_vrAddUserHdrDetails),_vrDialogBoxTitle=_vrAddUserHdrDetails,$(".clsdailogfields").css("display","none"),$("#idShowNewUser").css("display","inline-block"),$("#dailog").dialog("open"),$(".clsshowonupdate").css("display","none"),_BaseUrl=_vrLocationOrigin+"/user/GetREmployeesCommonDetails?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagNewUserRole)}catch(a){}}function CancelNewUser(){$("#dailog").dialog("close")}function CheckPictureExtension(a){try{var b=a.files[0].name;if(""!==b){var c=(a.files[0].size,b.split(".").pop());c=c.toLowerCase(),"jpg"===c?readURL(a):(displayMessage(_vrAlert,_vrFileExtension),$("#"+a.id).replaceWith($("#"+a.id).clone()))}}catch(d){}}function UserPhoneValidation(a){var b=a.id,c=document.getElementById(b).value;if(0==c.length)c="";else if(c.length<10)c=c;else if(0==validateNumeric(c))c=c;else if(10==c.length){var d=new String("("+c.substr(0,3)+")"+c.substr(3,3)+"-"+c.substr(6,4));c=d}document.getElementById(b).value=c}function validateNumeric(a){var b=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/;return b.test(a)}function ValidateNewUserEmail(a){var b="",c="";if(a!=_vrUserAlternateEmailTxtBoxName?(b=$("#txtNewUserEmail").val(),c="txtNewUserEmail"):(b=$("#txtNewUserAltEmail").val(),c="txtNewUserAltEmail"),b.charCodeAt(0)<=122&&b.charCodeAt(0)>=97||b.charCodeAt(0)<=90&&b.charCodeAt(0)>=65){var d=b.split("@");if(2==d.length){d[0];for(var e=0,f=0;f<d[0].length;f++)if(d[0].charCodeAt(f)<=47&&d[0].charCodeAt(f)>=32){var g=d[0].indexOf(d[0].charAt(f));if(g>0){var h=1;h+=g;var i=d[0].indexOf(d[0].charAt(f),h);i>g&&i==h&&e++}}if(0==e){var j=/^[a-zA-Z0-9_\!#$%^&*()+-]+(\.[a-zA-Z0-9_\!#$%^&*()+-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,4})$/;return""==b?($("#mandatoryUserReqField").css("display","inline"),$("#mandatoryCheckUserEmail").css("display","none"),!1):j.test(b)?($("#mandatoryCheckUserEmailExist").css("display","none"),$("#mandatoryCheckUserEmail").css("display","none"),!0):($("#mandatoryCheckUserEmailExist").css("display","none"),$("#mandatoryCheckUserEmail").css("display","inline"),$("#divMainLoader").css("display","none"),!1)}return $("#mandatoryCheckUserEmailExist").css("display","none"),$("#mandatoryCheckUserEmail").css("display","inline"),$("#divMainLoader").css("display","none"),!1}return $("#mandatoryCheckUserEmail").css("display","inline"),$("#mandatoryUserReqField").css("display","none"),$("#divMainLoader").css("display","none"),!1}if(0==$.trim(b).length){if(c==_vrUserAlternateEmailTxtBoxName)return!0;$("#mandatoryCheckUserEmail").css("display","none")}else $("#mandatoryCheckUserEmailExist").css("display","none"),$("#mandatoryCheckUserEmail").css("display","inline"),$("#divMainLoader").css("display","none")}function validateNewUserFields(){return $(".clsNewUserMandatory").each(function(){0==$.trim($(this).val()).length&&$(this).addClass("error")}),$(".error").length>0?($("#mandatoryUserReqField").css("display","inline"),$("#mandatoryCheckUserEmailExist").css("display","none"),!1):($("#mandatoryUserReqField").css("display","none"),!0)}function SubmitSaveUser(){$("#mandatoryUserReqField").val("display","none"),validateNewUserFields()&&(_vrCheckDefaultUpdate=_vrCheckUserSave,SubmitUser())}function SubmitUpdateUser(){validateNewUserFields()&&(_vrCheckDefaultUpdate=_vrCheckUserUpdate,SubmitUser())}function SubmitUser(){var a=$("#flAttachUserProfilePic").val(),b=$("#txtNewUserFirstName").val(),c=$("#txtNewUserLastName").val(),d=b+" "+c;$("#divMainLoader").css("display","block"),0!=a.length?(d=d.replace(/\"/g,"_@-").replace(/\'/g,"@_@"),d=encodeURIComponent(d),_BaseUrl=_vrLocationOrigin+"/Task/ToFilesUpload?strPicFileName="+d+"&strTokenID="+_vrUserTokenId,_vrCheckDefaultUpdate===_vrCheckUserSave?uploadFile(_BaseUrl,SubmitNewUserData,"flAttachUserProfilePic"):uploadFile(_BaseUrl,SaveExistingUserDetail,"flAttachUserProfilePic")):_vrCheckDefaultUpdate===_vrCheckUserSave?SubmitNewUserData(""):SaveExistingUserDetail("")}function SubmitNewUserData(a){var b="undefined"==typeof a.Value?"":a.Value,c=$("#txtNewUserFirstName").val(),d=$("#txtNewUserLastName").val(),e=$("#ddlNewUserRole option:selected").text(),f=$("#txtNewUserEmail").val(),g=$("#ddlNewUserRole").val(),h=$("#txtAreaNewUserPreAddr").val(),i=$("#txtNewUserContact").val(),j=$("#ddlNewUserDesignation").val(),k=$("#txtNewUserNotes").val(),l=$("#txtNewUserEmerContactNo").val(),m=$("#txtNewUserRelatnToUsr").val(),n=$("#txtNewUserDateOfBirth").val(),o=$("#ddlNewUserBloodGrp").val(),p=$("#txtNewUserDateOfJoin").val(),q=$("#txtNewUserResignDate").val(),r=$("#txtNewUserAltEmail").val(),s=$("#txtNewUserEmerContactName").val(),t=$("#chkNewUserBloodGrp").prop("checked");t=t?1:0;var u=b,v=$("#txtAreaNewUserPerAddr").val(),w=$("#chkNewUserStatus").prop("checked");w=w?1:0;var x=$("#ddlNewUserTimeZone").val();if($.trim(c).length>0&&$.trim(f).length>0&&$.trim(i).length>0&&$.trim(p).length>0&&$.trim(j).length>0){if(ValidateNewUserEmail("txtNewUserAltEmail")&&ValidateNewUserEmail("txtNewUserEmail")){$("input[type = submit]").attr("disabled",!0),$("#divMainLoader").css("display","block");var y={EmpID:_vrMagnifyUserId,EmpFirstName:c,EmpLastName:d,Role:e,EmpEmailID:f,UserRoleID:g,Address:h,Phone:i,EmpDesignationID:j,Notes:k,Emergency_Contact_No:l,Relation_to_Employee:m,Date_Of_Birth:n,Blood_Group:o,Date_Of_Joining:p,Date_Of_Resignation:q,AltrntEmailID:r,EmrgncyCntcNme:s,EmpBloodDonor:t,EmpPrflPicNme:u,EmpParmanentAddrs:v,Active:w,Timezone:x,TokenID:_vrUserTokenId};$(".info").html(_vrUserCreatedStatus),_BaseUrl=_vrLocationOrigin+"/User/InsertEmployee",ajaxCallToInsertUserObject(_BaseUrl,y),$(".info").html(_vrUserCreatedStatus)}}else if(validateNewUserFields(),$(".error").length>0)return $("#divMainLoader").css("display","none"),$("#mandatoryUserReqField").css("display","inline"),$("#mandatoryUserReqField").addClass("clsmandatoryuserreqfield"),$("#mandatoryCheckUserEmailExist").css("display","none"),!1}function ajaxCallToInsertUserObject(a,b){$.ajax({type:"POST",url:a,contentType:"application/json;charset=utf-8",data:JSON.stringify(b),processData:!1,crossDomain:!0,dataType:"json",timeout:18e3,success:function(a){if(a.ResponseId==_vrResponseId){if($("#MagnifierDialog").dialog("isOpen")===!0){var b=$("#txtNewUserFirstName").val()+" "+$("#txtNewUserLastName").val(),c=$("#txtNewUserContact").val(),d=$("#txtAreaNewUserPreAddr").val();userValueLink(_vrMagnifyUserId,b,c,d),$("#MagnifierDialog").parent().find("button").attr("disabled",!0)}if(LoadUserDataToWidget(),LoadCountDataToCustUserProjSilde(),$("#dailog").dialog("close"),_vrCustomerCreation="",showStatusDiv(),_vrMagnifyUserId==_EmpId){var e=_vrUserFirstName+" "+_vrUserLastName;$("#lblLogin").text(e),localStorage.setItem("LoggedEmpName",e)}}else a.ResponseId==_vrCheckUserResponseID&&($("#mandatoryCheckUserEmailExist").css("display","inline"),$("#mandatoryCheckUserEmailExist").addClass("clsmandatoryuserreqfield")),$("#divMainLoader").css("display","none");a.ResponseId==_vrErrResponseId&&(displayError(),$("#divMainLoader").css("display","none")),$("#MagnifierDialog").dialog("isOpen")===!1&&$("#divMainLoader").css("display","none"),$("input[type = submit]").attr("disabled",!1)},error:function(){return displayError(),$("#divMainLoader").css("display","none"),_vrCustomerCreatedStatus="",_vrFunctionalityStatus="",$("input[type = submit]").attr("disabled",!1),displayError(),!1}})}function UpdateExistingUser(){try{ResetUserFields(),$("#mandatoryUserReqField").css("display","none"),$("#mandatoryCheckUserEmail").css("display","none"),$("#mandatoryCheckUserEmailExist").css("display","none"),createNewUser(),$("#btnSaveNewUser").css("display","none"),$(".clsshowonupdate").css("display","inline-block"),$("#dailog").dialog("option","title",_vrUpdateDialogBoxUser),_vrDialogBoxTitle=_vrUpdateDialogBoxUser}catch(a){}}function checkUsersDataNBind(a){try{var b=a,c="undefined"==typeof b.EmpPrflPicNme||0==b.EmpPrflPicNme.length?_vrUploadEmpPicdefault:_vrMainWebstationPath+b.EmpPrflPicNme,d="undefined"==typeof b.EmpBloodGrp||"0"==b.EmpBloodGrp||0==$.trim(b.EmpBloodGrp).length?"0":b.EmpBloodGrp;$("#txtNewUserFirstName").val(b.EmpFirstName),$("#txtNewUserLastName").val(b.EmpLastName),$("#txtNewUserDateOfBirth").val(b.Date_Of_Birth),$("#txtNewUserEmail").val(b.EmpEmailID),$("#txtNewUserAltEmail").val(b.AltrntEmailID),$("#txtNewUserContact").val(b.Phone),$("#txtNewUserDateOfJoin").val(b.Date_Of_Joining),$("#ddlNewUserBloodGrp").val(d),$("#ddlNewUserDesignation").val(b.EmpDesignationID),$("#ddlNewUserRole").val(b.UserRoleID),(_UserRoleId==_vrClientRoleId||_UserRoleId==_vrUserRoleId)&&$("#ddlNewUserRole").attr("disabled","true"),$("#txtNewUserResignDate").val(b.Date_Of_Resignation),$("#txtAreaNewUserPreAddr").val(b.Address),$("#txtAreaNewUserPerAddr").val(b.EmpParmanentAddrs),$("#txtNewUserNotes").val(b.Notes),$("#ddlNewUserTimeZone").val(void 0==typeof b.TimeZone||0==b.TimeZone.length?_vrIndiaStandardTime:b.TimeZone),$("#txtNewUserEmerContactName").val(b.EmrgncyCntcNme),$("#txtNewUserEmerContactNo").val(b.Emergency_Contact_No),$("#txtNewUserRelatnToUsr").val(b.Relation_to_Employee),$("#txtEmpGeneratedCode").val(b.EmpGeneratedCode),$("#userProfilePicture").attr("src",c+"?timestamp="+(new Date).getTime()),_vrEmpProfilePicImage="undefined"==typeof b.EmpPrflPicNme||0==b.EmpPrflPicNme.length?"":b.EmpPrflPicNme,1==b.Active?$("#chkNewUserStatus").prop("checked",!0):$("#chkNewUserStatus").prop("checked",!1),1===b.EmpBloodDonor?$("#chkNewUserBloodGrp").prop("checked",!0):$("#chkNewUserBloodGrp").prop("checked",!1),$("#divMainLoader").css("display","none")}catch(e){$("#divMainLoader").css("display","none")}}function ResetUserFields(){$(".clsClearNewUserFields").val(""),$(".clsClearNewUserFields").removeClass("error"),$("#mandatoryCheckUserEmail").css("display","none"),$("#userProfilePicture").attr("src",_vrUploadEmpPicdefault),$("#mandatoryCheckUserEmailExist").css("display","none"),$("#mandatoryUserReqField").css("display","none"),$("#mandatoryUserNameReqField").css("display","none"),$("#mandatoryUserContactReqField").css("display","none"),$("#chkNewUserBloodGrp").prop("checked",!1),$("#chkNewUserStatus").prop("checked",!0),$("#flAttachUserProfilePic").replaceWith($("#flAttachUserProfilePic").clone())}function SaveExistingUserDetail(a){var b="undefined"==typeof a.Value?"":a.Value,c=$("#txtNewUserFirstName").val();_vrUserFirstName=c;var d=$("#txtNewUserLastName").val();_vrUserLastName=d;var e=$("#ddlNewUserRole option:selected").text(),f=$("#txtNewUserEmail").val(),g=$("#ddlNewUserRole").val(),h=$("#txtAreaNewUserPreAddr").val(),i=$("#txtNewUserContact").val(),j=$("#ddlNewUserDesignation").val(),k=$("#txtNewUserNotes").val(),l=$("#txtNewUserEmerContactNo").val(),m=$("#txtNewUserRelatnToUsr").val(),n=$("#txtNewUserDateOfBirth").val(),o=$("#ddlNewUserBloodGrp").val(),p=$("#txtNewUserDateOfJoin").val(),q=$("#txtNewUserResignDate").val(),r=$("#txtNewUserAltEmail").val(),s=$("#txtNewUserEmerContactName").val(),t=$("#chkNewUserBloodGrp").prop("checked");t=t?1:0,varEmpPrflPicNme=b.length>0?b:_vrEmpProfilePicImage;var u=$("#txtAreaNewUserPerAddr").val(),v=$("#chkNewUserStatus").prop("checked");v=v?1:0;var w=$("#ddlNewUserTimeZone").val();if($.trim(c).length>0&&$.trim(f).length>0&&$.trim(i).length>0&&$.trim(p).length>0&&$.trim(j).length>0){if(ValidateNewUserEmail("txtNewUserAltEmail")&&ValidateNewUserEmail("txtNewUserEmail")){$("#divMainLoader").css("display","block");var x={EmpID:_vrMagnifyUserId,EmpFirstName:c,EmpLastName:d,Role:e,EmpEmailID:f,UserRoleID:g,Address:h,Phone:i,EmpDesignationID:j,Notes:k,Emergency_Contact_No:l,Relation_to_Employee:m,Date_Of_Birth:n,Blood_Group:o,Date_Of_Joining:p,Date_Of_Resignation:q,AltrntEmailID:r,EmrgncyCntcNme:s,EmpBloodDonor:t,EmpPrflPicNme:varEmpPrflPicNme,EmpParmanentAddrs:u,Active:v,Timezone:w,TokenID:_vrUserTokenId};$(".info").html(_vrUserUpdatedStatus),_BaseUrl=_vrLocationOrigin+"/User/UpdateEmployee",ajaxCallToInsertUserObject(_BaseUrl,x)}}else if(validateNewUserFields(),$(".error").length>0)return $("#divMainLoader").css("display","none"),$("#mandatoryUserReqField").css("display","inline"),$("#mandatoryUserReqField").addClass("clsmandatoryuserreqfield"),!1}function ValidationForNumeric(a){a.keydown(function(a){return 8==a.which||a.which>47&&a.which<58||a.which>95&&a.which<106||9==a.which?!0:!1})}function readURL(a){if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(a){$("#userProfilePicture").attr("src",a.target.result)},b.readAsDataURL(a.files[0])
}}function bindRecordsCount(a){var b=a,c=b[0].admincount,d=b[0].userscount;c=$.trim(c).length>_vrMinTextLength?CropTextHtmlSingleElipses(c,_vrUsersSliderTextLength):c,d=$.trim(d).length>_vrMinTextLength?CropTextHtmlSingleElipses(c,_vrUsersSliderTextLength):d,$("#lblActiveCust").text(b[0].customeractivecount),$("#lblAllCust").text(b[0].customercount),$("#lblActiveProjects").text(b[0].projectactivecount),$("#lblAllProj").text(b[0].projectcount),$("#lblActiveAdmin").text(b[0].admincount),$("#lblActiveEmp").text(b[0].userscount),$("#lblActiveClients").text(b[0].customerCredcount)}function CropTextHtmlSingleElipses(a,b){if(a.length>b){var c=a.substr(0,b)+".";return c}return a}function noBack(){window.history.forward()}function initializeCommDialog(a,b,c){$("#"+a).dialog({closeOnEscape:!1,resizable:!1,modal:!0,height:c,width:b,maxWidth:1100,autoResize:!0,autoOpen:!1,draggable:!0,close:CloseMadmifyFunction,position:{my:"center center",at:"top top"},dialogClass:"dialogPosition",open:function(){$droppableEl=$(".gridster-container .gridster"),$droppableEl.droppable("disable")},beforeClose:function(){if($("#divUnderDevelopment").dialog("isOpen")===!1&&0==$("#divBugRecorddetails").dialog("isOpen")&&($(".dropdown-menu").css("display","none"),checkWidgetsAndAppend()),$("#divBugRecorddetails").dialog("isOpen")===!0)return!0;if($("#divSprintStatusalert").dialog("isOpen")===!0){if($("#ddlNewTskSprint").val(0),1==_vrEditTaskFlagSprint){$("#ddlNewTskSprint").val(_vrEditSprintID);var a=$("#ddlNewTskSprint").val();null==a&&$("#ddlNewTskSprint").val(0)}return $("#divMagnifyHdrTitle").css("display","block"),$("#divMagnifierGrid").css("display","block"),!0}return $droppableEl=$(".gridster-container .gridster"),$droppableEl.droppable("enable"),1==_vrTskOpenBugDialog&&0==_vrTskBugOpend?(_vrTskOpenBugDialog=0,$("#idTskOpenBugTrail").css("display","none"),taskLink(_vrTxtOpenBugTaskId,_vrTxtTskProjId,_vrTskSubject),$("#MagnifierDialog").dialog("close"),$(".clstasksfields").css("display","block"),$("#idBugTrail").css("display","block"),$("#divProjectsTrail").css("display","block"),!1):$("#lblMagfieldtext1").text()==_vrProjectNameLbl&&1==_vrCustDetails?(_vrCustDetCnt=1,customerValuesLink(_vrMagnifyCustId,_vrCustContName,_vrCustEmailId,_vrCustWebsiteName,_vrCustName),!1):(("Customer name"==$("#lblMagfieldtext1").text()||"Customer name"==$("#lblCompanyNametext").text())&&(null!=_vrLocalCustDataOnCustClick&&LoadPageNumForCustomer(),_vrCustDetails=0),1==_vrUserMagnifyDialog&&1==_vrUserDialogOpen?(_vrUserDialogOpen=0,openMagnifyDialogBox(_vrUserTitle,"jqxUserTrial",_vrMagnifierUserSizer),$("#MagnifierDialog").append($("#idUser")),loadJqxUserMagifyClickGrid(),!1):1==_vrProjMagnifyDialog&&1==_vrProjDialogOpen?(_vrProjDialogOpen=0,openMagnifyDialogBox(_vrProjectsTitle,"jqxProjectsGrid",_vrMagnifierProjSizer),loadJqxProjectsGrid(),$("#MagnifierDialog").append($("#divProjectsTrail")),!1):1==_vrCustMagnifyDialog&&1==_vrCustDialogOpen?(_vrCustDialogOpen=0,openMagnifyDialogBox(_vrCustomerDialogHdr,"jqxCustomerTrial",_vrMagnifierCustomerSizer),LoadPageNumForCustomer(),$("#jqxCustomerTrial").jqxGrid({width:_vrMagnifyGridWidth}),$("#MagnifierDialog").append($("#idCustomerTrail")),!1):((1==_vrProjMagnifyDialog&&0==_vrProjDialogOpen||0==_vrProjMagnifyDialog&&1==_vrProjDialogOpen)&&(_vrProjMagnifyDialog=0,_vrProjDialogOpen=0,$("#imgProjUserPref").css("display","none")),(1==_vrCustMagnifyDialog&&0==_vrCustDialogOpen||0==_vrCustMagnifyDialog&&1==_vrCustDialogOpen)&&(_vrCustMagnifyDialog=0,_vrCustDialogOpen=0),(1==_vrUserMagnifyDialog&&0==_vrUserDialogOpen||0==_vrUserMagnifyDialog&&1==_vrUserDialogOpen)&&(_vrUserMagnifyDialog=0,_vrUserDialogOpen=0),void $("#btnSubmitDelete").css("display","none")))}})}function checkBtnResizePositionInTask(a,b){0==b?a==_vrBtnTaskWidgetResize?($("#ddlTskTrailStatus").css("margin-left","20px"),$("#ddlTskTrailStatus").css("margin-top","5px"),$("#divBlnExcludeCSD").css("margin-left","36px"),b++,_vrBtnWidgetResize=b):($("#txtBugTrFromDate, #txtBugTrToDate").css("margin-left","20px"),$("#ddlBugTrEmp").css("margin-left","5px"),$("#ddlBugTrTaskName").css("margin-left","3px"),$("#ddlBugStatus").css("margin-left","18px"),$("#bugTrailCheckBox").css("margin-top","35px"),b++,_vrBtnBugTrailResize=b):a==_vrBtnTaskWidgetResize?($("#ddlTskTrailStatus").css("margin-left","0px"),$("#ddlTskTrailStatus").css("margin-top","0px"),$("#divBlnExcludeCSD").css("margin-left","14px"),b--,_vrBtnWidgetResize=b):($("#txtBugTrFromDate, #txtBugTrToDate").css("margin-left","0px"),$("#ddlBugTrEmp").css("margin-left","0px"),$("#ddlBugTrTaskName").css("margin-left","0px"),$("#ddlBugStatus").css("margin-left","0px"),$("#bugTrailCheckBox").css("margin-top","72px"),b--,_vrBtnBugTrailResize=b)}function checkWidgetsAndAppend(){try{if("0"==$(".clsusertasks .clstasksfields").length&&_vrMagnifyCloneTitle==_vrTaskTrailTitle){$(".clstasks").append($(".clstasksfields")),$("#btnNewTaskInMaginfier").css("display","none");var a=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid")).pagenum;if($("#jqxTasksgrid").jqxGrid({pagesize:_vrDefaultTaskSizer,width:_vrProjectsTasksWidth}),a>0){var b=++a*_vrMagnifierTaskSizer,c=(b/_vrDefaultTaskSizer).toFixed();c--,$("#jqxTasksgrid").jqxGrid("gotopage",c)}else $("#jqxTasksgrid").jqxGrid("gotopage",a);{JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid"))}pagerMagnifyDisplay(".clsusertasks"),checkBtnResizePositionInTask("btnResizeTasksWidget",_vrBtnWidgetResize),$("#imgTaskUserPref").css("display","none"),disableJqxPagerButtonsOnLoad("jqxTasksgrid")}else if("0"==$(".clsbugtrail #idBugTrail").length&&_vrMagnifyCloneTitle==_vrDialogBoxBugTrail){$(".clsInnerBugTrail").append($("#idBugTrail"));var d=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial")).pagenum;if($("#jqxBugTrial").jqxGrid({pagesize:_vrDefaultBugSizer,width:_vrProjectsTasksWidth}),d>0){var e=++d*_vrMagnifierBugSizer,f=(e/_vrDefaultBugSizer).toFixed();f--,$("#jqxBugTrial").jqxGrid("gotopage",f)}else $("#jqxBugTrial").jqxGrid("gotopage",d);$("#imgBTUserPref").css("display","none"),pagerMagnifyDisplay(".clsbugtrail"),checkBtnResizePositionInTask("btnResizeBugTrailWidget",_vrBtnBugTrailResize),disableJqxPagerButtonsOnLoad("jqxBugTrial")}else if(_vrMagnifyCloneTitle==_vrProjectsTitle&&"0"==$(".clsprojwidget #divProjectsTrail").length){_vrProjDefLen=_vrProjLen,$("#divProjectLoading").css("display","block"),$(".clsprojectsdetails").append($("#divProjectsTrail"));var g=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid")).pagenum;if($("#jqxProjectsGrid").jqxGrid({pagesize:_vrDefaultProjSizer,width:_vrProjectsTasksWidth}),g>0){var h=14*++g,i=(h/_vrDefaultProjSizer).toFixed();i--,$("#jqxProjectsGrid").jqxGrid("gotopage",i)}else $("#jqxProjectsGrid").jqxGrid("gotopage",g);$("#imgProjUserPref").css("display","block"),$("#divProjectLoading").css("display","none"),pagerMagnifyDisplay(".clsprojwidget"),disableJqxPagerButtonsOnLoad("jqxProjectsGrid")}else if("0"==$(".clscustomertrail #idCustomerTrail").length&&_vrMagnifyCloneTitle==_vrCustomerDialogHdr){_vrCustDefLen=_vrCustLen,$("#idCustomerLoding").css("visibility","block"),$mgnClose=$(".clsInnerCustomerTrail").append($("#idCustomerTrail"));var j=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial")).pagenum;if($("#jqxCustomerTrial").jqxGrid({pagesize:_vrDefaultCustomerSizer,width:_vrProjectsTasksWidth}),j>0){var k=++j*_vrMagnifierCustomerSizer,l=(k/_vrDefaultCustomerSizer).toFixed();l--,$("#jqxCustomerTrial").jqxGrid("gotopage",l)}else $("#jqxCustomerTrial").jqxGrid("gotopage",j);$("#imgCustUserPrefCont").css("display","none"),pagerMagnifyDisplay(".clscustomertrail"),loadJqxTasksGrid(_vrFlagData),disableJqxPagerButtonsOnLoad("jqxCustomerTrial")}else if("0"==$(".clsuser #idUser").length&&_vrMagnifyCloneTitle==_vrUserTitle){$("#divUserLoading").css("display","block"),$(".clsinneruser").append($("#idUser"));var m=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial")).pagenum;if($("#jqxUserTrial").jqxGrid({pagesize:_vrDefaultUserSizer,width:_vrProjectsTasksWidth}),m>0){var n=++m*_vrMagnifierUserSizer,o=(n/_vrDefaulUserSizer).toFixed();o--,$("#jqxUserTrial").jqxGrid("gotopage",o),$("#divUserLoading").css("display","none")}else $("#jqxUserTrial").jqxGrid("gotopage",m),$("#divUserLoading").css("display","none");$("#jqxUserTrial").jqxGrid("hidecolumn","Address"),$("#imgWidgetUserPrefContainer").css("display","none"),pagerMagnifyDisplay(".clsuser"),disableJqxPagerButtonsOnLoad("jqxUserTrial")}else if("0"==$(".clsBillingReport #idBIllingReport").length&&_vrMagnifyCloneTitle==_vrBillingReportTitle){var p=JSON.parse(localStorage.getItem("jqxGridjqxBillingReport")).pagenum;if($("#divBillingReportLoading").css("display","block"),$(".clsBillingReport").append($("#divInnerBillingReportContent")),$("#jqxBillingReport").jqxGrid({pagesize:_vrBillingGridPagerSize,width:_vrBillingReportGridWidth}),p>0){var q=++p*_vrDefaultBillingReportSizer,r=(q/_vrBillingGridPagerSize).toFixed();r--,$("#jqxBillingReport").jqxGrid("gotopage",r),$("#divBillingReportLoading").css("display","none")}else $("#jqxBillingReport").jqxGrid("gotopage",p),$("#divBillingReportLoading").css("display","none");$("#divBRUserPrefCont").css("display","none"),pagerMagnifyDisplay(".clsBillingReport"),disableJqxPagerButtonsOnLoad("jqxBillingReport")}else if("0"==$(".clsdeploy #idDeploy").length&&_vrMagnifyCloneTitle==_vrDialogDeployment){var s=JSON.parse(localStorage.getItem("jqxGridjqxDeployGrid")).pagenum;if($("#divDeployLoading").css("display","block"),$(".clsinnerdeploy").append($("#idDeploy")),$("#jqxDeployGrid").jqxGrid({pagesize:_vrDeployGridPagerSize,width:_vrProjectsTasksWidth}),$("#divDeployLoading").css("display","none"),s>0){var t=++s*_vrMagnifierDeploySizer,u=(t/_vrDeployGridPagerSize).toFixed();u--,$("#jqxDeployGrid").jqxGrid("gotopage",u)}else $("#jqxDeployGrid").jqxGrid("gotopage",s);pagerMagnifyDisplay(".clsdeploy"),$(".clsdeployfieldcontent").css("margin-left","0px"),$("#jqxDeployGrid").css("margin-left"," 0px"),$("#txtDeploySearch").css("margin-left","157px"),1==_vrBtnDeployResize?($("#txtDeploySearch").css("margin-left","15px"),$("#btnDeployResetSearch").css("margin-right","132px")):($("#btnDeployResetSearch").css("margin-right","-11px"),$(".clsdeploystatus").css("margin-left","0px")),$("#imgDeployUserPref").css("display","none"),disableJqxPagerButtonsOnLoad("jqxDeployGrid")}else"0"==$(".clsbrPoints #idShowBARInMagnify").length?($(".clsbrPoints").append($("#idShowBARInMagnify")),_vrSetWidthOfGraph=850,_vrSetHeightOfGraph=320,$("#idBARLoading").css("display","block"),loadBARData()):"0"==$(".clsquotation .clsquotetoappend").length&&($(".clsquotation").append($(".clsquotetoappend")),$("#jqxQuotationGrid").jqxGrid({pagesize:_vrQuoteGridPagerSize,width:_vrQuoteGridWidth}),bindDataToJqx("jqxQuotationGrid",_vrQuoteData,_vrQuoteWidgetColumns,_vrQuoteGridWidth),filterBasedOnQuoteStatus());$("#divUnderDevelopment").dialog("isOpen")===!1&&($("#divMagnifierGrid").css("display","none"),$("#divMagnifyHdrTitle").css("display","none"),$(".clsmagcompanyname").css("display","none"),$("#divMagnifyHdrTitle").css("height","63px"),$("#jqxPreviewGrid").jqxGrid("refreshdata"),$(".clslnkcustomercontact").css("display","none"),_vrMagnifyCloneTitle="")}catch(v){}}function CloseFunction(){if(1==_vrEditTaskDetails){if(""!=_vrattachedTask){_vrattachedTask="";var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0],e=$("#dialog").dialog("option","title");0==$("#dialog").dialog("isOpen")?$("#dialog").dialog("close"):(ViewReport(),getReports(c,d))}else if(""!=_vrEditTaskDetails&&""!=_vrattachedFiles){var e=$("#dailog").dialog("option","title");if(e==_vrSummRprtHdr||e==_vrDialogBoxProjBillSummary)_vrEditTaskDetails="",_vrattachedFiles="",_vrSummaryBillingFlag="",$("#dailog").dialog("close");else if(""!=_vrSummaryBillingFlag){_vrEditTaskDetails="",_vrattachedFiles="",_vrSuccessBillingFlag=1;var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];viewBillingSummaryReport(c,d)}else{_vrSuccessStatus=1;var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];0==$("#dialog").dialog("isOpen")?$("#dialog").dialog("close"):getReports(c,d),$("#imgedittsk").attr("value","")}}_vrEditTaskDetails="",_vrattachedFiles=""}}function initializeCommentdDialog(){$("#dailog").dialog({closeOnEscape:!1,resizable:!1,modal:!0,height:550,width:1100,maxWidth:1100,autoResize:!0,autoOpen:!1,draggable:!0,close:CloseFunction,position:{my:"center center",at:"top top"},dialogClass:"dialogPosition",open:function(){$droppableEl=$(".gridster-container .gridster"),$droppableEl.droppable("disable")},beforeClose:function(){if(1==_vrGridDeployMagnify&&(_vrGridDeployMagnify=0),1==_vrTskOpenBugDialog)return $("#MagnifierDialog").dialog("open"),$("#MagnifierDialog").dialog("option","title",_vrDialogBoxBugTrail),$(".clsdailogfields").css("display","none"),$("#idTskOpenBugTrail").css("display","block"),$(".clsTskbugtrailDates").css("display","block"),$("#MagnifierDialog").append($("#idTskOpenBugTrail")),FilterTskOpenBugTrail(),_vrTskBugOpend=0,!1;if(""!=_vrEditTaskDialog&&""!=_vrUpdatedStatus){{$("#dialog").dialog("")}_vrEditTaskDialog="";var a=$("#imgedittsk").attr("value"),b=a.split(",");return taskLink(b[0],b[1],b[2]),!1}if(_vrDialogBoxNewTask==_vrDialogBoxTitle||_vrDialogBoxTitle==_vrDialogBoxTaskTrail){if(_vrSaveExitClick==_vrSaveExitFlag)null!=_vrLocalTaskDataOnTaskClick&&(localStorage.setItem("jqxGridjqxTasksgrid",JSON.stringify(_vrLocalTaskDataOnTaskClick)),$("#jqxTasksgrid").jqxGrid("gotopage",_vrLocalTaskDataOnTaskClick.pagenum));else if($(".clstasks").length>0||$("#MagnifierDialog").dialog("isOpen")===!0){if($(".clstasks").length>0&&"1"!=_vrCloseDialog&&"0"!=_vrCloseDialog){var c=$("#ddlTaskTrailEmployee").val(),d=$("#ddlTaskTrailProject").val(),e=$("#chkFilterTasks").prop("checked");bindTasksBasedOnClientID(d,c,e,loadJqxTasksGrid),ClearNewTaskFields(),$(".clsBillingReport #idBIllingReport").length>"0"&&$(".clsBillingReport").attr("data-col")>0&&loadjqxBillingReportGrid()}$("#MagnifierDialog").dialog("isOpen")===!0&&_vrMagnifyCloneTitle==_vrProjDetDialogHdr?($("#imgMagnifydialogLoader").css("display","block"),_BaseUrl=_vrLocationOrigin+"/Task/GetInProgTasksByProjId?intProjId="+_vrSelectedProjectProjId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindInProgTasks)):$("#MagnifierDialog").dialog("isOpen")===!0&&_vrMagnifyCloneTitle==_vrDialogBoxUser&&($("#imgMagnifydialogLoader").css("display","block"),bindTasksBasedOnClientID(_vrDdlDefault,_vrMagnifyUserId,_vrBlnExcludeDefault,bindUserMagnifyGrid))}}else _vrDialogBoxBugTrail==_vrDialogBoxTitle?(deleteUploadedFile(),FilterBugTrail(),localStorage.setItem("jqxGridjqxBugTrial",JSON.stringify(_vrLocalBTDataOnBugClick)),$("#jqxBugTrial").jqxGrid("gotopage",_vrLocalBTDataOnBugClick.pagenum)):_vrDialogBoxNewProj==_vrDialogBoxTitle&&(deleteUploadedProjFile(),_VrProjFileUploading="");$droppableEl=$(".gridster-container .gridster"),$droppableEl.droppable("enable"),_vrDialogBoxTitle="",_vrFlagBrDates="0",$(".clsNewTskMandatory").each(function(){$(this).removeClass("error")}),$(".clsnewbugmandatory").each(function(){$(this).removeClass("error")}),$(".clsnewdeploymandatory").each(function(){$(this).removeClass("error")}),$(".clsprojreqfields").each(function(){$(this).removeClass("error")}),$(".clsCustomerMandatory").each(function(){$(this).removeClass("error")}),$(".clsnewBoostermandatory").each(function(){$(this).removeClass("error")}),$(".chosen-choices").each(function(){$(this).removeClass("error")}),$(".chosen-single").each(function(){$(this).removeClass("error")}),$(".chosen-default").each(function(){$(this).removeClass("error")}),$(".chosen-container").each(function(){$(this).removeClass("error")}),$(".clsNewUserMandatory").each(function(){$(this).removeClass("error")}),$(".clsquotemandatory").each(function(){$(this).removeClass("error")})}})}function ajaxCall(a,b){$(this).find("clsSpnLoading").css("display","inline-block"),$.ajax({type:"GET",url:a,contentType:"application/json;charset=utf-8",processData:!1,crossDomain:!0,dataType:"json",timeout:3e4,success:function(a){return a.ResponseId==_vrExpiredTokendIdResponse&&logOutUser(),1==a.RecordCount?(sourceGrid=a.SingleResult,"undefined"==typeof sourceGrid&&(sourceGrid=a.MultipleResults)):sourceGrid=a.MultipleResults,b(sourceGrid),!0},error:function(){return displayError(),$("#divMainLoader").css("display","none"),$(".clsSpnLoading").css("display","none"),_vrSetProjUpdateFlag=_vrClearProjUpdateFlag,!1}})}function ajaxCallWithObject(a,b,c){$.ajax({type:"POST",url:a,contentType:"application/json;charset=utf-8",data:JSON.stringify(b),processData:!1,crossDomain:!0,dataType:"json",timeout:3e4,success:function(a){a.ResponseId==_vrExpiredTokendIdResponse&&logOutUser(),a.ResponseId>=_vrResponseId&&_vrCommentCreatedFlag==_vrResponseId?($(".info").html(_vrCommentInsertStatus),_vrCommentCreatedFlag="",showStatusDiv()):_vrBugUpdateStatus==_vrFunctionalityStatus&&a.ResponseId>=_vrResponseId?($(".info").html(_vrBugUpdatedStatus),_vrFunctionalityStatus="",showStatusDiv()):_vrBugSaveStatus==_vrFunctionalityStatus&&a.ResponseId>=_vrResponseId?($(".info").html(_vrBugCreatedStatus),_vrFunctionalityStatus="",showStatusDiv()):a.ResponseId>=_vrResponseId&&_vrTaskCreation==_vrResponseId?($(".info").html(_vrTskCreatedStatus),_vrTaskCreation="",showStatusDiv()):a.ResponseId>=_vrResponseId&&_vrProjCreationStatus==_vrResponseId?($(".info").html(_vrProjDataStatus),_vrProjCreationStatus="",_vrProjDataStatus="",showStatusDiv(),LoadCountDataToCustUserProjSilde()):a.ResponseId==_vrErrResponseId?$("input[type = submit]").attr("disabled",!1):a.ResponseId==_vrResponseId&&_vrDepInsertStatus==_vrDeployStatusId?($(".info").html(_vrDeployInsertSucess),$("#dailog").dialog("close"),$("#divMainLoader").css("display","none"),$("input[type = submit]").attr("disabled",!1),showStatusDiv(),_vrDeployStatusId="",LoadDeploymentCountDetails()):_vrDepUpdateStatus==_vrDeployStatusId&&($(".info").html(_vrDeployUpdateSucess),$("#divMainLoader").css("display","none"),$("#dailog").dialog("close"),$("input[type = submit]").attr("disabled",!1),showStatusDiv(),_vrDeployStatusId="",LoadDeploymentCountDetails()),c(a)},error:function(){return displayError(),$("#divMainLoader").css("display","none"),$(".clsSpnLoading").css("display","none"),_vrCommentCreatedFlag="",_vrFunctionalityStatus="",$("input[type = submit]").attr("disabled",!1),!1}})}function ajaxCallBindDropDown(a,b,c){$.ajax({type:"GET",url:_BaseUrl,contentType:"application/json;charset=utf-8",processData:!1,crossDomain:!0,dataType:"json",timeout:3e4,success:function(a){return a.ResponseId==_vrExpiredTokendIdResponse&&logOutUser(),1==a.RecordCount?(sourceGrid=a.SingleResult,"undefined"==typeof sourceGrid&&(sourceGrid=a.MultipleResults)):sourceGrid=a.MultipleResults,b(sourceGrid,c),!0},error:function(){return displayError(),!1}})}function SetDataToDrpdwnFields(a,b){if(0!=$.trim(a).length&&b==_vrFlagTskCustomer){var c=checkDropdownValues("ddlNewTskCustomer",a[0].CustomerID);$("#ddlNewTskCustomer").val(c>0?c:""),c>0&&(_BaseUrl=_vrLocationOrigin+"/project/GetProjectNames?intID="+a[0].CustomerID+"&strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskProject),$("#ddlNewTskSprint").empty(),$("#ddlNewTskSprint").append("<option value='0'>Select sprint</option>"),0!=a[0].SprintID&&bindSprintDataToDropDown(a,"ddlNewTskSprint"))}}function bindSprintDataToDropDown(a,b){_vrGetBacklogID=0;for(var c=0;c<a.length;c++)$("#"+b).append("<option  value='"+a[c].SprintID+"'>"+a[c].SprintName+" </option>"),$.trim(a[c].SprintName).toLowerCase()===_vrbacklog&&(_vrGetBacklogID=a[c].SprintID)}function bindFieldsToDropdown(a,b){if(0==$.trim(a).length&&b==_vrFlagTskCustomer)return void $("#ddlNewTskCustomer").append("<option value=''>Select customer</option>");if(0!=$.trim(a).length){if(b==_vrFlagPriority)$("#ddlNewTskPriority").empty(),bindDataToDropDown(a,"ddlNewTskPriority","PriorityID","PriorityType");else if(b==_vrFlagNewBugTrTask)$("#ddlNewBugTask").empty(),$("#ddlNewBugTask").append("<option value='0'>Select task</option>"),bindDataToDropDown(a,"ddlNewBugTask","TaskID","TaskName"),$("#ddlNewBugTask").removeClass("error");else if(b==_vrFlagTskCustomer)$("#ddlNewTskCustomer").empty(),$("#ddlNewTskCustomer").append("<option value=''>Select customer</option>"),bindDataToDropDown(a,"ddlNewTskCustomer","CustomerID","CustomerCompanyName"),""!=_vrProjectIDedit&&$("#ddlNewTskCustomer").val(_vrEditCustomerID),0!=_ddlTaskTrailProject&&(_BaseUrl=_vrLocationOrigin+"/Customer/GetProjectBasedCustomers?strProjectID="+_ddlTaskTrailProject+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,SetDataToDrpdwnFields,_vrFlagTskCustomer));else if(b==_vrFlagTskProject)if($("#ddlNewTskProject").empty(),$("#ddlNewTskProject").append("<option value=''>Select project</option>"),bindDataToDropDown(a,"ddlNewTskProject","ProjectID","ProjectName"),""!=_vrProjectIDedit)""==_vrEditStatusReport&&($("#ddlNewTskProject").val(_vrProjectIDedit),GetProjectRelatedSprintDetails(),$("#ddlNewTskProject").removeClass("error"),$("#errNewTskError").css("display","none"),$("#ddlNewTskProject").trigger("change"));else if(0!=_ddlTaskTrailProject){$("#ddlNewTskProject").val(_ddlTaskTrailProject);var c=checkDropdownValues("ddlNewTskProject",_ddlTaskTrailProject);c>0?$("#ddlNewTskProject").trigger("change"):($("#ddlNewTskSprint").empty(),$("#ddlNewTskSprint").append("<option value='0'>Select sprint</option>"),$("#ddlNewTskProject").val(""),$("#ddlNewTskSprint").val(0))}else $("#ddlNewTskProject").val("");else if(b==_vrFlagTskModules){var d=a[0].LstProjectEmployees,e=a[0].LstOtherEmployees,f=a[0].LstModules[0].ModuleName;_vrProjVersionNum=a[0].LstModules[0].VersionNumber,$("#ddlNewTskModule").empty(),$("#ddlNewTskAssignTo").empty(),$("#ddlNewTskInformTo").empty(),$("#ddlNewTskOwner").empty(),$("#ddlNewTskAssignTo").append("<option value=''>Select assign to</option>"),$("#ddlNewTskInformTo").append("<option value='' text=''>Select inform to</option>"),$("#ddlNewTskModule").append("<option value=''>Select module</option>"),bindOptGroup(d,"ddlNewTskAssignTo","ddlNewTskInformTo","ddlNewTskOwner","Project Members","EmpID","EmpFirstName"),_UserRoleId!=_vrClientRoleId&&bindOptGroup(e,"ddlNewTskAssignTo","ddlNewTskInformTo","ddlNewTskOwner","Other Members","EmpID","EmpFirstName"),$("#ddlNewTskOwner").val(""!=_vrTaskOwnerID?_vrTaskOwnerID:_EmpId),bindArrayToDropDown(f,"ddlNewTskModule")}else if(b==_vrFlagTaskCategory)bindDataToDropDown(a,"ddlNewTskCategory","TaskCategoryID","TaskCategoryType"),$("#ddlNewTskCategory").val(_vrDefaultTskCatogery);else if(b==_vrFlagNewBugTrTask)$("#ddlNewBugTask").empty(),$("#ddlNewBugTask").append("<option value='0'>Select task</option>"),bindDataToDropDown(a,"ddlNewBugTask","TaskID","TaskName"),$("#ddlNewBugTask").removeClass("error");else if(b==_vrReportEmp){$("#ddlEmployee").empty(),$("#ddlEmployee").append("<option value='0'>Select employee</option>"),$("#ddlEmployee").attr("title","Select employee"),bindDataToDropDown(a,"ddlEmployee","EmpID","EmpFirstName");var g=$("#ddlEmployee  option:selected").text();$("#ddlEmployee").attr("title",g),1!=vrLoginRoleId&&$("#ddlEmployee").val(_EmpId)}else if(b==_vrUserReports){$("#ddlReports").empty(),bindToReportsddl(a[0].ReportTypes,"ddlReports");var g=$("#ddlReports  option:selected").text();$("#ddlReports").attr("title",g),$("#ddlReports").val(6)}else if(b==_vrFlagTskModules){var d=a[0].LstProjectEmployees,e=a[0].LstOtherEmployees,f=a[0].LstModules[0].ModuleName;_vrProjVersionNum=a[0].LstModules[0].VersionNumber,$("#ddlNewTskModule").empty(),$("#ddlNewTskAssignTo").empty(),$("#ddlNewTskInformTo").empty(),$("#ddlNewTskOwner").empty(),$("#ddlNewTskAssignTo").append("<option value=''>Select assign to</option>"),$("#ddlNewTskInformTo").append("<option value='' text=''>Select inform to</option>"),$("#ddlNewTskModule").append("<option value=''>Select module</option>"),bindOptGroup(d,"ddlNewTskAssignTo","ddlNewTskInformTo","ddlNewTskOwner","Project Members","EmpID","EmpFirstName"),_UserRoleId!=_vrClientRoleId&&bindOptGroup(e,"ddlNewTskAssignTo","ddlNewTskInformTo","ddlNewTskOwner","Other Members","EmpID","EmpFirstName"),$("#ddlNewTskOwner").val(_EmpId),bindArrayToDropDown(f,"ddlNewTskModule")}else if(b==_vrFlagLoadBugTrEmp){$("#ddlBugTrEmp").empty(),$("#ddlTaskTrailEmployee").empty(),$("#ddlTskOpenBugTrEmp").empty(),$("#ddlBugTrEmp").append("<option value='0'>Select created by</option>"),$("#ddlTaskTrailEmployee").append("<option value='0'>Select employee</option>"),$("#ddlTskOpenBugTrEmp").append("<option value='0'>Select created by</option>"),bindDataToDropDown(a,"ddlBugTrEmp","EmpID","EmpFirstName"),bindDataToDropDown(a,"ddlTaskTrailEmployee","EmpID","EmpFirstName"),bindDataToDropDown(a,"ddlTskOpenBugTrEmp","EmpID","EmpFirstName"),$("#ddlTaskTrailEmployee").val(_EmpId),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager&&$("#ddlTaskTrailEmployee").prop("disabled",!0);var g=$("#ddlTaskTrailEmployee  option:selected").text();$("#ddlTaskTrailEmployee").attr("title",g)}else if(b==_vrTskOpenBugsEmp){$("#ddlTskOpenBugTrEmp").empty(),$("#ddlTskOpenBugTrEmp").append("<option value='0'>Select created by</option>"),bindDataToDropDown(a,"ddlTskOpenBugTrEmp","EmpID","EmpFirstName");var g=$("#ddlTskOpenBugTrEmp  option:selected").text();$("#ddlTskOpenBugTrEmp").attr("title",g)}else if(b==_vrTskOpenBugsTaskStatus)$("#ddlTskOpenBugStatus").empty(),$("#ddlTskOpenBugStatus").append("<option value='0'>Select status</option>"),bindDataToDropDown(a[0].LstStatus,"ddlTskOpenBugStatus","BugStatusID","BugStatusType"),$("#ddlTskOpenBugStatus").val(1);else if(b==_vrFlagBugStatus){var h=a[0].LstBrowser;if(_vrBugStatus=a[0].LstStatus,$("#ddlBugStatus").empty(),$("#ddlBugStatus").append("<option value='0'>Select status</option>"),bindDataToDropDown(a[0].LstStatus,"ddlBugStatus","BugStatusID","BugStatusType"),_vrWidgetCOntrolData.length>0&&_BTIndexNO>-1){var i=parseInt(_vrWidgetCOntrolData[_BTIndexNO].ddlBugStatus);i>0&&0/0!=i&&$("#ddlBugStatus").val(i)}0==_varcheckDragDrop&&$("#ddlCreateBugBrowser").append("<option value=''>Select browser</option>"),0!=_vrFlagBindDataToDdl.length&&(bindDataToDropDown(a[0].LstSeverity,"ddlNewBugSeverity","SeverityID","SeverityType"),bindDataToDropDown(a[0].LstReproducilble,"ddlNewBugReproducible","BugReproducibleID","BugReproducibleType"),bindDataToDropDown(a[0].LstStatus,"ddlNewBugStatus","BugStatusID","BugStatusType"),bindDataToDropDown(a[0].LstType,"ddlNewBugType","BugTypeID","BugType"),bindDataToDropDown(a[0].LstPriority,"ddlNewBugPriority","BugPriorityID","BugPriorityType"),bindArrayToBrowser(h,"ddlCreateBugBrowser"),_vrBugStatus=a[0].LstStatus,_vrFlagBindDataToDdl="",_varcheckDragDrop++)}else if(b==_vrTskOpenBugsTsk)$("#ddlTskOPenBugTrTaskName").empty(),$("#ddlTskOPenBugTrTaskName").append("<option value='0'>Select task</option>"),bindDataToDropDown(a,"ddlTskOPenBugTrTaskName","TaskID","TaskName"),$("#ddlTskOPenBugTrTaskName").val(_vrTxtTskId),_vrTxtTskId=0;else if(b==_vrFlagBugTrTask){if($("#ddlBugTrTaskName").empty(),$("#ddlBugTrTaskName").append("<option value='0'>Select task</option>"),$("#ddlBugTrTaskName option").css("width","130px"),bindDataToDropDown(a,"ddlBugTrTaskName","TaskID","TaskName"),_BTIndexNO>-1){var j=_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrTaskName;parseInt(j)>=0&&0/0!=parseInt(j)&&$("#ddlBugTrTaskName").val(j)}}else if(b==_vrFlagBugTrProject)$("#ddlBugTrProject").empty(),$("#ddlBugProjectName").empty(),$("#ddlTaskTrailProject").empty(),$("#ddlTskOpenBugTrProject").empty(),$("#ddlBugTrProject").append("<option value='0' title='Select project' >Select project</option>"),$("#ddlBugProjectName").append("<option value='0'>Select project</option>"),$("#ddlTaskTrailProject").append("<option value='0'>Select project</option>"),$("#ddlTskOpenBugTrProject").append("<option value='0'>Select project</option>"),bindDataToDropDown(a,"ddlBugTrProject","ProjectID","ProjectName"),bindDataToDropDown(a,"ddlBugProjectName","ProjectID","ProjectName"),bindDataToDropDown(a,"ddlTaskTrailProject","ProjectID","ProjectName"),bindDataToDropDown(a,"ddlTskOpenBugTrProject","ProjectID","ProjectName"),$("#divErrNewBug").css("display","none");else if(b==_vrFlagNewBugFields)$("#btnUpdateBug").attr("disabled",!1),$("#divErrNewBug").css("display","none"),$("#ddlNewBugTask").empty(),$("#ddlNewBugTask").append("<option value='0'>Select task</option>"),bindDataToDropDown(a,"ddlNewBugTask","TaskID","TaskName"),$("#ddlNewBugTask").val(_vrExistingBugTaskId),$("#ddlNewBugTask").removeClass("error"),$("#ddlBugProjectName").removeClass("error");else if(b==_vrFlagBugProj){if($("#ddlBugTrProject").empty(),$("#ddlBugTrProject").append("<option value='0'>Select project</option>"),bindDataToDropDown(a,"ddlBugTrProject","ProjectID","ProjectName"),_BTIndexNO>-1){var k=_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrProject;parseInt(k)>=0&&0/0!=parseInt(k)&&($("#ddlBugTrProject").val(k),k>0&&AjaxCallToGetProjectDataBasedOnProjectID(k,_vrFlagBugTrTask))}}else if(b==_vrFlagBugEmp){if($("#ddlBugTrEmp").empty(),$("#ddlBugTrEmp").append("<option value='0'>Select created by</option>"),bindDataToDropDown(a,"ddlBugTrEmp","EmpID","EmpFirstName"),_BTIndexNO>-1){var l=_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrEmp;parseInt(l)>=0&&0/0!=parseInt(l)&&$("#ddlBugTrEmp").val(l)}$("#txtBugTrToDate").datepicker("setDate",new Date),$("#txtBugTrFromDate").datepicker("setDate",-14);var m=$("#txtBugTrFromDate").val();$("#txtBugTrToDate").datepicker("option","minDate",m),_vrWidgetCOntrolData.length>0&&_BTIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_BTIndexNO]).length>0&&($("#txtBugTrFromDate").datepicker("setDate",_vrWidgetCOntrolData[_BTIndexNO].txtBugTrFromDate),$("#txtBugTrToDate").datepicker("option","minDate",_vrWidgetCOntrolData[_BTIndexNO].txtBugTrFromDate),$("#txtBugTrToDate").datepicker("setDate",_vrWidgetCOntrolData[_BTIndexNO].txtBugTrToDate))}else if(b==_vrFlagTaskProj){if($("#ddlTaskTrailProject").empty(),$("#ddlTaskTrailProject").append("<option value='0'>Select project</option>"),bindDataToDropDown(a,"ddlTaskTrailProject","ProjectID","ProjectName"),_taskIndexNO>-1){var k=_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailProject;parseInt(k)>=0&&0/0!=parseInt(k)&&$("#ddlTaskTrailProject").val(k)}}else if(b==_vrFlagTaskEmp){if($("#ddlTaskTrailEmployee").empty(),$("#ddlTaskTrailEmployee").append("<option value='0'>Select employee</option>"),bindDataToDropDown(a,"ddlTaskTrailEmployee","EmpID","EmpFirstName"),_taskIndexNO>-1){var l=_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailEmployee;parseInt(l)>=0&&0/0!=parseInt(l)&&$("#ddlTaskTrailEmployee").val(l)}else $("#ddlTaskTrailEmployee").val(_EmpId);if(_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager){$("#ddlTaskTrailEmployee").prop("disabled",!0);var g=$("#ddlTaskTrailEmployee  option:selected").text();$("#ddlTaskTrailEmployee").attr("title",g)}}else if(b==_vrFlagBindStatusRole){var a=a[0].Status;if(bindArrayToCustomerDropDown(a,"ddlCustomerProject"),-1!=_custIndexNO){var n=_vrWidgetCOntrolData[_custIndexNO].ddlCustomerProject;$("#ddlCustomerProject").val(n);var o=_vrWidgetCOntrolData[_custIndexNO].idSearchCustomer;o.length>0&&($("#idSearchCustomer").val(o),filterCustomerTrStatus())}}else if(b==_vrFlagBindStatusRoleUser){var a=a[0].Status;if(bindArrayToCustomerDropDown(a,"ddlUserstatus"),-1!=_userIndexNO){var n=_vrWidgetCOntrolData[_userIndexNO].ddlUserstatus;$("#ddlUserstatus").val(n);var o=_vrWidgetCOntrolData[_userIndexNO].txtUserSearch;o.length>0&&($("#txtUserSearch").val(o),SearchUser())}}else if(b==_vrFlagNewUserRole){var a=a;bindDataToDropDown(a[0].GetRoles,"ddlNewUserRole","UserRoleID","UserRole"),$("#ddlNewUserDesignation").append("<option value=''>Select designation</option>"),bindDataToDropDown(a[0].GetDesignations,"ddlNewUserDesignation","EmpDesignationID","EmpDesignationName"),$("#ddlNewUserBloodGrp").append("<option value='0'>Select group</option>"),bindDataToDropDown(a[0].GetBloodGroups,"ddlNewUserBloodGrp","BloodGroupID","BloodGroupType"),bindDataToDropDown(a[0].GetTimeZones,"ddlNewUserTimeZone","StandardName","DisplayName"),$("#ddlNewUserTimeZone").val(_vrIndiaStandardTime),$("#ddlNewUserRole").val(_VrDefaultUserRole),_vrEditUserProfile==_vrUserEditProfileDefault?(_BaseUrl=_vrLocationOrigin+"/user/GetIndividualEmployeeData?intEmpID="+_vrMagnifyUserId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,checkUsersDataNBind)):$("#divMainLoader").css("display","none")
}else if(b==_vrFlagBindCountrys){var a=a;a.sort(function(a,b){return $.trim(a.CountryName).localeCompare($.trim(b.CountryName))}),$("#ddlCountryList").append("<option value=''>Select country</option>"),bindDataToDropDown(a,"ddlCountryList","CountryId","CountryName")}else if(b==_vrFlagBindUpdatedCountrys){var a=a;$("#ddlCountryList").append("<option value=''>Select country</option>"),bindDataToDropDown(a,"ddlCountryList","CountryId","CountryName"),_BaseUrl=_vrLocationOrigin+"/customer/getcustomerdata?strTokenID="+_vrUserTokenId,ajaxCallWithObject(_BaseUrl,objCustomerDetailsMagnify,UpdateFunction)}else if(b==_vrFlagBIllingReportBindProjects){if($("#ddlBillingRprtProjectName").empty(),$("#ddlBillingRprtProjectName").append("<option value='0'>Select project</option>"),bindDataToDropDown(a,"ddlBillingRprtProjectName","ProjectID","ProjectName"),_BRIndexNO>-1){var k=_vrWidgetCOntrolData[_BRIndexNO].ddlBillingRprtProjectName;parseInt(k)>=0&&0/0!=parseInt(k)&&$("#ddlBillingRprtProjectName").val(k)}}else if(b==_vrFlagBIllingReportBindEmployees){if($("#ddlBillingRprtEmpName").empty(),$("#ddlBillingRprtEmpName").append("<option value='0'>Select employee</option>"),bindDataToDropDown(a,"ddlBillingRprtEmpName","EmpID","EmpFirstName"),_BRIndexNO>-1){var l=_vrWidgetCOntrolData[_BRIndexNO].ddlBillingRprtEmpName;parseInt(l)>=0&&0/0!=parseInt(l)&&$("#ddlBillingRprtEmpName").val(l)}else $("#ddlBillingRprtEmpName").val(_EmpId);if(_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager){$("#ddlBillingRprtEmpName").prop("disabled",!0);var p=$("#ddlBillingRprtEmpName  option:selected").text();$("#ddlBillingRprtEmpName").attr("title",p)}}else if(b==_vrGetProjFields){var a=a[0];$("#ddlReleaseDate").empty(),$("#ddlNewProjManager").append("<option value='' text=''>Select project manager</option>"),$("#ddlNewProjTechnology").append("<option value='' text=''>Select technology</option>"),$("#ddlNewCustomer").append("<option value='' text=''>Select customer</option>"),bindDataToDropDown(a.LstCustomers,"ddlNewCustomer","CustomerID","CompanyName"),bindDataAlongWithTextDdlAndConvertInverted(a.LstProjGetActiveEmp,"ddlNewProjManager","EmpID","EmpFirstName"),bindDataToDropDown(a.LstProjPriority,"ddlNewProjPriority","PriorityID","PriorityType"),bindDataToDropDown(a.LstProjTechnologies,"ddlNewProjTechnology","TechnologyID","TechnologyName"),bindArrayToBrowser(a.LstProjReleaseVersion,"ddlReleaseDate"),_vrGetInfrmUpdCount=a.LstProjGetActiveEmp.length,$("#JqxWidget").jqxDropDownList({checkboxes:!0,source:a.LstProjGetActiveEmp,displayMember:"EmpFirstName",valueMember:"EmpID",width:303,height:25}),$("#JqxWidget").jqxDropDownList("insertAt","Select all",0),$("#JqxWidget").jqxDropDownList("setContent","Select employees");var q=$("#JqxWidget").jqxDropDownList("getItems");$("#JqxWidget").on("checkChange",function(a){var b=a.args.item;if("Select all"==a.args.label&&1==b.checked){for(var c="",d=1;d<q.length;d++)$("#JqxWidget").jqxDropDownList("checkIndex",d),c+=q[d].label+",";$("#JqxWidget").jqxDropDownList("setContent",c)}else if("Select all"==a.args.label&&0==b.checked)for(var d=1;d<q.length;d++)$("#JqxWidget").jqxDropDownList("uncheckIndex",d);if(b&&"Select all"!=a.args.label){var e=$("#JqxWidget").jqxDropDownList("getCheckedItems"),f="";$.each(e,function(){$.trim(f).length>0&&(f+=", "),"Select all"==this.label?returnStatus=!1:f+=this.label}),$("#txtSelectedEmp").val(f),$("#txtSelectedEmp").prop("title",f),$("#dropdownlistContentJqxWidget").attr("title",f)}})}else if(b==_vrFlagBindUpdatedCountrys){var a=a;$("#ddlCountryList").append("<option value=''>Select country</option>"),bindDataToDropDown(a,"ddlCountryList","CountryId","CountryName"),_BaseUrl=_vrLocationOrigin+"/customer/getcustomerdata?strTokenID="+_vrUserTokenId,ajaxCallWithObject(_BaseUrl,objCustomerDetailsMagnify,UpdateFunction)}else if(b==_vrReportProjects)_vrattachedTask="",$("#ddlReportPoj").empty(),$("#ddlReportPoj").append("<option value='0'>Select project</option>"),bindDataToDropDown(a,"ddlReportPoj","ProjectID","ProjectName");else if(b==_vrFlagTaskNewTaskSprintName){var a=a;if($("#ddlNewTskSprint").empty(),bindSprintDataToTaskDropDown(a,"ddlNewTskSprint"),""!==_vrProjectIDedit){$("#ddlNewTskSprint").val(_vrEditSprintID);var r=$("#ddlNewTskSprint").val();null==r&&$("#ddlNewTskSprint").val(0)}if(parseInt(_ddlTaskTrailProject)>0)if(parseInt(_ddlTaskTrailSprint)>0){var c=checkDropdownValues("ddlNewTskSprint",_ddlTaskTrailSprint);c>0&&$("#ddlNewTskSprint").val(_ddlTaskTrailSprint);var s=$("#ddlNewTskSprint option:selected").data("status");0==s&&($("#divSprintStatusalert").dialog("option","title","Sprint status"),$(".clsremainingfields").html(_vrFreezeSprintStatus),$("#divSprintStatusalert").dialog("open"),$("#divSprintStatusalert").dialog("widget").effect("shake",{times:2},200))}else if(parseInt(_vrGetBacklogID)>0){$("#ddlNewTskSprint").val(_vrGetBacklogID);var s=$("#ddlNewTskSprint option:selected").data("status");0==s&&($("#divSprintStatusalert").dialog("option","title","Sprint status"),$(".clsremainingfields").html(_vrFreezeSprintStatus),$("#divSprintStatusalert").dialog("open"),$("#divSprintStatusalert").dialog("widget").effect("shake",{times:2},200))}else $("#ddlNewTskSprint").val(0)}else if(b==_vrFlagTaskWidgetSprintName){if($("#ddlTaskTrailSprint").empty(),bindSprintDataToTaskDropDown(a,"ddlTaskTrailSprint"),_taskIndexNO>-1){var t=_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailSprint;parseInt(t)>=0&&0/0!=t&&$("#ddlTaskTrailSprint").val(t)}}else b==_vrFlagActiveEmployees?($("#ddlEmployeeName").empty().trigger("chosen:updated"),bindDataToDropDown(a,"ddlEmployeeName","EmpID","EmpFirstName"),$("#ddlEmployeeName").chosen(),$("#ddlEmployeeName").trigger("chosen:updated")):b==_vrFlagBrActiveEmployees?bindDataToDropDown(a,"ddlFltrEmployeeName","EmpID","EmpFirstName"):b==_vrFlagCategory?($("#ddlCatergory").empty(),$("#ddlCatergory").append("<option value='0'>Select category</option>"),$("#ddlSubCatergory").empty(),$("#ddlSubCatergory").append("<option value='0'>Select subcategory</option>"),$(".clsbrtxtfields").val(""),$("#lblFrequency").html(""),$("#ddlEmployeeName").trigger("chosen:updated"),bindDataToDropDown(a,"ddlCatergory","CategoryID","CategoryName")):b==_vrFlagSubCategory&&($("#ddlSubCatergory").empty(),$(".clsbrtxtfields").val(""),$("#lblFrequency").html(""),$("#ddlSubCatergory").append("<option value='0'>Select subcategory</option>"),bindDataToDropDown(a,"ddlSubCatergory","SubCategoryID","Description"),pushDatatoArray(a),$("#ddlEmployeeName").trigger("chosen:updated"));if(_vrSetProjUpdateFlag==_vrGetProjDataById?(_BaseUrl=_vrLocationOrigin+"/Project/GetProjDetailsByProjId?intProjId="+_vrSelectedProjectProjId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindProjectData),_vrSetProjUpdateFlag=_vrClearProjUpdateFlag):$("#divMainLoader").css("display","none"),b==_vrFlagDeployProject)$("#ddldeploymentProject").empty(),$("#ddldeploymentProject").append("<option value='0' title='Select project' >Select project</option>"),bindDataToDropDown(a,"ddldeploymentProject","ProjectID","ProjectName"),0!=_vrCheklistProjectId&&$("#ddldeploymentProject").val(parseInt(_vrCheklistProjectId)),$("#ddldeploymentProject").chosen(),$("#ddldeploymentProject").trigger("chosen:updated"),0!=_vrCheklistProjectId&&$("#ddldeploymentProject").change();else if(b==_vrFlagDeployTask){$("#ddldeploymentTask").empty(),bindDataToDropDown(a,"ddldeploymentTask","TaskID","TaskName");var u="";$.trim(_vrSelTaskNames).length>0&&(u=_vrSelTaskNames.split(",")),$("#ddldeploymentTask").chosen(),$.each(u,function(a,b){$("#ddldeploymentTask").append($("<option></option").val(b).html(b)),$("#ddldeploymentTask option:contains("+b+")").attr("selected","selected").trigger("chosen:updated")}),$("#ddldeploymentTask").trigger("chosen:updated"),$("#ddlAssTaskList").empty(),bindDataToDropDown(a,"ddlAssTaskList","TaskID","TaskName");var v="";$.trim(_vrTaskChosenTaskName).length>0&&(v=_vrTaskChosenTaskName.split(",")),$("#ddlAssTaskList").chosen(),$.each(v,function(a,b){$("#ddlAssTaskList").append($("<option></option").val(b).html(b)),$("#ddlAssTaskList option:contains("+b+")").attr("selected","selected").trigger("chosen:updated")}),$("#ddlAssTaskList").trigger("chosen:updated")}else if(b==_vrFlagDeployApplication)$("#ddldeploymentApplication").empty(),$("#ddldeploymentApplication").append("<option value='0' title='Select application' >Select application</option>"),bindDataToDropDown(a,"ddldeploymentApplication","CheckListAppID","ApplicationName"),$("#ddldeploymentApplication").val(_vrChecklistAppID),$("#ddldeploymentApplication").chosen(),$("#ddldeploymentApplication").trigger("chosen:updated"),0!=_vrChecklistAppID&&$("#ddldeploymentApplication").change();else if(b==_vrFlagActiveEmployees)bindDataToDropDown(a,"ddlEmployeeName","EmpID","EmpFirstName"),$("#ddlEmployeeName").chosen();else if(b==_vrFlagTaskAssociate)$("#ddlAssTask").empty(),$("#ddlAssTask").append("<option value='0'>Select task</option>"),bindAssTaskDataToTaskDropDownTaskDetails(a,"ddlAssTask","TaskID","TaskName");else if(b==_vrFlagTaskListAssociate){$("#ddlAssTaskList").empty(),bindDataToDropDown(a,"ddlAssTaskList","TaskID","TaskName");var v="";$.trim(_vrTaskChosenTaskName).length>0&&(v=_vrTaskChosenTaskName.split(",")),$("#ddlAssTaskList").chosen(),v.length>0&&$("#ddlAssTaskList").val(v).text(),$("#ddlAssTaskList").trigger("chosen:updated")}}}function bindSprintDataToTaskDropDown(a,b){$("#"+b).append("<option value='0'>Select sprint</option>");for(var c=0;c<a.length;c++)$("#"+b).append("<option  value="+a[c].ID+">"+a[c].Name+" </option>"),$("#ddldeploymentApplication").append("<option value='0' title='Select Application' >Select Application</option>"),bindDataToDropDown(a,"ddldeploymentApplication","CheckListAppID","ApplicationName"),$("#ddldeploymentApplication").chosen(),$("#ddldeploymentApplication").trigger("chosen:updated")}function bindDataToDropDown(a,b,c,d){$.each(a,function(a,e){$("#"+b).append('<option value="'+e[c]+'" text="'+$.trim(convertDoubleInvertedtoCode(e[d]))+'">'+$.trim(e[d])+"</option>")})}function bindArrayToDropDown(a,b){if(0!=$.trim(a).length){for(var c=a.split(","),d=0;d<c.length;d++)c[d].length>0&&$("#"+b).append("<option value='"+c[d]+"'>"+c[d]+"</option>");if(""!=_vrProjectIDedit){if($("#ddlNewTskAssignTo").val(_vrEditAssignedTo),$("#ddlNewTskAssignTo").removeClass("error"),$("#errNewTskError").css("display","none"),$("#ddlNewTskModule").val(_vrEditModuleName),$("#ddlNewTskSprint").val(_vrEditSprintID),$("#ddlNewTskModule").val(_vrEditModuleName),_vrEditInformTo.indexOf(",")>-1){var e=getInformPersonNames("ddlNewTskInformTo",_vrEditInformTo);$("#txtNewTskInformTo").val(e)}else if(""!=_vrEditInformTo.length){var e=getInformPersonNames("ddlNewTskInformTo",_vrEditInformTo);$("#txtNewTskInformTo").val(e)}$("#ddlNewTskInformTo").val("")}}else if(""!=_vrProjectIDedit){if($("#ddlNewTskAssignTo").val(_vrEditAssignedTo),$("#ddlNewTskAssignTo").removeClass("error"),$("#errNewTskError").css("display","none"),$("#ddlNewTskModule").val(_vrEditModuleName),$("#ddlNewTskSprint").val(_vrEditSprintID),$("#ddlNewTskModule").val(_vrEditModuleName),_vrEditInformTo.indexOf(",")>-1){var e=getInformPersonNames("ddlNewTskInformTo",_vrEditInformTo);$("#txtNewTskInformTo").val(e)}else if(""!=_vrEditInformTo.length){var e=getInformPersonNames("ddlNewTskInformTo",_vrEditInformTo);$("#txtNewTskInformTo").val(e)}$("#ddlNewTskInformTo").val("")}}function bindSprintDataToTaskDropDown(a,b){if($("#"+b).append("<option value='0'>Select sprint</option>"),"ddlNewTskSprint"==b){var c=a;a=jQuery.grep(c,function(a){return 0===a.Status||1===a.Status})}for(var d=0;d<a.length;d++)$("#"+b).append("<option value='"+a[d].ID+"'data-status='"+a[d].Status+"' >"+a[d].Name+" </option>")}function bindAssTaskDataToTaskDropDown(a,b){for(var c=0;c<a.length;c++)$("#"+b).append("<option  value='"+a[c].TaskID+"' text='"+a[c].TaskName+"'data-TaskProjectID='"+a[c].TaskProjectID+"'>"+a[c].TaskName+" </option>")}function bindAssTaskDataToTaskDropDownTaskDetails(a,b){for(var c=0;c<a.length;c++){{a[c].TaskName}if(a[c].TaskName.length>50){var d=a[c].TaskName.substr(0,50)+"...";$("#"+b).append("<option  title='"+a[c].TaskName+"'value='"+a[c].TaskID+"' text='"+a[c].TaskName+"'data-TaskProjectID='"+a[c].TaskProjectID+"'>"+d+" </option>")}else $("#"+b).append("<option  value='"+a[c].TaskID+"' text='"+a[c].TaskName+"'data-TaskProjectID='"+a[c].TaskProjectID+"'>"+a[c].TaskName+" </option>")}}function bindArrayToCustomerDropDown(a,b){0!=$.trim(a).length&&($("#"+b).append("<option value=''>"+a[0]+"</option>"),$("#"+b).append("<option value='1'>"+a[1]+"</option>"),$("#"+b).append("<option value='0'>"+a[2]+"</option>"))}function bindDataToDropDown(a,b,c,d){$.each(a,function(a,e){$("#"+b).append('<option value="'+e[c]+'" text="'+$.trim(convertDoubleInvertedtoCode(e[d]))+'">'+$.trim(e[d])+"</option>")})}function bindDataAlongWithTextDdl(a,b,c,d){$.each(a,function(a,e){$("#"+b).append('<option value="'+e[c]+'" text="'+$.trim(convertDoubleInvertedtoCode(e[d]))+'">'+$.trim(e[d])+"</option>")})}function bindDataAlongWithTextDdlAndConvertInverted(a,b,c,d){$.each(a,function(a,e){$("#"+b).append('<option value="'+e[c]+'" text="'+$.trim(convertDoubleSingleQuotetoNormalChar(e[d]))+'">'+$.trim(e[d])+"</option>")})}function createCheckBoxDynamic(a,b,c,d){$("#"+b).append($('<div><input type="checkbox" id="chkEmpSelectAll" value="" onclick="checkAllCheckboxes();"/> <label for="chkEmpSelectAll"> Select all</label></div>')),$.each(a,function(a,e){$("#"+b).append($('<div class="clsactiveempchkboxes"><input type="checkbox" class="clsprojcheckboxes" value="'+e[c]+'" id="chkEmp'+e[c]+'"/> <label for="chkEmp'+e[c]+'" title="'+convertDoubleInvertedtoCode(e[d])+'">'+CropTextHtml(e[d],_vrChkEmpLength)+"</label></div>"))})}function bindArrayToCustomerDropDown(a,b){0!=$.trim(a).length&&($("#"+b).append("<option value=''>"+a[0]+"</option>"),$("#"+b).append("<option value='1'>"+a[1]+"</option>"),$("#"+b).append("<option value='0'>"+a[2]+"</option>"))}function bindArrayToBrowser(a,b){if(0!=$.trim(a).length)for(var c=0;c<a.length;c++)$("#"+b).append("<option value='"+c+"' text='"+a[c]+"'>"+a[c]+"</option>")}function bindOptGroup(a,b,c,d,e,f,g){_UserRoleId!=_vrClientRoleId&&($("#ddlNewTskAssignTo").append("<optgroup label='"+e+"'>"),$("#ddlNewTskInformTo").append("<optgroup label='"+e+"'>"),$("#ddlNewTskOwner").append("<optgroup label='"+e+"'>")),$.each(a,function(a,e){"undefined"!=typeof e[g]&&($("#"+b).append("<option value="+e[f]+">"+e[g]+"</option>"),$("#"+c).append('<option value="'+e[f]+'" text="'+$.trim(convertDoubleSingleQuotetoNormalChar(e[g]))+'">'+$.trim(e[g])+"</option>"),$("#"+d).append("<option value="+e[f]+">"+e[g]+"</option>"))}),_UserRoleId!=_vrClientRoleId&&($("#ddlNewTskAssignTo").append("</optgroup>"),$("#ddlNewTskInformTo").append("</optgroup>"),$("#ddlNewTskOwner").append("</optgroup>"))}function uploadFile(a,b,c){var d=new FormData,e=$("#"+c).get(0).files,f=e[0].name,g=f.substr(0,f.lastIndexOf(".")),h=f.substr(f.lastIndexOf(".")+1,f.length-1);h=h.toLowerCase();for(var i=0,j=0;j<e.length;j++)i+=e[j].size;if(0==/^[ A-Za-z0-9_@.()-]*$/.test(g))return $("#divMainLoader").css("display","none"),displayMessage(_vrAlert,_vrFileNameVeirfy),!1;if("-1"==jQuery.inArray(h,_vrArrValidExtensions))return $("#divMainLoader").css("display","none"),displayMessage(_vrAlert,_vrValidFileFormatExtMessage),!1;if(parseInt(i)>parseInt(_vrFileSize))return $("#divMainLoader").css("display","none"),displayMessage(_vrAlert,_vrAttachedFileMessage),!1;if(parseInt(i)==parseInt(_VrDefaultFileSize))return $("#divMainLoader").css("display","none"),displayMessage(_vrAlert,_vrFileSizeMsg),$("#"+File.id).replaceWith($("#"+File.id).clone()),!1;for(var j=0;j<e.length;j++)d.append("UploadedFile"+j,e[j]);$("#imgProjFileLoader").css("display","inline"),$.ajax({type:"POST",url:a,contentType:!1,data:d,processData:!1,success:function(a){b(a)},error:function(){return displayError(),_vrFileUploading=_vrFileUploadComplete,!1}})}function returnBool(a,b){$.ajax({type:"GET",url:a,contentType:"application/json;charset=utf-8",processData:!1,crossDomain:!0,dataType:"json",success:function(a){b(a)},error:function(){return displayError(),!1}})}function showStatusDiv(){$("input[type = submit]").attr("disabled",!1),$(".info").show(),setTimeout(function(){$(".info").fadeOut()},_vrSetTime)}function deleteUploadedFile(){if(0==$.trim(_vrFunctionalityStatus).length||$.trim(_vrFileUploading).length>0){var a="";if($(".clsbugdynfilename").each(function(){var b=$(this).prop("title");a+=b}),a+=_vrUploadedCancFile,a.length>0){_BaseUrl=_vrLocationOrigin+"/Bug/DeleteFile";var b={FileName:a,TokenID:_vrUserTokenId};_vrUploadedCancFile=_vrFileUploadComplete,ajaxCallWithObject(_BaseUrl,b,clearAttachedFiles)}}}function bindDataToJqx(a,b,c,d){try{$("#"+a).jqxGrid({width:d,source:b,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,editable:!0,editmode:"click",columnsresize:!0,pagermode:"simple",filterable:!0,autosavestate:!0,autoloadstate:!0,columns:c}),disableJqxPagerButtonsOnLoad(a),$(".clsslideinner").find("button").prop("disabled",!1),$("#"+a).on("pagechanged",function(b){disableEnablePagingButtons(a,b)}),a==_vrJqxTasksGrid&&filterTaskTrailSprintDataJqxGrid()}catch(e){}}function bindDataToJqxInMagnifier(a,b,c,d){try{$("#"+a).jqxGrid({width:d,source:b,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,pagermode:"simple",filterable:!0,columns:c,columnsresize:!0}),$(".clsslideinner").find("button").prop("disabled",!1)}catch(e){}}function clearAttachedFiles(){$("#divInnerAttachedFiles").empty()}function displayFormat(a){if(null!=a){var b="";if(a=a.toString(),a.indexOf(":")>-1&&(a=a.replace(":","."),b="1"),!isNaN(a)&&0!=$.trim(a).length){var c=a.split("."),a=0==c[0].length?_vrDefaultHours:DoubleDigit(c[0]),d=1==c.length||0==c[1].length?_vrDefaultHours:ZeroRightDigit(c[1],b);return a+":"+d}$(this).val("")}}function displayError(){$(".clsslideinner").find("button").prop("disabled",!1),$("#divUnderDevelopment").dialog("option","title",_vrAlert),$("#divUnderDevelopment").dialog("open"),$(".clsremainingfields").html(_vrErrorMsg),$("#flCommUpload").replaceWith($("#flCommUpload").clone())}function replaceColon(a){var b=a.replace(":","."),c=b.split(".");if(2==c.length){var d=parseInt(c[1])/.6;return d=d.toString().split("."),1==d[0].toString().length?(d="0"+d,c[0]+"."+d):c[0]+"."+d[0]}return b}function displayFormat(a){"undefined"==typeof a&&(a=0);var b="";if(a=a.toString(),a.indexOf(":")>-1&&(a=a.replace(":","."),b="1"),!isNaN(a)&&0!=$.trim(a).length){var c=a.split("."),a=0==c[0].length?_vrDefaultHours:DoubleDigit(c[0]),d=1==c.length||0==c[1].length?_vrDefaultHours:ZeroRightDigit(c[1],b);return a+":"+d}$(this).val("")}function DoubleDigit(a){return 10>a&&1==a.length?"0"+a:(a.length>_vrMaxLengthTxt&&(a=a.substr(0,_vrMaxLengthTxt)),a)}function DoubleDigitNum(a){return 10>a?"0"+a:a}function ZeroRightDigit(a,b){if(10>a&&1==a.length){var c="";if("1"!=b){c=a+"0";var d=Math.round(.6*parseFloat(c));return 1==d.toString().length&&(d="0"+d),d.toString().substr(0,2)}return c="0"+a}if("1"!=b){var d=Math.round(.6*parseFloat(a));return 1==d.toString().length&&(d="0"+d),d.toString().substr(0,2)}return a}function displayMessage(a,b){$("input[type = submit]").attr("disabled",!1),$("#divUnderDevelopment").dialog("option","title",a),$("#divUnderDevelopment").dialog("open"),$(".clsremainingfields").html(b)}function openMagnifyDialogBox(a,b){$("#MagnifierDialog").dialog("option","title",a),$(".clsdailogfields").css("display","none"),$("#MagnifierDialog").dialog("open"),$("#"+b).jqxGrid({pagesize:14}),_vrMagnifyCloneTitle=a}function setDefaultValuesBugTrail(){_vrblnProjId=!1,_vrblnTaskId=!1,_vrblnStatus=!1,_vrFilterDates=!0,_vrblnEmpName=!1,_vrddlProjId="0",_vrddlTaskId="0",_vrddlStatus="0",_vrddlEmpName="0",_vrBugTrFromDate="",_vrBugTrToDate=""}function openMagnifyDialogBox(a,b){$("#MagnifierDialog").dialog("option","title",a),$(".clsdailogfields").css("display","none"),$("#MagnifierDialog").dialog("open"),$("#"+b).jqxGrid({pagesize:14}),_vrMagnifyCloneTitle=a}function bindBugStatus(){bindDataToDropDown(_vrBugStatus,"ddlBugStatus","BugStatusID","BugStatusType")}function convertDoubleSingleQuotetoChar(a){return a=JSON.stringify("undefined"!=typeof a&&a.length>0?a.replace(/\"/g,"&@%!~").replace(/\'/g,"#%&%#"):a)}function convertCharToDoubleSingle(a){return"undefined"!=typeof a&&a.length>0?a.replace(/\&@%!~/g,'"').replace(/\#%&%#/g,"'"):void 0}function convertDoubleSingleQuotetoNormalChar(a){return a="undefined"!=typeof a&&a.length>0?a.replace(/\"/g,"&@%!~").replace(/\'/g,"#%&%#"):a}function convertDoubleInvertedtoCode(a){return"undefined"!=typeof a&&(a=a.replace(/\"/g,"&quot;")),a}function disableJqxPagerButtonsOnLoad(a){var b=$("#"+a).jqxGrid("getpaginginformation");0!=b.pagenum||0!=b.pagescount&&1!=b.pagescount?0==b.pagenum&&($("#"+a+" div[title='first']").jqxButton({disabled:!0}),$("#"+a+" div[title='previous']").jqxButton({disabled:!0})):($("#"+a+" div[title='first']").jqxButton({disabled:!0}),$("#"+a+" div[title='previous']").jqxButton({disabled:!0}),$("#"+a+" div[title='last']").jqxButton({disabled:!0}),$("#"+a+" div[title='next']").jqxButton({disabled:!0}))}function disableEnablePagingButtons(a,b){var c=$("#"+a).jqxGrid("getpaginginformation"),d=c.pagescount,e=b.args.pagenum;0==e?($("#"+a+" div[title='first']").jqxButton({disabled:!0}).css("background-color","#efefef"),$("#"+a+" div[title='previous']").jqxButton({disabled:!0}).css("background-color","#efefef")):($("#"+a+" div[title='first']").jqxButton({disabled:!1}).css("background-color","#efefef"),$("#"+a+" div[title='previous']").jqxButton({disabled:!1}).css("background-color","#efefef")),e==d-1?($("#"+a+" div[title='last']").jqxButton({disabled:!0}).css("background-color","#efefef"),$("#"+a+" div[title='next']").jqxButton({disabled:!0}).css("background-color","#efefef")):($("#"+a+" div[title='last']").jqxButton({disabled:!1}).css("background-color","#efefef"),$("#"+a+" div[title='next']").jqxButton({disabled:!1}).css("background-color","#efefef"))}function disableJqxPagerButtonsOnLoad(a){var b=$("#"+a).jqxGrid("getpaginginformation");0!=b.pagenum||0!=b.pagescount&&1!=b.pagescount?0==b.pagenum&&b.pagescount>1&&($("#"+a+" div[title='first']").jqxButton({disabled:!0}),$("#"+a+" div[title='previous']").jqxButton({disabled:!0})):($("#"+a+" div[title='first']").jqxButton({disabled:!0}),$("#"+a+" div[title='previous']").jqxButton({disabled:!0}),$("#"+a+" div[title='last']").jqxButton({disabled:!0}),$("#"+a+" div[title='next']").jqxButton({disabled:!0}))}function logOutUser(){localStorage.removeItem("LoggedEmpId"),localStorage.removeItem("LoggedEmpName"),localStorage.removeItem("LoggedUserTokenId"),localStorage.removeItem("LoggedUserRole"),window.location.href="default.htm"}function FormatTimesOnExport(a){var b="undefined"==typeof a||0==$.trim(a).length?_vrDefaultFmt:a.toString(),c=displayFormat(b);return c}function exportJqxGridData(a,b){try{a==_vrJqxTasksGrid&&$("#"+a).jqxGrid("setcolumnproperty","TaskID","text","Task ID");var c,d=new Array,e=$("#"+a).jqxGrid("getrows").length,f="",g="",h="",i="",j="",k="";if(a===_vrJqxTasksGrid)for(var l=0;e>l;l++)h=$("#"+a).jqxGrid("getcellvalue",l,"BillableHours"),f=FormatTimesOnExport(h),i=$("#"+a).jqxGrid("getcellvalue",l,"ExpectedHours"),g=FormatTimesOnExport(i),d[l]=$("#"+a).jqxGrid("getrowdata",l),d[l].BillableHours=f,d[l].ExpectedHours=g;else if(a===_vrBillingRprtGrid){$("#"+a).jqxGrid("setcolumnproperty","Date","cellsformat","dd/MM/yyyy HH:mm:ss");for(var l=0;e>l;l++)h=$("#"+a).jqxGrid("getcellvalue",l,"BillableHours"),f=FormatTimesOnExport(h),j=$("#"+a).jqxGrid("getcellvalue",l,"NonBillableHours"),j=FormatTimesOnExport(j),k=$("#"+a).jqxGrid("getcellvalue",l,"ApprovedBillableHours"),k=FormatTimesOnExport(k),c=$("#"+a).jqxGrid("getcellvalue",l,"Comments"),c=c.replace(_vrNonBillDiv,_vrNonBillSepText),d[l]=$("#"+a).jqxGrid("getrowdata",l),d[l].BillableHours=f,d[l].NonBillableHours=j,d[l].ApprovedBillableHours=k,d[l].Comments=c}else for(var l=0;e>l;l++)d[l]=$("#"+a).jqxGrid("getrowdata",l);var m=$("#"+a).jqxGrid("sortcolumn"),n=$("#"+a).jqxGrid("sortdirection").ascending;0!=$.trim(m).length&&d.sort(function(a,b){return n?$.trim(a[m]).localeCompare($.trim(b[m])):$.trim(b[m]).localeCompare($.trim(a[m]))});for(var o=[],p=$("#"+a).jqxGrid("columns"),q=0;q<p.records.length;q++)if(!p.records[q].hidden){var r={datafield:"",datacol:""};r.datafield=p.records[q].datafield,r.datacol=p.records[q].text,o.push(r)}_vrObjExportData.jqxSource=d,_vrObjExportData.jqxColumns=o,$("#"+a).jqxGrid("exportdata","xls",b,!0,d),a==_vrJqxTasksGrid&&$("#"+a).jqxGrid("setcolumnproperty","TaskID","text",'Task ID <img src="img/Status.png" title="Status" class="clsstatushdrimg">')}catch(s){}}function exportJqxData(a,b){try{a==_vrJqxTasksGrid&&$("#"+a).jqxGrid("setcolumnproperty","TaskID","text","Task ID"),"jqxBillingReport"==a&&$("#"+a).jqxGrid("setcolumnproperty","Date","cellsformat","dd/MM/yyyy h:mm tt"),$("#"+a).jqxGrid("exportdata","xls",b),a==_vrJqxTasksGrid&&$("#"+a).jqxGrid("setcolumnproperty","TaskID","text",'Task ID <img src="img/Status.png" title="Status" class="clsstatushdrimg">')}catch(c){}}function CheckAllColumns(){var a=$("#chkdynselectall").prop("checked");a?$(".clschkdyncolumns").prop("checked",!0):$(".clschkdyncolumns").prop("checked",!1)}function ShowNHideColumns(a){for(var b="",c=$("#"+a).jqxGrid("columns"),d=0;d<c.records.length;d++)b=$("#chkdyn"+d).prop("checked"),"ApprovedBillableHours"!=c.records[d].datafield||_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId?$("#"+a).jqxGrid(b?"showcolumn":"hidecolumn",c.records[d].datafield):$("#chkdyn"+d).prop("checked",!1)}function getGridColumns(a){_vrUserPrefBtnClick=a,$("#divListOfJqxColumns").empty();var b=$("#"+a).jqxGrid("columns");if("undefined"!=typeof b){a==_vrJqxTasksGrid&&$("#"+a).jqxGrid("setcolumnproperty","TaskID","text","Task ID"),$("#divListOfJqxColumns").append("<div class='cls"+a+"'><input id='chkdynselectall' data-colname='Select all'  value='-1' type='checkbox' class='clschkdyncolumns'  /><label for='chkdynselectall'>Select all</label></div>");for(var c=0;c<b.records.length;c++)$("#divListOfJqxColumns").append("<div class='cls"+a+"'><input id='chkdyn"+c+"' data-colname="+b.records[c].datafield+" class='clschkdyncolumns' value='"+b.records[c].text+"' type='checkbox' checked /><label for='chkdyn"+c+"'>"+b.records[c].text+"</label></div>"),b.records[c].hidden&&$("input[value='"+b.records[c].text+"']").prop("checked",!1),"ApprovedBillableHours"!=b.records[c].datafield||_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId||($("#chkdyn"+c).css("display","none"),$("label[for='chkdyn"+c+"']").css("display","none"));checkUserPrefSelectAll(a),$(".dropdown-menu").css("display","block"),a==_vrJqxTasksGrid&&$("#"+a).jqxGrid("setcolumnproperty","TaskID","text",'Task ID <img src="img/Status.png" title="Status" class="clsstatushdrimg">')}else $(".dropdown-menu").css("display","none")}function checkUserPrefSelectAll(a){var b=$('.clschkdyncolumns:checkbox:not(":checked")').length;"jqxBillingReport"==a&&1!=_UserRoleId&&0==$("#chkdynselectall").prop("checked")?(1==b||2==b)&&$("#chkdynselectall").prop("checked",!0):1==b&&0==$("#chkdynselectall").prop("checked")?$("#chkdynselectall").prop("checked",!0):$("#chkdynselectall").prop("checked",!1)}function pagerDisplay(){$(".jqx-grid-pager").find("div:nth-child(6)").css("width","58%")}function pagerMagnifyDisplay(a){$widgetSizeX=$(""+a).attr("data-sizex"),$widgetSizeY=$(""+a).attr("data-sizey"),"1"===$widgetSizeX&&"1"===$widgetSizeY?$(""+a).find($(".jqx-grid-pager").find("div:nth-child(6)")).css("width","62%"):$(""+a).find($(".jqx-grid-pager").find("div:nth-child(6)")).css("width","23%").css("text-align","right")}function pagerMgnfierDisplay(a,b,c){b=a.closest(".widget").attr("data-sizex"),c=a.closest(".widget").attr("data-sizey"),"1"===b&&"1"===c?(a.find($(".jqx-grid-pager").find("div:nth-child(6)")).css("width","62%").css("text-align","left"),a.context.id==_vrBtnTaskWidgetResize&&(_vrBtnWidgetResize=0,checkBtnResizePositionInTask("btnResizeTasksWidget",++_vrBtnWidgetResize)),a.context.id==_vrBtnBugTrailWidgetResize&&(_vrBtnBugTrailResize=0,checkBtnResizePositionInTask("btnResizeBugTrailWidget",++_vrBtnBugTrailResize)),a.context.id==_vrBtnDeployWidgetResize&&(_vrBtnDeployResize=0,checkBtnResizePositionInDeploy("btnResizeDeployWidget",++_vrBtnDeployResize))):(a.find($(".jqx-grid-pager").find("div:nth-child(6)")).css("width","23%").css("text-align","right"),a.context.id==_vrBtnTaskWidgetResize&&(_vrBtnWidgetResize=0,checkBtnResizePositionInTask("btnResizeTasksWidget",_vrBtnWidgetResize)),a.context.id==_vrBtnBugTrailWidgetResize&&(_vrBtnBugTrailResize=0,checkBtnResizePositionInTask("btnResizeBugTrailWidget",_vrBtnBugTrailResize)),a.context.id==_vrBtnDeployWidgetResize&&(_vrBtnDeployResize=0,checkBtnResizePositionInDeploy("btnResizeDeployWidget",_vrBtnDeployResize)))}function LoadCountDataToCustUserProjSilde(){_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId&&(_BaseUrl=_vrLocationOrigin+"/User/GetCustProjUserCount?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindRecordsCount))}function bindToReportsddl(a,b){for(var c=0;c<a.length;c++)(4==c||6==c)&&$("#"+b).append('<option value="'+c+'" text="'+$.trim(a[c])+'">'+$.trim(a[c])+"</option>")}function CloseMadmifyFunction(){if(""!=_vrReportMagnifyStatus){_vrReportMagnifyStatus="";var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];0==$("#dialog").dialog("isOpen")?$("#dialog").dialog("close"):(ViewReport(),getReports(c,d))}else""!=_vrUserDialogOpen&&$("#dialog").dialog("close")}function setRecordCountPosition(a){$widget=$("#"+a).parents(".widget"),$widgetSizeX=$widget.attr("data-sizex"),$widgetSizeY=$widget.attr("data-sizey"),pagerMgnfierDisplay($widget,$widgetSizeX,$widgetSizeY),2==parseInt($widgetSizeX)&&(a==_vrJqxTasksGrid?checkBtnResizePositionInTask(_vrBtnTaskWidgetResize,0):a==_vrJqxBugsGrid?checkBtnResizePositionInTask(_vrBtnBugTrailWidgetResize,0):a==_vrDeployGrid&&checkBtnResizePositionInDeploy("btnResizeDeployWidget",0))}function LoadCountDataToCustUserProjSilde(){_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId&&(_BaseUrl=_vrLocationOrigin+"/User/GetCustProjUserCount?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindRecordsCount))}function getIndexOfObjBasedOnValue(a,b,c){for(var d=0;d<a.length;d++)if(a[d].hasOwnProperty(b)&&a[d][b]===c)return d;return-1}function checkDropdownValues(a,b){var c=$("#"+a+" option[value='"+b+"']").val();return c}function clearLocalStorage(){localStorage.removeItem("jqxGridjqxBillingReport"),localStorage.removeItem("jqxGridjqxBugTrial"),localStorage.removeItem("jqxGridjqxCustomerTrial"),localStorage.removeItem("jqxGridjqxProjectsGrid"),localStorage.removeItem("jqxGridjqxTasksgrid"),localStorage.removeItem("jqxGridjqxUserTrial"),localStorage.removeItem("jqxGridjqxDeployGrid")}function setLocalStorageFromDialog(a,b){var c=JSON.parse(localStorage.getItem("jqxGrid"+a));null!=c&&(c.width=b,localStorage.setItem("jqxGrid"+a,JSON.stringify(c)))}function refreshProjCountGraph(){_DashboardIndexNo=-1,$("#txtCltTasksToDate").datepicker("setDate",new Date),$("#txtCltTasksFromDate").datepicker("setDate","-1M");var a=$("#txtCltTasksFromDate").val();$("#txtCltTasksToDate").datepicker("option","minDate",a),loadDdlInTasksCount(),FilterTasksCountGraph()}function loadDdlInTasksCount(){if($("#divProjTotalCount").css("display","none"),_UserRoleId==_vrClientRoleId){var a={ClientID:_EmpId,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Customer/GetClientActivePrjs",ajaxCallWithObject(_BaseUrl,a,bindActiveProjDropdown)}_UserRoleId!=_vrClientRoleId&&(_BaseUrl=_vrLocationOrigin+"/Project/GetAllProjects?&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindActiveProjDropdown))}function bindActiveProjDropdown(a){var b=$("#txtCltTasksFromDate,#txtCltTasksToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;
"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(a){if($.trim($("#txtCltTasksFromDate").val()).length>0)for(var c=0;c<b.length;++c)b[c].id>this.id&&$(b[c]).datepicker("option","minDate",a)}});$("#txtCltTasksToDate").datepicker("setDate",new Date),$("#txtCltTasksFromDate").datepicker("setDate","-1M");var c=$("#txtCltTasksFromDate").val();$("#txtCltTasksToDate").datepicker("option","minDate",c);if(_UserRoleId==_vrClientRoleId)var d=a.MultipleResults;else if(_UserRoleId!=_vrClientRoleId)var d=a;return $("#lblActiveProjects").text(a.RecordCount),"undefined"==typeof d?(FilterTasksCountGraph(),!1):(d.length>0&&$("#ddlClientProjects").empty(),bindDataToDropDown(d,"ddlClientProjects","ProjectID","ProjectName"),_DashboardIndexNo>-1&&Object.keys(_vrWidgetCOntrolData[_DashboardIndexNo]).length>0&&($("#ddlClientProjects").val(_vrWidgetCOntrolData[_DashboardIndexNo].ddlClientProjects),$("#txtCltTasksToDate").datepicker("option","minDate",_vrWidgetCOntrolData[_DashboardIndexNo].txtCltTasksFromDate),$("#txtCltTasksFromDate").datepicker("setDate",_vrWidgetCOntrolData[_DashboardIndexNo].txtCltTasksFromDate),$("#txtCltTasksToDate").datepicker("setDate",_vrWidgetCOntrolData[_DashboardIndexNo].txtCltTasksToDate)),void FilterTasksCountGraph())}function FilterTasksCountGraph(){$("#divPrjTsksCountLoader").css("display","block");var a=$("#txtCltTasksToDate").val(),b=$("#txtCltTasksFromDate").val(),c=$("#txtCltTasksFromDate").val();$("#txtCltTasksToDate").datepicker("option","minDate",c);var d=a.split("/"),e=b.split("/");a=d[2]+"-"+d[1]+"-"+d[0],b=e[2]+"-"+e[1]+"-"+e[0];var f=$("#ddlClientProjects").val(),g=$("#ddlClientProjects option:selected").text();cropText($("#lblDshPrjName"),g,_vrDshProjLen),"0"==f&&$("#lblDshPrjName").text("None");var h={intProjectId:f,FromDate:b,ToDate:a,ClientID:_EmpId,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Customer/GetProjTskDetails",ajaxCallWithObject(_BaseUrl,h,bindProjDetailsGraph),_DashboardIndexNo=-1}function bindProjDetailsGraph(a){var b=a.MultipleResults[0];OrganisePrjctDtlsData(b)}function OrganisePrjctDtlsData(a){vrAllTasksCount=0,StatusType=[],TaskCount=[];for(var b=a.lstTasksStatus,c=a.lstPrjTasksCount,d=0;d<b.length;d++)StatusType[d]=b[d].StatusType,TaskCount[d]=0;for(var d=0,e=0;d<c.length;d++,e++){var f=c[e].StatusType,g=c[e].StatusCount,h=jQuery.inArray(f,StatusType);TaskCount[h]=g}$.each(TaskCount,function(){vrAllTasksCount+=parseInt(this)}),$("#lblDshTasksCount").text(vrAllTasksCount),BindPrjTskDetailsChart()}function BindPrjTskDetailsChart(){$(".highcharts-container svg").css("background-color","transparent"),$(function(){$("#divPrjctTskDtlsChart").highcharts({chart:{type:"bar",events:{load:function(){for(var a=$(".highcharts-container svg rect"),b=0;b<a.length;b++)("rgb(255, 255, 255)"==$(a[b]).css("fill")||"#ffffff"==$(a[b]).css("fill"))&&$(a[b]).css("fill","none")}}},title:{text:""},xAxis:{categories:StatusType,labels:{align:"right",style:{fontSize:"11px",fontColor:"black",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:"No. of tasks"},minTickInterval:1},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f} </b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{colorByPoint:!0,pointPadding:.1,borderWidth:0}},series:[{showInLegend:!1,name:"No. of tasks",data:TaskCount}]})}),ChangeColorOfGraphText(),$("#divPrjTsksCountLoader").css("display","none")}function ChangeColorOfGraphText(){var a=$(".highcharts-series-group>g>rect");$(a[0]).css("fill","rgb(59, 197, 216)"),$(a[1]).css("fill","rgb(240, 93, 93)"),$(a[2]).css("fill","rgb(207, 80, 121)"),$(a[3]).css("fill","yellow"),$(a[4]).css("fill","rgb(110, 138, 248)"),$(a[5]).css("fill","rgb(0, 196, 55)"),$(a[6]).css("fill","rgb(168, 32, 173)"),$(a[7]).css("fill","rgb(255, 227, 186)"),$(a[8]).css("fill","black")}function openDashboard(){$("#dailog").dialog("option","title",_vrDashBoardTitle),$(".clsdailogfields").css("display","none"),$("#divDashboardGraphs").css("display","inline-block"),$("#dailog").dialog("open"),_BaseUrl=_vrLocationOrigin+"/User/GetActiveEmployeeDetails?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCall(_BaseUrl,bindGraphEmployeesDdl),_vrUserIsProjManager?$("#ddlGraphEmployees").attr("disabled",!1):$("#ddlGraphEmployees").attr("disabled",!0)}function bindGraphEmployeesDdl(a){$("#ddlGraphEmployees").empty(),$("#ddlGraphEmployees").append("<option value='0'>Select employee</option>"),"undefined"!=typeof a&&bindDataToDropDown(a,"ddlGraphEmployees","EmpID","EmpFirstName"),$("#ddlGraphEmployees").val(_EmpId),$("#ddlGraphEmployees").chosen(),$("#ddlGraphEmployees").trigger("chosen:updated"),bindProjectsDdl()}function bindProjectsDdl(){$("#ddlGraphProjects").val("0"),$("#ddlGraphProjects").trigger("chosen:updated");var a=$("#ddlGraphEmployees").val(),b=$("#ddlGraphEmployees option:selected").data("userrole");_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+a+"&strEmpUserRoleID="+b+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindGraphProjectDdl),bindGraphValues()}function bindGraphValues(){var a=$("#ddlGraphEmployees").val(),b=$("#ddlGraphProjects").val();_BaseUrl=_vrLocationOrigin+"/project/GetAllTaskInPieChart?intProjectID="+b+"&intEmployeeID="+a+"&strDates='nothing'&intRoleID=1&strTokenID="+_vrUserTokenId,$("#graphloaderImage").css("display","inline"),ajaxCall(_BaseUrl,bindAllDataToChart)}function bindGraphProjectDdl(a){$("#ddlGraphProjects").empty(),$("#ddlGraphProjects").append("<option value='0'>Select project</option>"),"undefined"!=typeof a&&(bindDataToDropDown(a,"ddlGraphProjects","ProjectID","ProjectName"),$("#ddlGraphProjects").chosen(),$("#ddlGraphProjects").trigger("chosen:updated")),$("#ddlGraphProjects").chosen(),$("#ddlGraphProjects").trigger("chosen:updated")}function bindAllDataToChart(a){var b=a[0];GeneratePieChartForBugs(b.LstProjectBugDetails),GeneratePieChartForTask(b.LstTaskDetails),billingHoursChart(b.ArrBillingData)}function billingHoursChart(a){for(var b=new Array,c=new Array,d=new Array,e=0;e<a.length;e++)d.push(a[e].WeekDayName),b.push(a[e].BillableHours),c.push(a[e].NonBillableHours);$("#billingHoursChartDiv").highcharts({chart:{type:"column",width:349,height:299,events:{load:function(){for(var a=$("#billingHoursChartDiv svg rect"),b=0;b<a.length;b++)("rgb(255, 255, 255)"==$(a[b]).css("fill")||"#FFFFFF"==$(a[b]).css("fill"))&&$(a[b]).css("fill","none")}}},title:{text:""},xAxis:{categories:d,labels:{rotation:-45,align:"right",style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{min:0,title:{text:"Billing Report"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"Billable Hours",data:b},{name:"Non-Billable Hours",data:c}]}),$("#graphloaderImage").css("display","none")}function GeneratePieChartForBugs(a){if("undefined"==typeof a||0==a.length)return $("#BugsGraphContainer").hide(),$("#divnoDataBugsPie").show(),!1;$("#divnoDataBugsPie").hide(),$("#BugsGraphContainer").show();for(var b=0,c=0,d=0,e=0,f=0;f<a.length;f++)"Open"==a[f].BugStatusType&&(b=a[f].BugCount),"Fixed"==a[f].BugStatusType&&(c=a[f].BugCount),"Closed"==a[f].BugStatusType&&(d=a[f].BugCount),"On Hold"==a[f].BugStatusType&&(e=a[f].BugCount);var g=[{name:"Open",y:parseInt(b),sliced:!0,selected:!0},{name:"Fixed",y:parseInt(c)},{name:"Closed",y:parseInt(d)},{name:"On Hold",y:parseInt(e)}];callBugPieChart(g)}function callBugPieChart(a){callTaskPieChart(a,"BugsGraphContainer","Bugs Count",320,320)}function GeneratePieChartForTask(a){if("undefined"==typeof a||0==a.length)return $("#container").hide(),$("#divnoDataTasksPie").show(),!1;$("#divnoDataTasksPie").hide(),$("#container").show();for(var b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0;l<a.length;l++)"Planned"==a[l].StatusType&&(b+=1),"In Progress"==a[l].StatusType&&(c+=1),"Dev Testing"==a[l].StatusType&&(d+=1),"Ready Live"==a[l].StatusType&&(e+=1),"Live Testing"==a[l].StatusType&&(f+=1),"Done"==a[l].StatusType&&(g+=1),"Documentation"==a[l].StatusType&&(h+=1),"Delivered"==a[l].StatusType&&(i+=1),"Stopped"==a[l].StatusType&&(j+=1),"Integration Ready"==a[l].StatusType&&(k+=1);var m=[{name:"Planned",y:b},{name:"In Progress",y:c,sliced:!0,selected:!0},{name:"Dev Testing",y:d},{name:"Ready Live",y:e},{name:"Live Testing",y:f},{name:"Done",y:g},{name:"Documentation",y:h},{name:"Delivered",y:i},{name:"Stopped",y:j},{name:"Integration Ready",y:k}];callTaskPieChart(m,"container","Task Count",400,400)}function callTaskPieChart(a,b,c,d,e){var f={chart:{margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,renderTo:b,width:d,height:e,type:"pie",events:{load:function(){$(".pieChartGraph svg rect").css("fill","none"),$(".highcharts-tooltip rect").css("fill","white")}}},title:{text:""},tooltip:{pointFormat:""+c+": <b>{point.y}</b>"},series:[{}]};f.series[0].data=a;new Highcharts.Chart(f)}function EmailUser(a){}function showDailogBasedGuid(){}function bindFieldsToGrid(a){var b=a;"undefined"==typeof a&&(b=[]),_vrDeployFilesData={datatype:"json",type:"GET",cache:!1,datafields:_vrDeployFilesDatafields,localdata:b},vrEmpDeployDisableGrid>0?($("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileType","editable",!1),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FilePath","editable",!1),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileName","editable",!1)):($("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileType","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FilePath","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileName","editable",!0)),loadFilesDeployGrid("jqxgridFilesDetails",_vrDeployFilesData,_vrFileDeployColumns,650)}function loadFilesDeployGrid(a,b,c,d){$("#"+a).jqxGrid({width:d,source:b,enabletooltips:!0,filterable:!0,sortable:!0,autoheight:!0,autorowheight:!0,editable:!0,columns:c,autorowheight:!0})}function bindFieldsToText(a){"undefined"!=typeof a?"Update"!=vrbtnStatus&&($("#iddeployversion").val(a[0].Version),$("#iddeploysvn").val(a[0].SVNNo),$("#idFilepath").val(a[0].URL)):($("#iddeployversion").val(""),$("#iddeploysvn").val(""),$("#idFilepath").val(""))}function createNewDeployment(){try{vrbtnStatus="Save",vrDepCheckId=0,vrEnvironment="1",$("#errNewDeployError").css("display","none"),$("#errNewDeployEmail").css("display","none"),$(".clsdailogfields").css("display","none"),$("#btnDepSave").css("display","inline"),$("#btnDepUpdate").css("display","none"),$("#ddldeploymentTask").empty().trigger("chosen:updated"),$("input[type = submit]").attr("disabled",!1),$("#ddldeploymentProject").attr("disabled",!1).trigger("chosen:updated"),$("#ddldeploymentTask").attr("disabled",!1).trigger("chosen:updated"),$("#ddldeploymentApplication").attr("disabled",!1).trigger("chosen:updated"),$("#idShowNewDeployment").css("display","block"),$("#ddldeploymentTask").empty().trigger("chosen:updated"),$("#slstatus option[value='2']").remove(),1==_UserRoleId&&$("#slstatus").append("<option value=2>Deployed</option>"),$("#selstatusdeployed").css("display","inline"),_vrChecklistAppID=0,_vrCheklistProjectId=0,_vrSelTaskNames=[],$("#dailog").dialog("option","title",_vrDialogBoxNewDeployment),_vrDialogBoxTitle=_vrDialogBoxNewDeployment,$("#dailog").dialog("open"),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagDeployProject),_BaseUrl=_vrLocationOrigin+"/Project/FetchApplicationData?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagDeployApplication),$("#jqxgridFilesDetails").jqxGrid("clear"),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileType","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FilePath","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileName","editable",!0),clearDeploymentFields()}catch(a){}}function CheckFilesRemeber(){$("#chkRemmemberFiles").prop("checked")?SaveDeploymentFields():($("#divDeployFilesDailog").dialog("option","title","Files checklist"),$(".clsremainingfields").html("Do you want save below files"),$("#divDeployFilesDailog").dialog("open"),$("#divDeployFilesDailog").dialog("widget").effect("shake",{times:2},200),$("#btnSubmitOkDevelopment").click(function(){$("#chkRemmemberFiles").prop("checked",!0),$("#divDeployFilesDailog").dialog("close"),SaveDeploymentFields()}),$("#btnSubmitCancelDeployment").click(function(){$("#chkRemmemberFiles").prop("checked",!1),$("#divDeployFilesDailog").dialog("close"),SaveDeploymentFields()}))}function SaveDeploymentFields(){try{if(!validateChosen())return validateDeploymentFields(),!1;if(!validateDeploymentFields())return!1;var a=$("#iddeployemail").val();if(!validateDeployEmail(a))return!1;$("input[type = submit]").attr("disabled",!0),_vrDeployStatusId="succ",$("#divMainLoader").css("display","inline");var b=parseInt(vrEnvironment),c=parseInt($("#chkRedbook").prop("checked")?1:0),d=parseInt($("#chkCommSvn").prop("checked")?1:0),e=$("#chkRemmemberFiles").prop("checked")?!0:!1,f=parseInt($("#ddldeploymentProject").val()),g=$("#ddldeploymentTask").val();if(null!=g)for(var h=g[0],i=1;i<g.length;i++)h=h+","+g[i];var j=$("#iddeployversion").val(),k=$("#iddeploysvn").val(),l=$("#iddeployemail").val(),m=$("#txtcomment").val(),n=$("#idFilepath").val(),o=parseInt($("#slstatus").val()),p=parseInt($("#ddldeploymentApplication").val()),q=parseInt(localStorage.getItem("LoggedEmpId")),r=[],s=$("#jqxgridFilesDetails").jqxGrid("getrows");try{for(var t=0;t<s.length;t++)r.push($("#jqxgridFilesDetails").jqxGrid("getrowdata",t)),r[t].FileName=replaceSlash(r[t].FileName),r[t].FilePath=replaceSlash(r[t].FilePath),r[t].FileType=replaceSlash(r[t].FileType)}catch(u){}var v={CheckListAppID:p,Environment:b,IsRedbookUpdated:c,IsCommitted:d,ProjectID:f,TaskIDs:h,Version:j,SVNNo:k,EmailID:l,Comments:m,EmpID:q,URL:n,Status:o,FileDetails:r,TokenID:_vrUserTokenId,BlnFileDetailsRemember:e};_BaseUrl=_vrLocationOrigin+"/Project/InsertChecklist",ajaxCallWithObject(_BaseUrl,v,reloadCheckList)}catch(u){}}function replaceSlash(a){var b="";return $.trim(a).length>0?b=a.replace(/\\/g,"\\\\"):a}function reloadCheckList(a){FilterDeploymentDetail()}function UpdateDeploy(){try{if(!validateDeploymentFields())return!1;if(!validateChosen())return validateDeploymentFields(),!1;if(parseInt($("#slstatus").val())>0&&0==vrDepChangeStatus&&"1"!=_UserRoleId){var a="Can be updated only when status is 'New' (or) having Admin privileges.";return displayMessage(_vrAlert,a),!1}$("#divMainLoader").css("display","inline"),_vrDeployStatusId="updatesucc",$("input[type = submit]").attr("disabled",!0);var b=parseInt(vrEnvironment),c=parseInt($("#chkRedbook").prop("checked")?1:0),d=parseInt($("#chkCommSvn").prop("checked")?1:0),e=$("#chkRemmemberFiles").prop("checked")?!0:!1,f=parseInt($("#ddldeploymentProject").val()),g=$("#ddldeploymentTask").val();if(null!=g)for(var h=g[0],i=1;i<g.length;i++)h=h+","+g[i];for(var j=$("#iddeployversion").val(),k=$("#iddeploysvn").val(),l=$("#iddeployemail").val(),m=$("#txtcomment").val(),n=$("#idFilepath").val(),o=parseInt($("#slstatus").val()),p=parseInt($("#ddldeploymentApplication").val()),q=parseInt(localStorage.getItem("LoggedEmpId")),r=[],s=$("#jqxgridFilesDetails").jqxGrid("getrows"),t=0;t<s.length;t++)r.push($("#jqxgridFilesDetails").jqxGrid("getrowdata",t)),r[t].FileName=replaceSlash(r[t].FileName),r[t].FilePath=replaceSlash(r[t].FilePath),r[t].FileType=replaceSlash(r[t].FileType);var u={CheckListAppID:p,Environment:b,IsRedbookUpdated:c,IsCommitted:d,ProjectID:f,TaskIDs:h,Version:j,SVNNo:k,EmailID:l,Comments:m,EmpID:q,URL:n,Status:o,FileDetails:r,TokenID:_vrUserTokenId,BlnFileDetailsRemember:e,CheckListID:vrDepCheckId};_BaseUrl=_vrLocationOrigin+"/Project/UpdateChecklist",ajaxCallWithObject(_BaseUrl,u,reloadCheckList)}catch(v){}}function LoadPageNumForDeployment(){try{null!=_vrLocalDeployData&&(localStorage.setItem("jqxGridjqxDeployGrid",JSON.stringify(_vrLocalDeployData)),$("#jqxDeployGrid").jqxGrid("gotopage",_vrLocalDeployData.pagenum))}catch(a){}}function clearDeploymentFields(){$("#dailog").dialog("option","title",_vrDialogBoxNewDeployment),_vrChecklistAppID=0,_vrCheklistProjectId=0,vrDepCheckId=0,_vrSelTaskNames=[],$("#slstatus").attr("disabled",!1),$("#btnDepClose").css("display","none"),$("#errNewDeployError").css("display","none"),$("#errNewDeployEmail").css("display","none"),$("#btnDepReset").css("display","inline"),$("#slstatus").val(vrClear),$("#ddldeploymentProject").val("").trigger("chosen:updated"),$("#ddldeploymentTask").chosen(),$("#ddldeploymentTask").empty().trigger("chosen:updated"),$("#ddldeploymentApplication").chosen(),$("#ddldeploymentApplication").val("").trigger("chosen:updated"),$("#chkRedbook").prop("checked",!1),$("#chkCommSvn").prop("checked",!1),$("#rbTest").prop("checked",!0),$("#chkRemmemberFiles").prop("checked",!1),$("#iddeployversion").val(""),$("#iddeploysvn").val(""),$("#iddeployemail").val(""),$("#idFilepath").val(""),$("#txtcomment").val(""),$("#jqxgridFilesDetails").jqxGrid("clear"),$(".clsnewdeploymandatory").removeClass("error"),$("#ddldeploymentProject").attr("disabled",!1).trigger("chosen:updated"),$("#ddldeploymentTask").attr("disabled",!1).trigger("chosen:updated"),$("#ddldeploymentApplication").attr("disabled",!1).trigger("chosen:updated"),$("#btnDepUpdate").css("display","none"),$("#btnDepSave").css("display","inline"),$(".clsnewdeployvaluefields").find("#ddldeploymentProject_chosen").find(".chosen-single").removeClass("error"),$(".clsnewdeployvaluefields").find(".chosen-choices").removeClass("error"),$(".clsnewdeployvaluefields").find("#ddldeploymentApplication_chosen").removeClass("error"),$("#slstatus").attr("disabled",!1),$("#txtcomment").attr("disabled",!1),$("#idFilepath").attr("disabled",!1),$("#iddeployemail").attr("disabled",!1),$("#iddeployversion").attr("disabled",!1),$("#iddeploysvn").attr("disabled",!1),$("input[name=Deployment]").attr("disabled",!1),$("#chkCommSvn").prop("disabled",!1),$("#chkRedbook").prop("disabled",!1),$("#deployaddrowbutton").attr("disabled",!1),$("#deploydeleterowbutton").attr("disabled",!1),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileType","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FilePath","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileName","editable",!0)}function validateDeploymentFields(){return $(".clsnewdeploymandatory").each(function(){0==$.trim($(this).val()).length&&$(this).addClass("error")}),$(".error").length>0?($("#errNewDeployError").css("display","inline"),!1):!0}function validateDeployEmail(a){a.charAt(0);if(a.charCodeAt(0)<=122&&a.charCodeAt(0)>=97||a.charCodeAt(0)<=90&&a.charCodeAt(0)>=65){var b=a.split("@");if(2==b.length){b[0];for(var c=0,d=0;d<b[0].length;d++)if(b[0].charCodeAt(d)<=47&&b[0].charCodeAt(d)>=32){var e=b[0].indexOf(b[0].charAt(d));if(e>0){var f=1;f+=e;var g=b[0].indexOf(b[0].charAt(d),f);g>e&&g==f&&c++}}if(0==c){var h=/^[a-zA-Z0-9_\!#$%^&*()+-]+(\.[a-zA-Z0-9_\!#$%^&*()+-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,4})$/;return""==a?($("#errNewDeployEmail").css("display","none"),!0):h.test(a)?($("#errNewDeployEmail").css("display","none"),!0):($("#errNewDeployEmail").css("display","inline"),!1)}return $("#errNewDeployEmail").css("display","inline"),!1}return $("#errNewDeployEmail").css("display","inline"),!1}return 0==a.length?($("#errNewDeployEmail").css("display","none"),!0):($("#errNewDeployEmail").css("display","inline"),!1)}function FilterDeploymentDetail(){$("#divDeployLoading").css("display","block");var a=$("#txtDeployFromDate").val(),b=$("#txtDeployToDate").val(),c="";if("undefined"!=typeof a&&"undefined"!=typeof b){var d=$("#txtDeployFromDate").val().split("/");""!=d&&void 0!=d&&(_vrFromDate=d[2]+"-"+d[1]+"-"+d[0]);var e=$("#txtDeployToDate").val().split("/");""!=e&&void 0!=e&&(c=e[2]+"-"+e[1]+"-"+e[0]),_BaseUrl=_vrLocationOrigin+"/project/GetCheckListDetails?strTokenID="+_vrUserTokenId+"&&strFromDate="+_vrFromDate+"&&strToDate="+c,ajaxCall(_BaseUrl,bindDeploymentDetail)}}function bindDeploymentDetail(a){$("#divDeployLoading").css("display","block");var b="";1==_vrGridDeployMagnify||$("#MagnifierDialog #idDeploy").length>0?b=_vrMagnifyDeployGridWidth:(b=_vrProjectsTasksWidth,setLocalStorageFromDialog("jqxDeployGrid",_vrProjectsTasksWidth));var c=a;_vrDeployData={datatype:"json",type:"GET",cache:!1,datafields:_DeployDataFields,localdata:c,pagesize:_vrDefaultDeploySizer},$("#jqxDeployGrid").jqxGrid({width:b,source:_vrDeployData,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,pagermode:"simple",filterable:!0,autosavestate:!0,autoloadstate:!0,columns:_vrDeployColumns,columnsresize:!0}),disableJqxPagerButtonsOnLoad("jqxDeployGrid"),$("#jqxDeployGrid").on("pagechanged",function(a){disableEnablePagingButtons("jqxDeployGrid",a)});try{1==_vrsliderDates&&($(".ui-datepicker-current").hide(),$("#txtDeployToDate").datepicker("setDate",new Date),$("#txtDeployFromDate").datepicker("setDate",-1),_vrsliderDates=0),_deployIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_deployIndexNO]).length>0&&($("#txtDeployToDate").datepicker("option","minDate",_vrWidgetCOntrolData[_deployIndexNO].txtDeployFromDate),$("#txtDeployFromDate").datepicker("setDate",_vrWidgetCOntrolData[_deployIndexNO].txtDeployFromDate),$("#txtDeployToDate").datepicker("setDate",_vrWidgetCOntrolData[_deployIndexNO].txtDeployToDate),_deployIndexNO=-1)}catch(d){}setRecordCountPosition("jqxDeployGrid"),filterDeployJqxGrid(),LoadPageNumForDeployment(),$("#divDeployLoading").css("display","none"),$("#imgDeployMagnify").attr("disabled",!1)}function linkrenderdeployempname(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c)return'<span style="margin: 4px; line-height: 1.9;">'+c.EmpFirstName+" "+c.EmpLastName+"</span>"}catch(d){}}function linkrenderdeploy(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c)var d=JSON.stringify(c.CheckListID).toString();return"<a class='clsdeploylink' href='#' onclick='deploylink("+b+")'>"+d+"</a>"}catch(e){}}function deploylink(a){clearDeploymentFields();var b=$("#MagnifierDialog").dialog("option","title");b==_vrDialogDeployment?(_vrLocalDeployData=null,_vrLocalDeployData=JSON.parse(localStorage.getItem("jqxGridjqxDeployGrid"))):b!=_vrDialogDeployment&&(_vrLocalDeployData=null,_vrLocalDeployData=JSON.parse(localStorage.getItem("jqxGridjqxDeployGrid")));var c=$("#jqxDeployGrid").jqxGrid("getrowdata",a);vrDepCheckId=parseInt(c.CheckListID),vrbtnStatus="Update",vrEmpDeployDisableGrid=0,1==_UserRoleId&&($("#slstatus option[value='2']").remove(),$("#slstatus").append("<option value=2>Deployed</option>")),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileType","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FilePath","editable",!0),$("#jqxgridFilesDetails").jqxGrid("setcolumnproperty","FileName","editable",!0),$("#errNewDeployError").css("display","none"),$("#errNewDeployEmail").css("display","none"),$(".clsdailogfields").css("display","none"),$("#idShowNewDeployment").css("display","block"),$("#btnDepSave").css("display","none"),$("#btnDepUpdate").css("display","inline"),$("#btnDepReset").css("display","inline"),$("#dailog").dialog("option","title",_vrDialogBoxNewDeployment),_vrDialogBoxTitle=_vrDialogBoxNewDeployment,$("#dailog").dialog("open"),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagDeployProject),_BaseUrl=_vrLocationOrigin+"/Project/FetchApplicationData?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagDeployApplication),$("#ddldeploymentTask").chosen(),_vrCheklistProjectId=c.ProjectID,_vrSelTaskNames=c.TaskIDs,$("#ddldeploymentProject").attr("disabled",!0).trigger("chosen:updated"),$("#ddldeploymentTask").attr("disabled",!0).trigger("chosen:updated"),$("#ddldeploymentApplication").attr("disabled",!0).trigger("chosen:updated"),_vrChecklistAppID=c.CheckListAppID,1==c.IsRedbookUpdated&&$("#chkRedbook").prop("checked",!0),1==c.IsCommitted&&$("#chkCommSvn").prop("checked",!0),1==parseInt(c.Environment)?($("#rbTest").prop("checked",!0),vrEnvironment="1"):2==parseInt(c.Environment)?($("#idLive").prop("checked",!0),vrEnvironment="2"):($("#idStaging").prop("checked",!0),vrEnvironment="3"),vrDepChangeStatus=0,$("#iddeployversion").val(c.Version),$("#iddeploysvn").val(c.SVNNo),$("#iddeployemail").val(c.EmailID),$("#idFilepath").val(c.URL),$("#idFilepath").val(c.URL),$("#idFilepath").val(c.URL),"2"==parseInt(c.Status)&&($("#slstatus option[value='2']").remove(),$("#slstatus").append("<option value=2>Deployed</option>")),$("#slstatus").val(parseInt(c.Status)),$("#txtcomment").val(c.Comments),_vrChecklistID=c.CheckListID;c.BlnFileDetailsRemember;$("#chkRemmemberFiles").prop("checked",!0),$("#dailog").dialog("option","title",_vrEditDeploy),$("#slstatus").attr("disabled",!1),parseInt(c.Status)>0&&("1"==_UserRoleId?($("#slstatus").attr("disabled",!1),$("#txtcomment").attr("disabled",!1),$("#idFilepath").attr("disabled",!1),$("#iddeployemail").attr("disabled",!1),$("#iddeployversion").attr("disabled",!1),$("#iddeploysvn").attr("disabled",!1),$("input[name=Deployment]").attr("disabled",!1),$("#chkCommSvn").prop("disabled",!1),$("#chkRedbook").prop("disabled",!1),$("#deployaddrowbutton").attr("disabled",!1),$("#deploydeleterowbutton").attr("disabled",!1),$("#btnDepClose").css("display","none"),$("#btnDepUpdate").css("display","inline"),$("#btnDepReset").css("display","inline")):($("#slstatus").attr("disabled",!0),$("#txtcomment").attr("disabled",!0),$("#idFilepath").attr("disabled",!0),$("#iddeployemail").attr("disabled",!0),$("#iddeployversion").attr("disabled",!0),$("#iddeploysvn").attr("disabled",!0),$("input[name=Deployment]").attr("disabled",!0),$("#chkCommSvn").prop("disabled",!0),$("#chkRedbook").prop("disabled",!0),$("#deployaddrowbutton").attr("disabled",!0),$("#deploydeleterowbutton").attr("disabled",!0),$("#btnDepClose").css("display","inline"),$("#btnDepUpdate").css("display","none"),$("#btnDepReset").css("display","none"),vrEmpDeployDisableGrid=1)),_vrDialogBoxTitle=_vrEditDeploy,event.preventDefault()}function linkrenderdeploystatus(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=JSON.stringify(c.Status).toString();if(0==d)return"New";if(1==d)return"To be deployed";if(2==d)return"Deployed"}}catch(e){}}function linkrenderdeployEnv(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=JSON.stringify(c.Environment).toString();if(1==d)return" Test ";if(2==d)return" Live ";if(3==d)return" Staging "}}catch(e){}}function validateChosen(){var a=$("#ddldeploymentProject").val(),b=$("#ddldeploymentTask").val(),c=$("#ddldeploymentApplication").val();return 0==a||null==a?$(".clsnewdeployvaluefields").find("#ddldeploymentProject_chosen").find(".chosen-single").addClass("error"):$(".clsnewdeployvaluefields").find("#ddldeploymentProject_chosen").find(".chosen-single").removeClass("error"),null==b||null==b?$(".clsnewdeployvaluefields").find(".chosen-choices").addClass("error"):$(".clsnewdeployvaluefields").find(".chosen-choices").removeClass("error"),0==c||null==c?$(".clsnewdeployvaluefields").find("#ddldeploymentApplication_chosen").addClass("error"):$(".clsnewdeployvaluefields").find("#ddldeploymentApplication_chosen").removeClass("error"),$(".error").length>0?($("#errNewDeployError").css("display","inline"),!1):!0}function linkrenderdeploystatus(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=JSON.stringify(c.Status).toString();if(0==d)return'<span style="margin: 4px; line-height: 1.9;">New</span>';if(1==d)return'<span style="margin: 4px; line-height: 1.9;">To be deployed</span>';if(2==d)return'<span style="margin: 4px; line-height: 1.9;">Deployed</span>'}}catch(e){}}function linkrenderdeployEnv(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=JSON.stringify(c.Environment).toString();if(1==d)return'<span style="margin: 4px; line-height: 1.9;">Test</span>';if(2==d)return'<span style="margin: 4px; line-height: 1.9;">Live</span>';if(3==d)return'<span style="margin: 4px; line-height: 1.9;">Staging</span>'}}catch(e){}}function checkBtnResizePositionInDeploy(a,b){0==b?($(".clsdeploystatus").css("margin-left","10px"),$("#txtDeploySearch").css("margin-left","10px"),$("#btnDeployResetSearch").css("margin-right","135px"),b++,_vrBtnDeployResize=b):($(".clsdeploystatus ").css("margin-left","0px"),$("#txtDeploySearch").css("margin-left","157px"),$("#btnDeployResetSearch").css("margin-right","-10px"),b--,_vrBtnDeployResize=b)}function loadJqxDeployMagifyClickGrid(){bindDataToJqx("jqxDeployGrid",_vrDeployData,_vrDeployColumns,_vrMagnifyDeployGridWidth)}function refreshDeploymentGrid(){_deployIndexNO=-1,_vrLocalDeployData=null,$("#txtDeployToDate").datepicker("setDate",new Date),$("#txtDeployFromDate").datepicker("setDate",-1);var a=$("#txtDeployFromDate").val();$("#txtDeployToDate").datepicker("option","minDate",a),$("#txtDeploySearch").val(""),$("#ddlDeploystatus").val(""),FilterDeploymentDetail()}function SearchDeploment(){filterDeployJqxGrid()}function LoadDeployDetails(){setTimeout(function(){filterDeployJqxGrid()},5)}function filterDeployJqxGrid(){$("#divDeployLoading").css("display","block");try{var a=$("#ddlDeploystatus").val(),b=$("#txtDeploySearch").val().toLowerCase(),c=_vrDeployData,d=_vrDeployData.localdata,e=d;null!=a&&0!=$("#ddlDeploystatus").val().length&&(e=jQuery.grep(d,function(b){return b.Status==parseInt(a)})),$.trim(b).length>0&&(e=jQuery.grep(e,function(a){return a.ProjectName.toLowerCase().indexOf(b)>-1})),0==$.trim(b).length&&0==$("#ddlDeploystatus").val().length&&(e=d),c.localdata=e,$("#jqxDeployGrid").jqxGrid({source:_vrDeployData}),_vrDeployData.localdata=d,disableJqxPagerButtonsOnLoad("jqxDeployGrid"),$("#divDeployLoading").css("display","none")}catch(f){$("#divDeployLoading").css("display","none")}}function LoadDeploymentCountDetails(){_BaseUrl=_vrLocationOrigin+"/Project/GetChecklistStatusCount?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindDeployRecordsCount)}function bindDeployRecordsCount(a){var b=a;$("#lblNewDeployDisplayCount").text(b[0].Status),$("#lblDeployedDisplayCount").text(b[2].Status),$("#lblTobeDeployDisplayCount").text(b[1].Status)}function bindJqxGrid(a){var b="",c="";$("#idSpnLoading").css("display","block"),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager&&($("#imgNewTask").css("display","none"),$("#btnRefreshTasksGrid").css("margin-right","80px"),$("#btnExportTasks").css("margin-right","-27px"));var d="";if("0"!=$(".clsusertasks .clstasksfields").length||"0"!=$("#MagnifierDialog .clstasksfields").length){setLocalStorageFromDialog("jqxTasksgrid",_vrProjectsTasksWidth),"undefined"!=typeof a?"undefined"!=typeof a&&a.RecordCount>0?d=a.MultipleResults:"undefined"!=typeof a&&0==a.RecordCount?d=[]:"undefined"!=typeof a&&(d=a):d=[];var e=sortingcolumns("jqxTasksgrid");b=e.vrSortColumnName,c=e.vrSortOrder,_vrTasksData={datatype:"json",type:"GET",cache:!1,datafields:_vrTasksDataFields,localdata:d,pagesize:_vrDefaultTaskSizer},$("#jqxTasksgrid").jqxGrid({width:_vrProjectsTasksWidth,source:_vrTasksData,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,pagermode:"simple",filterable:!0,autosavestate:!0,autoloadstate:!0,columns:_vrTasksColumns,columnsresize:!0}),disableJqxPagerButtonsOnLoad("jqxTasksgrid"),$("#jqxTasksgrid").on("pagechanged",function(a){disableEnablePagingButtons("jqxTasksgrid",a)
}),filterTaskTrailSprintDataJqxGrid(),bindLoggedUserTaskCount(),$(".clsslideinner").find("button").prop("disabled",!1),_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId||0!=_vrUserIsProjManager||($("#lnkNewTask").css("color","#B3BFCB"),$("#imgNewTask").css("display","none"),$("#btnRefreshTasksGrid").css("margin-right","80px"),$("#btnExportTasks").css("margin-right","-22px")),$("#idSpnLoading").css("display","none"),$("#imgTasksMagnify").attr("disabled",!1),setRecordCountPosition("jqxTasksgrid"),sortOrderUserPref("jqxTasksgrid",b,c)}}function bindBugTrial(a){var b="",c="";$("#idBugTrailLoading").css("display","block");var d=[];if("0"!=$(".clsbugtrail #idBugTrail").length||"0"!=$("#MagnifierDialog #jqxBugTrial").length){if("undefined"!=typeof a?"undefined"!=typeof a&&a.RecordCount>0?d=a.MultipleResults:"undefined"!=typeof a&&0==a.RecordCount?d=[]:"undefined"!=typeof a&&(d=a):d=[],setLocalStorageFromDialog("jqxBugTrial",_vrProjectsTasksWidth),$("#MagnifierDialog #idBugTrail").length>0&&0==_vrTskOpenBugDialog)loadJqxBugGrid(d);else if($("#MagnifierDialog #idTskOpenBugTrail").length>0&&1==_vrTskOpenBugDialog)_vrBugsData={datatype:"json",type:"GET",cache:!1,datafields:_vrBugDataFields,localdata:d,pagesize:_vrDefaultBugSizer},$("#jqxTskBugTrial").jqxGrid({width:_vrProjectsMagTasksWidth,source:_vrBugsData,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,pagermode:"simple",filterable:!0,autosavestate:!0,autoloadstate:!0,columns:_vrBugTrailColumns,columnsresize:!0,pagesize:14}),disableJqxPagerButtonsOnLoad("jqxTskBugTrial"),$("#jqxTskBugTrial").on("pagechanged",function(a){disableEnablePagingButtons("jqxTskBugTrial",a)}),$("#jqxTskBugTrial").jqxGrid("refreshData");else{var e=sortingcolumns("jqxBugTrial");b=e.vrSortColumnName,c=e.vrSortOrder,_vrBugsData={datatype:"json",type:"GET",cache:!1,datafields:_vrBugDataFields,localdata:d,pagesize:_vrDefaultBugSizer},$("#jqxBugTrial").jqxGrid({width:_vrProjectsTasksWidth,source:_vrBugsData,sortable:!0,pageable:!0,pagerbuttonscount:3,autoheight:!0,enabletooltips:!0,pagermode:"simple",filterable:!0,autosavestate:!0,autoloadstate:!0,columns:_vrBugTrailColumns,columnsresize:!0}),disableJqxPagerButtonsOnLoad("jqxBugTrial"),$("#jqxBugTrial").on("pagechanged",function(a){disableEnablePagingButtons("jqxBugTrial",a)})}LoadBugsOnBugClick(),$("#idTskBugTrailLoading").css("display","none"),$("#idBugTrailLoading").css("display","none"),$("#imgBugTrMagnify").attr("disabled",!1),$(".clsslideinner").find("button").prop("disabled",!1),setRecordCountPosition("jqxBugTrial"),sortOrderUserPref("jqxBugTrial",b,c)}}function linkrendertask(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);return null!=c&&(_TaskId=JSON.stringify(c.TaskID).toString(),_TskSubject=JSON.stringify(c.TaskName).toString(),_TskSubject=_TskSubject.replace(/'/g,"#%&%#"),_TskSubject=JSON.stringify(_TskSubject),_TskProjId=JSON.stringify(c.TaskProjectID).toString(),_BillableHours="undefined"!=typeof c.BillableHours?JSON.stringify(c.BillableHours).toString():"0",_vrTaskStatus=c.StatusType.toString()),"<img title='"+_vrTaskStatus+"'src='img/"+_vrTaskStatus+".ico' class='clsstatusimginner'/><a class='clstaskidlink' href='#' onclick='taskLink("+_TaskId+","+_TskProjId+","+_TskSubject+")'>"+_TaskId+"</a>"}catch(d){}}function linkrendertaskname(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){_TaskId=JSON.stringify(c.TaskID).toString(),_TskSubject=JSON.stringify(c.TaskName).toString();var d=c.TaskName;_TskSubject=_TskSubject.replace(/'/g,"#%&%#"),_TskSubject=JSON.stringify(_TskSubject),_TskProjId=JSON.stringify(c.TaskProjectID).toString(),_BillableHours="undefined"!=typeof c.BillableHours?JSON.stringify(c.BillableHours).toString():"0",_vrTaskStatus=c.StatusType.toString()}return"<div class='clstsktrltaskname clsaddellipsis'><a  href='#' onclick='taskLink("+_TaskId+","+_TskProjId+","+_TskSubject+")'>"+d+"</a></div>"}catch(e){}}function linkrenderbug(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);return 0!=c.RecordCount&&(_BugId=JSON.stringify(c.Bugid).toString()),"<a  href='#' class='clsbugidlink' onclick='bugLink("+_BugId+")'>"+_BugId+"</a>"}catch(d){}}function taskBRLink(a,b,c){_vrLocalBRDataOnTaskClick=null,_vrLocalBRDataOnTaskClick=JSON.parse(localStorage.getItem("jqxGridjqxBillingReport")),taskLink(a,b,c)}function getEditProjectManager(a){_vrEditProjManager=a[0].IsProjectManager,1==vrLoginRoleId||1==_vrEditProjManager?($("#imgedittsk").css("display","inline"),$(".clsShowOpnBugs").css("margin-left","10px"),$("#lblBeyondScope").css("margin-top","6px")):($("#imgedittsk").css("display","none"),$("#lblBeyondScope").css("margin-top","-2px"),$(".clsShowOpnBugs").css("margin-left","40px"))}function SummaryTaskLink(a,b,c){_vrEditTaskDetails=1,_vrattachedFiles=1,taskLink(a,b,c)}function taskLink(a,b,c){try{_vrUpdatedStatus="";$("#txtTaskComments").length>0&&$("#txtTaskComments").val(""),$("#txtCommInformTo").val().length>0&&$("#txtCommInformTo").val(""),$("#ddlNewTskInformTo").val("");var d=$("#MagnifierDialog").dialog("option","title");d==_vrUserDetDialogHdr&&(_vrTaskDataOnCPUOnTaskClick=null,_vrTaskDataOnCPUOnTaskClick=$("#jqxPreviewGrid").jqxGrid("getpaginginformation")),$("#divMainLoader").css("display","inline");var e=b.toString();_BaseUrl=_vrLocationOrigin+"/Task/GetProjectManagerDetails?strProjectID="+e+"&strEmpID="+_EmpId,ajaxCall(_BaseUrl,getEditProjectManager);var f="";f=a+","+b+","+c,$("#imgedittsk").attr("value",f),$("#btnResetComm").click(),d==_vrProjDetDialogHdr&&(_vrTaskDataOnCPUOnTaskClick=null,_vrTaskDataOnCPUOnTaskClick=$("#jqxPreviewGrid").jqxGrid("getpaginginformation")),_vrLocalTaskDataOnTaskClick=null,_vrLocalTaskDataOnTaskClick=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid")),$("#btnResetComm").click(),_BaseUrl=_vrLocationOrigin+"/Task/GetTaskHistoryDataUsingTaskID?intTaskID="+a+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindComments),$("#lblTaskId").text(a),c=c.replace(/#%&%#/g,"'"),_vrTxtTskId=a,_vrTxtOpenBugTaskId=a;var g=checkJson(c);if(g)var h=JSON.parse(c);else var h=c;$("#lblTskSubject").text(h),$("#txtTskProjId").text(b),_vrTxtTskProjId=b,_vrMailTaskName=h,$("#dailog").dialog("open"),$(".clsdailogfields").css("display","none"),$("#idShowTaskComments").css("display","inline-block"),$("#dailog").dialog("option","title",_vrDialogBoxTaskTrail+" : "+a+" - "+h),_vrTskSubject=h,_vrDialogBoxTitle=_vrDialogBoxTaskTrail,_BaseUrl=_vrLocationOrigin+"/Task/GetTaskDataUsingTaskID?intTaskID="+a+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,getTaskHistoryForComments),_vrOpenBugs=0,_BaseUrl=_vrLocationOrigin+"/task/GetOpenBugs?intTaskID="+a+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,getOpenBugsCount),$("#idInnerShowComments").scrollTop(0),$("#ddlAssTask").empty(),$("#ddlAssTask").append("<option value='0'>Select task</option>"),_BaseUrl=_vrLocationOrigin+"/Task/GetAssociatedTaskDetails?intTaskID="+a+"&&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskAssociate),event.preventDefault()}catch(i){}}function checkJson(a){try{return JSON.parse(a),!0}catch(b){return!1}}function getOpenBugsCount(a){if($("#lblShowOpenBugs").text("0"),"undefined"!=typeof a){_vrOpenBugs=a[0].BugCount,$("#lblShowOpenBugs").text(_vrOpenBugs)}}function bindFixedBugsCount(a){if("undefined"!=typeof a&&0!=a.length){var b=a[0];$("#lblHdrBugsOpen").text(b.BugCount)}}function bugLink(a){try{$("#divMainLoader").css("display","inline"),_vrLocalBTDataOnBugClick=null,_vrLocalBTDataOnBugClick=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial")),clearBugDetailsFields(),1==_vrTskOpenBugDialog&&(_vrTskddlProjId=$("#ddlTskOpenBugTrProject").val(),_vrTskddlTaskId=$("#ddlTskOPenBugTrTaskName").val(),_vrTskddlStatus=$("#ddlTskOpenBugStatus").val(),_vrTskddlEmpName=$("#ddlTskOpenBugTrEmp").val(),_vrTskblnProjId="0"==_vrTskddlProjId?!1:!0,_vrTskblnTaskId="0"==_vrTskddlTaskId?!1:!0,_vrTskblnStatus="0"==_vrTskddlStatus?!1:!0,_vrTskblnEmpName="0"==_vrTskddlEmpName?!1:!0,_vrTskBugTrFromDate=$("#txtTskOpenBugTrFromDate").val(),_vrTskBugTrToDate=$("#txtTskOpenBugTrToDate").val()),_BaseUrl=_vrLocationOrigin+"/Bug/GetBugTrailData?intBugID="+a+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,BindBugFields),$("#btnUpdateBug").attr("disabled",!0),event.preventDefault()}catch(b){}}function TaskbugLinkId(a){try{$("#divMainLoader").css("display","inline"),_BaseUrl=_vrLocationOrigin+"/Bug/GetBugTrailData?intBugID="+a+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,BindBugFieldsDetails),event.preventDefault()}catch(b){}}function BindBugFieldsDetails(a){try{$("#divBugDetAttachedFiles").empty(),$("#divBugRecorddetails").dialog("option","title",_vrDialogBoxBugDetails+"#"+a[0].BugID),_vrDialogBoxTitle=_vrDialogBoxBugDetails,$("#divBugRecorddetails").css("display","inline-block"),$(".clsexistedbugfields").css("display","inline-block"),$(".clssavebug").css("display","none"),$("#divBugRecorddetails").dialog("open"),_vrExistingBugTaskId=JSON.stringify(a[0].TaskID),_vrExistingBugProjId=JSON.stringify(a[0].ProjectID),_vrExistingBugTaskSubject=JSON.stringify(a[0].TaskName),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+a[0].ProjectID+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagNewBugFields);var b=a[0].Browsers.replace(/\,/g,", ");if($("#lblBugIdDet").text(a[0].BugID),$("#txtBugProjectName").text(a[0].ProjectName),$("#txtBugDetTaskName").text(a[0].TaskName),$("#txtBugDetBugPriority").text(a[0].BugPriorityType),$("#txtBugDetBugSeverity").text(a[0].SeverityType),$("#txtBugDetBugType").text(a[0].BugType),$("#txtBugDetBugReproducible").text(a[0].BugReproducibleType),$("#txtBugDetBugStatus").text(a[0].BugStatusType),$("#txtBugDetCreatedDate").text(formatCommentsDate(a[0].CreatedDate)),$("#txtBugDetCreatedBy").text(a[0].EmpFirstName),$("#txtBugDetBrowsers").text(b),$("#txtBugDetComments").text(a[0].BugDscrptn),_vrNewBugAttachedFiles="undefined"==typeof a[0].AttachedFiles?"":a[0].AttachedFiles,$.trim(a[0].AttachedFiles).length>0)for(var c=a[0].AttachedFiles.split("~"),d=0;d<c.length;d++)$.trim(c[d]).length>0&&$("#divBugDetAttachedFiles").append("<div class='clshrefupdatedbug'><a href='"+_vrAttachedFilesPath+c[d]+"' title='"+c[d]+"' target='_blank'>"+CropTextHtml(c[d],_vrUpdateLimitFileName)+"</a></div>");$("#divMainLoader").css("display","none"),event.preventDefault()}catch(e){}}function BindBugFields(a){try{if("undefined"==typeof a)return $("#divBugIdInfo").css("display","inline"),void setTimeout(function(){$("#divBugIdInfo").fadeOut()},_vrSetTime);if(1==_vrTskOpenBugDialog&&(_vrTskBugOpend=1,$("#MagnifierDialog").dialog("close")),clearBugDetailsFields(),$("#divBugAttachedFiles").empty(),$("#dailog").dialog("option","title",_vrDialogBoxBugDetails),_vrDialogBoxTitle=_vrDialogBoxBugDetails,$(".clsdailogfields").css("display","none"),$("#idShowBugDetails").css("display","inline-block"),$(".clsexistedbugfields").css("display","inline-block"),$(".clssavebug").css("display","none"),$("#idTskOpenBugTrail").css("display","none"),$("#dailog").dialog("open"),1==_vrTskOpenBugDialog&&$("#btnGoToTask").css("display","none"),_vrExistingBugTaskId=JSON.stringify(a[0].TaskID),_vrExistingBugProjId=JSON.stringify(a[0].ProjectID),_vrExistingBugTaskSubject=JSON.stringify(a[0].TaskName),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+a[0].ProjectID+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagNewBugFields),"undefined"!=typeof a[0].Browsers){var b=a[0].Browsers.replace(/\,/g,", ");$("#txtBrowsers").val(b)}else $("#txtBrowsers").val();if($("#lblBugId").text(a[0].BugID),void 0!==$("#ddlBugProjectName option[value='"+a[0].ProjectID+"']").val()&&$("#ddlBugProjectName").val(a[0].ProjectID),$("#ddlNewBugPriority").val(a[0].BugPriorityID),$("#ddlNewBugSeverity").val(a[0].SeverityID),$("#ddlNewBugType").val(a[0].BugTypeID),$("#ddlNewBugReproducible").val(a[0].BugReproducibleID),$("#ddlNewBugStatus").val(a[0].BugStatusID),$("#txtBugCreatedDate").val(formatCommentsDate(a[0].CreatedDate)),$("#txtBugCreatedBy").val(a[0].EmpFirstName),$("#txtBugComments").val(a[0].BugDscrptn),_vrNewBugAttachedFiles="undefined"==typeof a[0].AttachedFiles?"":a[0].AttachedFiles,$.trim(a[0].AttachedFiles).length>0)for(var c=a[0].AttachedFiles.split("~"),d=0;d<c.length;d++)$.trim(c[d]).length>0&&$("#divBugAttachedFiles").append("<div class='clshrefupdatedbug'><a href='"+_vrAttachedFilesPath+c[d]+"' title='"+c[d]+"' target='_blank'>"+CropTextHtml(c[d],_vrUpdateLimitFileName)+"</a><img src='img/closeicon.ico' class='clsupdatedfileremove'/><img src='img/revert.ico' class='clsfileremovecancel'/></div>");$("#divMainLoader").css("display","none"),event.preventDefault()}catch(e){}}function getTaskRelEmps(a){var b=a[0].LstProjectEmployees,c=a[0].LstModules[0];try{_vrInformToText="",$("#ddlAssignTo").empty(),$("#ddlCommInformTo").empty(),$("#ddlCommInformTo").append("<option value='-1' text='Select'>Select inform to</option>");for(var d=0;d<b.length;d++)$("#ddlAssignTo").append("<option value="+b[d].EmpID+">"+b[d].EmpFirstName+"</option>"),$("#ddlCommInformTo").append("<option value='"+b[d].EmpID+"'text='"+$.trim(convertDoubleSingleQuotetoNormalChar(b[d].EmpFirstName))+"'>"+$.trim(b[d].EmpFirstName)+"</option>");_vrInformToText=getInformPersonNames("ddlCommInformTo",_vrInformTo),$("#txtCommInformTo").val(_vrInformToText),$("#ddlAssignTo").val(_vrAssignedTo),bindModuleName(c)}catch(e){}}function getInformPersonNames(a,b){for(var c=b.split(","),d="",e=0;e<c.length;e++)if(c[0].length>0)try{d+=$("#"+a+" option[value="+$.trim(c[e])+"]").text()+", "}catch(f){}return d.substr(0,d.length-2)}function getTaskHistoryForComments(a){a=a[0];var b="undefined"==typeof a.ExpectedHours?"0":a.ExpectedHours.toString(),c="undefined"==typeof a.BillableHours?"0":a.BillableHours.toString(),d="undefined"==typeof a.NonBillableHours?"0":a.NonBillableHours.toString(),e="undefined"==typeof a.TaskDueDate?"":a.TaskDueDate;$("#lblEffPlanned").text(displayFormat(b)),$("#lblTotalBillable").text(displayFormat(c)),$("#lblTotalNonBillable").text(displayFormat(d)),$("#lblDueDate").text(e),cropText($("#lblProjName"),a.TaskProjectName,15),_vrTxtTskProjName="",_vrTxtTskProjName=a.TaskProjectName,cropText($("#lblTaskOwner"),a.TaskOwner,15),_vrMailTskPrjName=a.TaskProjectName,_vrMailTskOwnerName=a.TaskOwner,_vrMailTskOwnerID=a.OwnerID,_vrTaskPriorityId=a.TaskPriorityID,_vrTaskStatusId=a.TaskStatusID,_vrInformTo=a.InformTo,_vrAssignedTo=a.AssignedTo,fetchCommentFields();var f=a.TaskCreatedDate.split(" "),g=f[0].split("/");_vrTaskCreatedDate=g[1]+"/"+g[0]+"/"+g[2],TaskCreateDate()}function TaskCreateDate(){$("#txtCommdate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:"-1d",showButtonPanel:!0,changeMonth:!0,changeYear:!0,beforeShow:function(a,b){b.dpDiv.css({marginTop:"0px",marginLeft:a.offsetWidth-$(".ui-datepicker").width()+"px"})},onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:""});$("#txtCommdate").datepicker("option","minDate",_vrTaskCreatedDate)}function bindModuleName(a){$("#ddlSelectModule").empty(),$("#ddlSelectModule").append("<option value=''>Select module</option>"),bindArrayToDropDown(a.ModuleName,"ddlSelectModule"),$("#ddlSelectModule").val($.trim(_vrTaskModule).length>0&&"-1"!=_vrTaskModule?_vrTaskModule:"")}function updateTaskStatus(a){var b=0==$("#txtCommMoreHours").val().length?0:replaceColon($("#txtCommMoreHours").val()),c=0==$("#txtCommBillHours").val().length?0:replaceColon($("#txtCommBillHours").val()),d=0==$("#txtCommNonBillableHours").val().length?0:replaceColon($("#txtCommNonBillableHours").val()),e=replaceColon($("#lblEffPlanned").text()),f=replaceColon($("#lblTotalBillable").text()),g=replaceColon($("#lblTotalNonBillable").text()),h=$("#ddlSelectModule").val();try{var i=parseFloat(e)+parseFloat(b),j=parseFloat(f)+parseFloat(c),k=parseFloat(g)+parseFloat(d);_vrTaskHistoryID=a.SingleResult.TaskHistoryID;var l={TaskID:$("#lblTaskId").text(),TaskStatusID:$("#ddlStatus").val(),AnticipatedHours:i,TotalBillableHours:j,TotalNonBillableHours:k,InformTo:_vrUpdatedInformToText,TaskDueDate:$("#txtDueDate").val(),AssignedTo:$("#ddlAssignTo").val(),ModuleName:h,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Task/updateTaskStatus",ajaxCallWithObject(_BaseUrl,l,insertEstimation)}catch(m){$("#divMainLoader").css("display","none"),displayMessage(_vrAlert,_vrSomeThingError)}}function insertEstimation(){var a=$("#txtCommdate").val(),b="00:00:00",c="";if(""!=a){var d=a.split("/"),e=d[2]+"-"+d[1]+"-"+d[0]+" "+b;c=e,_vrFlagReloadGraph="1"}else c="";var f=replaceColon($("#lblTotalBillable").text()),g=replaceColon($("#lblTotalNonBillable").text()),h=parseFloat(f)+parseFloat(g),i=localStorage.getItem("LoggedEmpName"),j=i.split(" "),k=j[0],l=$("#lblTaskId").text(),m=0==$("#txtCommBillHours").val().length?0:replaceColon($("#txtCommBillHours").val()),n=0==$("#txtCommMoreHours").val().length?0:replaceColon($("#txtCommMoreHours").val());vrHrsNonBill=0==$("#txtCommNonBillableHours").val().length?0:replaceColon($("#txtCommNonBillableHours").val());var o=parseFloat(h)+parseFloat(m)+parseFloat(vrHrsNonBill);o=displayFormat(o);var p=($("#lblLogin").text(),$("#ddlAssignTo").val()),q=$("#ddlAssignTo option:selected").text(),r=0==$.trim($("#txtCommBillHours").val()).length?"00:00":$("#txtCommBillHours").val(),s=0==$.trim($("#txtCommNonBillableHours").val()).length?"00:00":$("#txtCommNonBillableHours").val(),t=$("#txtTaskComments").val();$.trim($("#txtNonBillableComm").val()).length>0&&(t+=_vrNonBillMailComments+":"+$("#txtNonBillableComm").val());var u={TaskID:l,TaskHistoryID:_vrTaskHistoryID,EmpID:_EmpId,CreatedOn:c,BillableHours:m,NonBillableHours:vrHrsNonBill,MoreHours:n,TokenID:_vrUserTokenId,AssignedToID:p,LoggedInEmpName:$("#lblLogin").text(),OwnerName:_vrMailTskOwnerName,AssignedToName:q,StatusType:$("#ddlStatus option:Selected").text(),ProjectName:_vrMailTskPrjName,TaskName:_vrMailTaskName,Comments:t,OwnerID:_vrMailTskOwnerID,InformTo:_vrUpdatedInformToText,BillalbleAccHours:r,NonBillableAccHours:s,TotalHours:o,EmpFirstName:k};_VrReloadEmpHours=_vrResponseId,_vrCommentCreatedFlag=_vrResponseId,vrSaveCommentClick=1,$("#btnResetComm").click(),_vrSaveExitClick==_vrSaveExitFlag?($("#dailog").dialog("close"),$("#MagnifierDialog").dialog("isOpen")===!1&&$("#idSpnLoading").css("display","block"),_BaseUrl=_vrLocationOrigin+"/Task/InsertTaskEstimation",ajaxCallWithObject(_BaseUrl,u,reloadTasksGrid),_BaseUrl=_vrLocationOrigin+"/Task/GetBillingDetails?intEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindBillingHours)):(_BaseUrl=_vrLocationOrigin+"/Task/InsertTaskEstimation",ajaxCallWithObject(_BaseUrl,u,reloadComments)),_BaseUrl=_vrLocationOrigin+"/mobile/PrjctBugDetails?intEmployeeID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFixedBugsCount)}function reloadComments(){_VrReloadEmpHours.length>0&&(_BaseUrl=_vrLocationOrigin+"/Task/GetBillingDetails?intEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindBillingHours));var a=$("#lblTaskId").text(),b=JSON.stringify($("#lblTskSubject").text()),c=$("#txtTskProjId").text();taskLink(a,c,b),"1"==_vrFlagReloadGraph&&(loadBARData(),LoadBARDataToSlider(),_vrFlagReloadGraph="0")}function bindStatus(a){$("#ddlTskTrailStatus").empty(),$("#ddlStatus").empty(),$("#ddlTskTrailStatus").append("<option value='0' title='Select status'>Select status</option>");for(var b=0;b<a.length;b++){var c=a[b].StatusType;$("#ddlTskTrailStatus").append("<option value="+a[b].StatusId+">"+c+"</option>"),$("#ddlStatus").append("<option value="+a[b].StatusId+">"+c+"</option>")}_vrWidgetCOntrolData.length>0&&_taskIndexNO>-1&&parseInt(_vrWidgetCOntrolData[_taskIndexNO].ddlTskTrailStatus)>=0&&$("#ddlTskTrailStatus").val(_vrWidgetCOntrolData[_taskIndexNO].ddlTskTrailStatus)}function bindBugStatusWidget(a){$("#ddlBugStatus").jqxDropDownList({checkboxes:!0,source:a,displayMember:"BugStatusType",valueMember:"BugStatusId",scrollBarSize:13,width:109,height:24,placeHolder:"Select status",promptText:"Select status",autoDropDownHeight:!0}),$("#ddlBugStatus").jqxDropDownList("setContent","Select status"),$("#ddlBugStatus").jqxDropDownList("checkAll");$("#ddlBugStatus").jqxDropDownList("getItems");$("#ddlBugStatus").on("checkChange",function(a){var b=a.args.item;0==b.checked&&($("#idUnselectAllimg").css("display","none"),$("#idSelectAllimg").css("display","inline"))})}function bindBugStatusWidget(a){$("#ddlBugStatus").jqxDropDownList({checkboxes:!0,source:a,displayMember:"BugStatusType",valueMember:"BugStatusId",width:130,height:24,placeHolder:"Select status",promptText:"Select status",autoDropDownHeight:!0}),$("#ddlBugStatus").jqxDropDownList("checkAll"),$("#ddlBugStatus").jqxDropDownList("uncheckIndex",5),$("#ddlBugStatus").jqxDropDownList("uncheckIndex",7),$("#ddlBugStatus").jqxDropDownList("uncheckIndex",8),$("#ddlBugStatus").jqxDropDownList("insertAt","Select all",0),$("#ddlBugStatus").jqxDropDownList("setContent","Select status");var b=$("#ddlTskTrailStatus").jqxDropDownList("getItems");$("#ddlBugStatus").on("checkChange",function(a){var c=a.args.item;if("Select all"==a.args.label&&1==c.checked)for(var d=1;d<b.length;d++)$("#ddlBugStatus").jqxDropDownList("checkIndex",d);else if("Select all"==a.args.label&&0==c.checked)for(var d=1;d<b.length;d++)$("#ddlBugStatus").jqxDropDownList("uncheckIndex",d)})}function bindBillingHours(a){try{var b=parseFloat(a[0].MonthBillableHours)+parseFloat(a[0].MonthNonBillableHours),c=parseFloat(a[0].WeekBillableHours)+parseFloat(a[0].WeekNonBillableHours),d=parseFloat(a[0].TodayBillableHours)+parseFloat(a[0].TodayNonBillableHours);b=isNaN(b)?_vrDefaultFmt:displayFormat(b),c=isNaN(c)?_vrDefaultFmt:displayFormat(c),d=isNaN(d)?_vrDefaultFmt:displayFormat(d);var e=b.length>_vrHrsLengthDefault?_vrMonthHrs:_vrHrsLengthDefault,f=c.length>_vrHrsLengthDefault?_vrWeekHrs:_vrHrsLengthDefault;if(cropText($("#lblMonthBillHours"),b,e),cropText($("#lblWeekBillHours"),c,f),$("#lblTodayBillHours").text(d),$("#lblTodayBillHours").attr("title",d),1==_vrSuccessStatus){_vrSuccessStatus="";var g=$("#txtFromDate").val().split("/"),h=$("#txtToDate").val().split("/"),i=g[2]+"-"+g[1]+"-"+g[0],j=h[2]+"-"+h[1]+"-"+h[0];getReports(i,j)}if(1==_vrSuccessBillingFlag){_vrSuccessBillingFlag="";var g=$("#txtFromDate").val().split("/"),h=$("#txtToDate").val().split("/"),i=g[2]+"-"+g[1]+"-"+g[0],j=h[2]+"-"+h[1]+"-"+h[0];viewBillingSummaryReport(i,j)}}catch(k){}}function bindComments(a){try{if($("#idInnerShowComments").empty(),"undefined"==typeof a||0==$.trim(a).length)return void $("#divMainLoader").css("display","none");var b=a;_vrBeyondScope=b[0].BeyondScope,_vrNonBillableTask=b[0].NonBillableTask,1==_vrBeyondScope||"True"==_vrBeyondScope?($("#chkBeyondScope").prop("checked",!0),_vrBeyondScope=!0):($("#chkBeyondScope").prop("checked",!1),_vrBeyondScope=!1),1==_vrNonBillableTask||1==$("#ddlStatus").val()?($("#txtCommBillHours").prop("disabled",!0),$("#txtCommBillHours").css("background-color","rgb(131, 131, 131)"),1==_vrNonBillableTask?($("#txtNonBillableComm").css("display","inline"),$("#txtTaskComments").css("display","none")):($("#txtNonBillableComm").css("display","none"),$("#txtTaskComments").css("display","inline"))):($("#txtCommBillHours").prop("disabled",!1),$("#txtCommBillHours").css("background-color","transparent"),$("#txtNonBillableComm").css("display","none"),$("#txtTaskComments").css("display","inline")),_vrTaskModule="undefined"==typeof b[0].TaskModuleName?"":b[0].TaskModuleName,$("#idInnerShowComments").empty(),$("#ddlSelectModule").val(_vrTaskModule);for(var c=0;c<b.length;c++){{"undefined"==typeof b[c].NonBillableHour?"0":b[c].NonBillableHour}if(void 0!=b[c].AssignedBy)var d=b[c].AssignedBy.replace(/\"/g,"_@-").replace(/\'/g,"@_@");var e=_vrMainWebstationPath+_EmpDefaultPic,f=_vrMainWebstationPath+d+_vrPicExt,g="undefined"==typeof b[c].AttachedFiles?"":b[c].AttachedFiles,h="undefined"==typeof b[c].StatusType?"     ":b[c].StatusType,i=formatCommentsDate(b[c].CreatedOn),j=b[c].Comments;if("undefined"!=typeof b[c].Comments?j=b[c].Comments.indexOf("<")>-1?handleScriptTags(j):j:"undefined"!=typeof b[c].TaskBugID?j="<div class='clstaskbugdisplay'><div class='clsbugrecorded'>Bug recorded</div><div class='clsbugid'>Bug id:   <span>"+b[c].TaskBugID+"</span></div><img src='img/viewdetails.png' class='clsbugrecorddetails'onclick=TaskbugLinkId("+b[c].TaskBugID+")  /></div>":"undefined"==typeof b[c].Comments&&"undefined"==typeof b[c].TaskBugID&&(j=""),void 0!=b[c].AssignedBy)var k="<div class='clsAllComments' ><div><img src='"+f+"' OnError= this.src='"+e+"' class='clsImgProfile'/></div><div class='arrow-left'></div><div  class='clsTskComments'><div class='clsEmpName'><label title='"+b[c].AssignedBy+"'>"+CropTextHtml(b[c].AssignedBy,_vrAssignedByName)+"</label> <label class='clsCommentedTime '>("+i+")</label><label>Status:</label><label class='clsLblHeader'>"+h+"</label><label>Bill:</label><label class='clsLblHeader'>"+displayFormat(b[c].BillableHours)+"</label> <label>Non-bill:</label><label class='clsLblHeader'>"+displayFormat(b[c].NonBillableHours)+"</label><div class='clsAttachedFile'><a target='_blank' href='"+_vrAttachedFilesPath+encodeURIComponent(g)+"'>"+g+"</a></div></div><div class='clsEmpComments'><pre class='clsInnerComments'>"+j+"</pre></div></div></div>";$(k).appendTo("#idInnerShowComments")}if(a.length>=0){var l=a.length-1;_vrTskCreatOn=a[l].CreatedOn,_vrTskCreatOn=_vrTskCreatOn.split(" ")[0]}$("#divMainLoader").css("display","none")}catch(m){$("#divMainLoader").css("display","none")}}function reloadTasksGrid(){try{if($("#divMainLoader").css("display","none"),ClearNewTaskFields(),$(".clstasks").length>0){var a=$("#ddlTaskTrailEmployee").val(),b=$("#ddlTaskTrailProject").val(),c=$("#chkFilterTasks").is(":checked");bindTasksBasedOnClientID(b,a,c,loadJqxTasksGrid),$("#MagnifierDialog").dialog("isOpen")===!0&&_vrMagnifyCloneTitle==_vrProjDetDialogHdr?($("#imgMagnifydialogLoader").css("display","block"),_BaseUrl=_vrLocationOrigin+"/Task/GetInProgTasksByProjId?intProjId="+_vrSelectedProjectProjId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindInProgTasks)):$("#MagnifierDialog").dialog("isOpen")===!0&&_vrMagnifyCloneTitle==_vrDialogBoxUser&&($("#imgMagnifydialogLoader").css("display","block"),bindTasksBasedOnClientID(_vrDdlDefault,_vrMagnifyUserId,_vrBlnExcludeDefault,bindUserMagnifyGrid)),_vrSaveExitClick==_vrSaveExitFlag&&(_BaseUrl=_vrLocationOrigin+"/Task/GetBillingDetails?intEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindBillingHours),_vrSaveExitClick="");var d=$(".clsBillingReport").attr("data-col");"undefined"!=typeof d&&loadjqxBillingReportGrid(),$("#idSpnLoading").css("display","none")}null!=_vrLocalBRDataOnTaskClick&&(localStorage.setItem("jqxGridjqxBillingReport",JSON.stringify(_vrLocalBRDataOnTaskClick)),$("#jqxBillingReport").jqxGrid("gotopage",_vrLocalBRDataOnTaskClick.pagenum)),"1"==_vrFlagReloadGraph&&(loadBARData(),LoadBARDataToSlider(),_vrFlagReloadGraph="0")}catch(e){}}function getDateTime(a){try{if(a=new Date(a),date_now=new Date,seconds=Math.floor((date_now-a)/1e3),minutes=Math.floor(seconds/60),hours=Math.floor(minutes/60),days=Math.floor(hours/24),hours-=24*days,minutes=minutes-24*days*60-60*hours,seconds=seconds-24*days*60*60-60*hours*60-60*minutes,seconds>=0&&minutes>=0&&hours>=0&&days>0)return days+" days";if(seconds>=0&&minutes>=0&&hours>0&&0==days)return hours+" hours";if(seconds>=0&&minutes>0&&0==hours&&0==days)return minutes+" min";if(seconds>0&&0==minutes&&0==hours&&0==days)return seconds+" sec"}catch(b){}}function getBRPoints(a){try{bindNewDataToChart(a);LoadDataToBARControls(),$("#idBARLoading").css("display","none")}catch(b){$("#idBARLoading").css("display","none"),$("#divMainLoader").css("display","none")}("1"==_UserRoleId||1==_vrUserIsProjManager)&&($("#imgAddScore").css("display","block"),$("#btnRefreshBarGraph").removeClass("clsrefreshbarscore"))}function multiFileUploadvalidator(a,b,c){try{var d="",e="",f=0,g=a.files[0].name,h=g.substr(0,g.lastIndexOf(".")),i=g.substr(g.lastIndexOf(".")+1,g.length-1);i=i.toLowerCase();for(var f=0,j=0;j<a.files.length;j++)f+=a.files[j].size;if(0==/^[ A-Za-z0-9_@()-]*$/.test(h))return displayMessage(_vrAlert,_vrFileNameVeirfy),$("#"+a.id).replaceWith($("#"+a.id).clone()),!1;if("-1"==jQuery.inArray(i,_vrArrValidExtensions))return displayMessage(_vrAlert,_vrValidFileFormatExtMessage),$("#"+a.id).replaceWith($("#"+a.id).clone()),!1;if(_vrSameFileName="",$("."+c).each(function(){var a=$(this).prop("title");e=e+a+"~",a==g&&(_vrSameFileName=parseInt(_vrSameFileName)+1)}),$.trim(_vrSameFileName).length>0){var k=_vrFileNameMsg+"--"+g;return displayMessage(_vrAlert,k),$("#"+a.id).replaceWith($("#"+a.id).clone()),!1}if(d=e+h+_vrNewBugAttachedFiles,f>parseInt(_vrFileSize))return displayMessage(_vrAlert,_vrAttachedFileMessage),$("#"+a.id).replaceWith($("#"+a.id).clone()),!1;if(f==_VrDefaultFileSize)return displayMessage(_vrAlert,_vrFileSizeMsg),$("#"+a.id).replaceWith($("#"+a.id).clone()),!1;b==_vrBugsFileUpload?uploadBugsFile():b==_vrNewProjFileUpload&&uploadNewProjFile()}catch(l){}}function uploadBugsFile(){_vrFileUploading=_vrFileUploadDefault,$("#flCtBugMultiUpload").prop("disabled",!0),$(".clsinsertbugdata").prop("disabled",!0),$("#imgLoaderFileUpload").css("display","inline"),_BaseUrl=_vrLocationOrigin+"/Task/ToFilesUpload?strPicFileName="+_DefaultAttachedFileName+"&strTokenID="+_vrUserTokenId,uploadFile(_BaseUrl,loadBugFileName,"flCtBugMultiUpload")}function bindDataToBugDropDownDyn(){try{_UserRoleId!=_vrClientRoleId?(_BaseUrl=_vrLocationOrigin+"/User/GetActiveEmployeeDetails?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBugEmp)):(_BaseUrl=_vrLocationOrigin+"/customer/GetCustomerProjectEmployees?intCustomerEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBugEmp)),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBugProj)}catch(a){}}function bindDataToTaskDropDownDyn(){try{_UserRoleId!=_vrClientRoleId?(_BaseUrl=_vrLocationOrigin+"/User/GetActiveEmployeeDetails?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskEmp)):(_BaseUrl=_vrLocationOrigin+"/customer/GetCustomerProjectEmployees?intCustomerEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskEmp)),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskProj)}catch(a){}}function intializeDatePicker(){$(".clsDatePicker").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy"})}function loadBugFileName(a){try{if($.trim(a.Value).length>0&&_vrFileUploading==_vrFileUploadDefault){for(var b=a.Value.toString(),c=b.split(","),d=0;d<c.length;d++)$("#divInnerAttachedFiles").append("<div class='clsnewbugdynupload'><label class='clsbugdynfilename' title='"+c[d]+"'>"+CropTextHtml(c[d],_vrLimitBugFileName)+"<a href='#'class='clsnewbugfileremove' ><img src='img/closeicon.ico'/><a></label></div>");$("#flCtBugMultiUpload").replaceWith($("#flCtBugMultiUpload").clone()),_vrFileUploading=_vrFileUploadComplete}else _vrFileUploading==_vrFileUploadCanceled&&(_vrUploadedCancFile=a.Value,deleteUploadedFile(),_vrFileUploading=_vrFileUploadComplete);$("#imgLoaderFileUpload").css("display","none"),$("#flCtBugMultiUpload").prop("disabled",!1),$(".clsinsertbugdata").prop("disabled",!1)}catch(e){_vrFileUploading=_vrFileUploadComplete,$("#imgLoaderFileUpload").css("display","none"),$("#flCtBugMultiUpload").prop("disabled",!1),$(".clsinsertbugdata").prop("disabled",!1)
}}function getTasksBasedEmployee(){try{$("#idSpnLoading").css("display","block");var a=$("#ddlTaskTrailEmployee").val(),b=$("#chkFilterTasks").is(":checked"),c=$("#ddlTaskTrailProject").val();bindTasksBasedOnClientID(c,a,b,loadJqxTasksGrid)}catch(d){}}function getTasksBasedCSDEmployee(){try{$("#idSpnLoading").css("display","block");var a=$("#ddlTaskTrailEmployee").val(),b=$("#chkFilterTasks").prop("checked",!1),c=$("#ddlTaskTrailProject").val();bindTasksBasedOnClientID(c,a,b,loadJqxTasksGrid)}catch(d){}}function LoadTaskPageNumOnTaskClick(){null!=_vrLocalTaskDataOnTaskClick&&(localStorage.setItem("jqxGridjqxTasksgrid",JSON.stringify(_vrLocalTaskDataOnTaskClick)),$("#jqxTasksgrid").jqxGrid("gotopage",_vrLocalTaskDataOnTaskClick.pagenum),0==_vrCloseDialog.length&&(_vrLocalTaskDataOnTaskClick=null))}function LoadBugsOnBugClick(){null!=_vrLocalBTDataOnBugClick&&(localStorage.setItem("jqxGridjqxBugTrial",JSON.stringify(_vrLocalBTDataOnBugClick)),$("#jqxBugTrial").jqxGrid("gotopage",_vrLocalBTDataOnBugClick.pagenum),_vrLocalBTDataOnBugClick=null)}function loadJqxTasksGrid(a){try{if("0"==$(".clsusertasks .clstasksfields").length&&"0"==$("#MagnifierDialog .clstasksfields").length)return;if(a!=_vrFlagData&&(_vrTasksData.localdata=a),$(".clsusertasks .clstasksfields").length>0)bindJqxGrid(_vrTasksData.localdata),LoadTaskPageNumOnTaskClick();else if($("#MagnifierDialog .clstasksfields").length>0){var b=_vrTasksData.localdata,c={datatype:"json",type:"GET",cache:!1,datafields:_vrTasksDataFields,localdata:b};bindDataToJqxInMagnifier("jqxTasksgrid",c,_vrTasksColumns,_vrProjectsMagTasksWidth),filterTaskTrailSprintDataJqxGrid(),LoadTaskPageNumOnTaskClick()}else $("#jqxTasksgrid").jqxGrid({source:_vrTasksData}),bindLoggedUserTaskCount(),disableJqxPagerButtonsOnLoad("jqxTasksgrid"),$("#jqxTasksgrid").on("pagechanged",function(a){disableEnablePagingButtons("jqxTasksgrid",a)});$("#idSpnLoading").css("display","none"),$("#MagnifierDialog .clstasksfields").length>0&&taskTrailProjectChange()}catch(d){$("#idSpnLoading").css("display","none")}}function loadJqxBugGrid(a){try{if(a!=_vrFlagData&&(_vrBugsData.localdata=a),$(".clsbugtrail #idBugTrail").length>0)bindBugTrial(_vrBugsData.localdata);else if($("#MagnifierDialog #idBugTrail").length>0){var b=_vrBugsData.localdata,c={datatype:"json",type:"GET",cache:!1,datafields:_vrBugDataFields,localdata:b};bindDataToJqx("jqxBugTrial",c,_vrBugTrailColumns,_vrBugsMagWidth),$("#jqxBugTrial").jqxGrid({source:_vrBugsData}),disableJqxPagerButtonsOnLoad("jqxBugTrial")}else $("#jqxBugTrial").jqxGrid({source:_vrBugsData}),disableJqxPagerButtonsOnLoad("jqxBugTrial"),$("#jqxBugTrial").on("pagechanged",function(a){disableEnablePagingButtons("jqxBugTrial",a)})}catch(d){}}function AjaxCallToGetProjectDataBasedOnProjectID(a,b){_BaseUrl=_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+a+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,b)}function AjaxCallToGetSprintDataBasedOnProjectID(a,b){_BaseUrl=_vrLocationOrigin+"/project/GetSprintDetails?intProjectID="+a+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,b)}function GetProjectRelatedSprintDetails(){var a=$("#ddlNewTskProject").val();""==a?($("#ddlNewTskSprint").empty(),$("#ddlNewTskSprint").append("<option value='0'>Select sprint</option>"),$("#ddlAssTaskList").empty().trigger("chosen:updated")):($("#ddlNewTskSprint").empty(),$("#ddlNewTskSprint").append("<option value='0'>Select sprint</option>"),_BaseUrl=_vrLocationOrigin+"/project/GetSprintDetails?intProjectID="+a+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskNewTaskSprintName),$("#ddlAssTaskList").empty().trigger("chosen:updated"),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+$("#ddlNewTskProject").val()+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskListAssociate))}function createNewTask(a){try{if(_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager)return!1;if(_UserRoleId==_vrClientRoleId&&0==_vrUserIsProjManager)return!1;_vrTaskChosenTaskName=[],$("#divNonSuccesTaskCreationDiv").empty(),$("#divSuccesTaskCreationDiv").empty(),$("#divNonSuccesTaskCreationDiv").css("display","none"),$("#divSuccesTaskCreationDiv").css("display","none"),$("#ddlAssTaskList").chosen(),$("#divNonSuccesTaskCreationDiv").empty(),$("#divSuccesTaskCreationDiv").empty(),$("#idDisplayCreatedTasks").css("display","none"),$("#idDisplayNonCreatedTasks").css("display","none"),$("#btnNewTaskSaveNew").css("display","inline"),$("#btnNewTaskSave").css("display","inline"),$("#btnUpdateTask").css("display","none"),$("#errNewExcelTskError").css("display","none"),$("#errExcelFile").css("display","none"),_vrProjectIDedit="",_vrEditSprintID="",_vrEditAssignedTo="",_vrEditModuleName="",_vrEditInformTo="",_vrEditCustomerID="",ClearNewTaskFields(),$(".clsNewTskDropdown").empty(),$("#ddlNewTskProject").attr("disabled",!0),$("#ddlNewTskSprint").attr("disabled",!0),$("#ddlNewTskModule").attr("disabled",!0),$("#ddlNewTskAssignTo").attr("disabled",!0),$("#ddlNewTskInformTo").attr("disabled",!0),$("#ddlAssTaskList").attr("disabled",!0).trigger("chosen:updated");var b=$("#MagnifierDialog").dialog("option","title");if(b==_vrTaskTrailTitle&&(_vrLocalTaskDataOnTaskClick=null,_vrLocalTaskDataOnTaskClick=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid"))),_BaseUrl=_vrLocationOrigin+"/Task/GetPrioritiesList?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagPriority),_BaseUrl=_vrLocationOrigin+"/Task/GetTaskCategories?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskCategory),_UserRoleId==_vrClientRoleId?(_BaseUrl=_vrLocationOrigin+"/customer/GetCustomerNames?strTokenID="+_vrUserTokenId+"&intEmpID="+_EmpId+"&intRoleId="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskCustomer)):(_BaseUrl=_vrLocationOrigin+"/Customer/GetCustToBindDropDown?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskCustomer)),$("#ddlAssTaskList").empty().trigger("chosen:updated"),$(".clsdailogfields").css("display","none"),$("#idShowNewTask").css("display","inline"),$("#dailog").dialog("option","title",_vrDialogBoxNewTask),_vrDialogBoxTitle=_vrDialogBoxNewTask,$("#dailog").dialog("open"),$("#ddlNewTskProject").append("<option value=''>Select project</option>"),$("#ddlNewTskSprint").append("<option value=''>Select sprint</option>"),$("#ddlNewTskModule").append("<option value=''>Select module</option>"),$("#ddlNewTskAssignTo").append("<option value=''>Select assign to</option>"),$("#ddlNewTskInformTo").append("<option value=''>Select inform to</option>"),"update"==a){var c=$("#imgedittsk").attr("value"),d=c.split(",");$("#divMainLoader").css("display","inline"),$("#ddlNewTskProject").attr("disabled",!1),$("#ddlNewTskSprint").attr("disabled",!1),$("#ddlNewTskModule").attr("disabled",!1),$("#ddlNewTskAssignTo").attr("disabled",!1),$("#ddlNewTskInformTo").attr("disabled",!1),$("#ddlAssTaskList").attr("disabled",!1).trigger("chosen:updated"),_BaseUrl=_vrLocationOrigin+"/Task/GetTaskDataUsingTaskID?intTaskiD="+d[0]+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindtotasktrail)}}catch(e){}}function bindtotasktrail(a){$("#dailog").dialog("option","title","Edit task details");var b=displayFormat(a[0].ExpectedHours);$("#txtNewTskEffortPlanned").val(b),_vrTaskOwnerID=a[0].OwnerID,$("#txtNewTskName").val(a[0].TaskName),$("#ddlNewTskPriority").val(a[0].TaskPriorityID),_vrEditCustomerID=a[0].CustomerID,$("#ddlNewTskCustomer").val(a[0].CustomerID),_vrEditTaskStatusID=a[0].TaskStatusID,$("#ddlNewTskCustomer").trigger("change"),$("#ddlNewTskCategory").val(a[0].TaskCategoryID),$("#txtNewTskDueDate").val(a[0].TaskDueDate),$("#ddlNewTskOwner").val(a[0].OwnerID),0==a[0].NonBillableTask?$("#chkNewTskNonBillable").prop("checked",!1):$("#chkNewTskNonBillable").prop("checked",!0),0!=a[0].GetUpdates?$("#chkNewTskGetUpdates").prop("checked",!0):$("#chkNewTskGetUpdates").prop("checked",!1),""==_vrProjectIDedit&&(_vrProjectIDedit=a[0].TaskProjectID),_BaseUrl=_vrLocationOrigin+"/project/GetProjectNames?intID="+a[0].CustomerID+"&strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskProject),$("#ddlNewTskProject").val(a[0].TaskProjectID),_vrEditSprintID=a[0].SprintID,_vrEditAssignedTo=a[0].AssignedTo,_vrEditModuleName=a[0].ModuleName,_vrEditInformTo=a[0].InformTo,_vrEditTaskOwnerName=a[0].TaskOwner,$("#ddlAssTaskList").empty().trigger("chosen:updated"),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+a[0].TaskProjectID+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskListAssociate),_vrTaskChosenTaskName=a[0].AssociatedTasks,$("#txtNewTskNotes").val(a[0].TaskDescription),$("#btnNewTaskSaveNew").css("display","none"),$("#btnNewTaskSave").css("display","none"),$("#btnUpdateTask").css("display","inline"),$("#divMainLoader").css("display","none")}function updateTask(a){if($(".clsNewTskMandatory").each(function(){0==$.trim($(this).val()).length&&$(this).addClass("error")}),$(".error").length>0)return $("#errNewTskError").css("display","block"),!1;_vrUpdatedStatus=1;var b=$("#imgedittsk").attr("value"),c=b.split(",");if(void 0!=a)var d="undefined"==typeof a.Value?"":a.Value;else var d="";var e=GetInformToIds("ddlNewTskInformTo","txtNewTskInformTo"),f=$("#txtNewTskEffortPlanned").val(),g=replaceColon(f),h="";h=$("#chkNewTskNonBillable").is(":checked")?1:0;var i="";i=$("#chkNewTskGetUpdates").is(":checked")?1:0;var j="Task details are edited.";$("#btnUpdateTask").attr("disabled",!0);var k=$("#ddlAssTaskList").val();if(null!=k)for(var l=k[0],m=1;m<k.length;m++)l=l+","+k[m];var n={TaskName:$("#txtNewTskName").val(),TaskPriorityID:$("#ddlNewTskPriority").val(),TaskDueDate:$("#txtNewTskDueDate").val(),TaskStatusID:_vrEditTaskStatusID,TaskProjectID:$("#ddlNewTskProject").val(),TaskDescription:$("#txtNewTskNotes").val(),TaskCategoryID:$("#ddlNewTskCategory").val(),AssignedTo:$("#ddlNewTskAssignTo").val(),AnticipatedHours:g,GetUpdates:i,OwnerID:$("#ddlNewTskOwner").val(),InformTo:e,TaskReleaseVersion:"1",NonBillableTask:h,ModuleName:$("#ddlNewTskModule").val(),TaskID:c[0],TokenID:_vrUserTokenId,AttchedFiles:d,AssignedBy:_vrEditTaskOwnerName,CustomerID:$("#ddlNewTskCustomer").val(),SprintID:$("#ddlNewTskSprint").val(),AttachedFilesComment:j,UpdatedBy:$("#lblLogin").text(),AssociatedTasks:l},o=c[0]+","+$("#ddlNewTskProject").val()+","+$("#txtNewTskName").val();tskdetaileidting=$("#imgedittsk").attr("value",o),_BaseUrl=_vrLocationOrigin+"/Task/UpdateTask?intEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallWithObject(_BaseUrl,n,callTaskComments)}function callTaskComments(){$("#btnUpdateTask").attr("disabled",!1),$("#dialog").dialog("close"),$("#ddlNewTskInformTo").val(""),$(".info").html("Updated task details successfully"),showStatusDiv();var a=$("#imgedittsk").attr("value"),b=a.split(",");taskLink(b[0],b[1],b[2])}function createNewBug(){try{vrstatus=!1,$("#dailog").dialog("option","title",_vrDialogBoxNewBug),_vrDialogBoxTitle=_vrDialogBoxNewBug,$(".clsdailogfields").css("display","none"),$("#idShowBugDetails").css("display","inline-block"),$(".clsexistedbugfields").css("display","none"),$("#dailog").dialog("open"),$("#txtBugCreatedDate").datepicker("setDate",new Date),$(".clssavebug").css("display","inline-block"),clearBugDetailsFields()}catch(a){}}function CropTextHtml(a,b){if(a.length>b){var c=a.substr(0,b)+"...";return c}return a}function bindNewDataToChart(a){objArrEmpNames=[""],objArrPstvPnts=[],objArrNgtvPnts=[],empNames=[],pstvPnts=[],ngtvPnts=[],$.each(a,function(a,b){var c=new Object;c.EmpFirstName=b.EmpFirstName,objArrEmpNames.push(c);var d=new Object;d.PositivePoints=b.PositivePoints,objArrPstvPnts.push(d);var e=new Object;e.NegativePoints=b.NegativePoints.replace("-",""),objArrNgtvPnts.push(e)});for(var b=0,c=1;b<objArrEmpNames.length-1;b++,c++)empNames[b]=objArrEmpNames[c].EmpFirstName;for(var b=0;b<objArrPstvPnts.length;b++)pstvPnts[b]=parseInt(objArrPstvPnts[b].PositivePoints);for(var b=0;b<objArrNgtvPnts.length;b++)ngtvPnts[b]=parseInt(objArrNgtvPnts[b].NegativePoints.replace("-",""));bindChart()}function bindChart(){try{$(function(){$("#showChart").highcharts({chart:{type:"column",width:_vrSetWidthOfGraph,height:_vrSetHeightOfGraph},title:{text:""},xAxis:{categories:empNames,labels:{rotation:-60,align:"right",style:{fontSize:"13px",fontFamily:'"Trebuchet MS", sans-serif'}}},yAxis:{min:0,title:{text:"Points"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},scrollbar:{enabled:!0},series:[{name:"Positive Points",data:pstvPnts},{name:"Negative Points",data:ngtvPnts}]})})}catch(a){}}function ChangeColorOfBRGraph(){var a=$(".highcharts-container>svg>g>rect");$(a[0]).css("fill","rgb(59, 197, 216)"),$(a[1]).css("fill","rgb(240, 93, 93)"),$(a[2]).css("fill","rgb(207, 80, 121)"),$(a[3]).css("fill","yellow"),$(a[4]).css("fill","rgb(110, 138, 248)"),$(a[5]).css("fill","rgb(0, 196, 55)"),$(a[6]).css("fill","rgb(168, 32, 173)"),$(a[7]).css("fill","rgb(255, 227, 186)"),$(a[8]).css("fill","black")}function initializeGraph(){Highcharts.getOptions().colors=Highcharts.map(Highcharts.getOptions().colors,function(a){return{radialGradient:{cx:.5,cy:.3,r:.7},stops:[[0,a],[1,Highcharts.Color(a).brighten(-.3).get("rgb")]]}}),$(".pieChartGraph").highcharts({chart:{},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"},connectorColor:"silver"}}},series:[{type:"pie"}]})}function cropText(a,b,c){a.length>0&&("undefined"!=typeof b&&b.length>c?a[0].innerHTML=b.substring(0,c)+"...":"undefined"!=typeof b&&(a[0].innerHTML=b.substring(0,c)+"")),a.attr("title",b)}function cropTextForHours(a,b,c){a.length>0&&("undefined"!=typeof b&&b.length>c?a[0].innerHTML=b.substring(0,c)+"..":"undefined"!=typeof b&&(a[0].innerHTML=b.substring(0,c)+"")),a.attr("title",b)}function loadsTasksCount(a){try{$("#lblInProgCount").text(a[0].TaskCount),$("#lblPlannedCount").text(a[1].TaskCount)}catch(b){$("#idSpnLoading").css("display","none")}}function handleScriptTags(a){try{a=a.replace(_vrNonBillDiv,_vrNonBillReplace),a=a.replace(/\</g,"<span><</span>");var b=a.split(" ");return valResStr="",$.each(b,function(a){valResStr+="<span> "+b[a]+" </span>"}),valResStr=a.replace(_vrNonBillReplace,_vrNonBillDiv),valResStr}catch(c){}}function formatCommentsDate(a){try{var b=new Date(a),c=b.getDate(),d=b.getMonth();d+=1;var e=b.getFullYear(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i="";return i=isNaN(c)?a:DoubleDigitNum(c)+"/"+DoubleDigitNum(d)+"/"+DoubleDigitNum(e)+" "+DoubleDigitNum(f)+":"+DoubleDigitNum(g)+":"+DoubleDigitNum(h)}catch(j){}}function formatSprintFromDate(a){try{var b=a.split("/"),c=b[2]+"/"+b[1]+"/"+b[0];return c}catch(d){}}function formatSprintStatus(a){try{var b=a;return"Select status"==b?1:"Freeze sprint"==b?0:"Close sprint"==b?2:a}catch(c){}}function formatSprintDisplayDate(a){try{var b=new Date(a),c=b.getDate(),d=b.getMonth();d+=1;var e=b.getFullYear(),f=(b.getHours(),b.getMinutes(),b.getSeconds(),"");return f=isNaN(c)?a:DoubleDigitNum(c)+"/"+DoubleDigitNum(d)+"/"+DoubleDigitNum(e)}catch(g){}}function BindValuesToBugFields(){try{var a=$("#txtBugTrFromDate,#txtBugTrToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(b){if($.trim($("#txtBugTrFromDate").val()).length>0)for(var c=0;c<a.length;++c)a[c].id>this.id&&$(a[c]).datepicker("option","minDate",b)}});$(".ui-datepicker-current").hide(),$("#txtBugTrToDate").datepicker("setDate",new Date),$("#txtBugTrFromDate").datepicker("setDate",-14);var b=$("#txtBugTrFromDate").val();$("#txtBugTrToDate").datepicker("option","minDate",b),_BaseUrl=_vrLocationOrigin+"/Bug/FetchBugStatusData?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBugStatus)}catch(c){}}function BindValuesToBugFieldsTaskBugs(){try{var a=$("#txtTskOpenBugTrFromDate,#txtTskOpenBugTrToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(b){if($.trim($("#txtTskOpenBugTrFromDate").val()).length>0)for(var c=0;c<a.length;++c)a[c].id>this.id&&$(a[c]).datepicker("option","minDate",b)}});$(".ui-datepicker-current").hide(),$("#txtTskOpenBugTrToDate").datepicker("setDate",new Date),$("#txtTskOpenBugTrFromDate").datepicker("setDate",-1),_BaseUrl=_vrLocationOrigin+"/Bug/FetchBugStatusData?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrTskOpenBugsTaskStatus)}catch(b){}}function sortOrderUserPref(){try{}catch(a){}}function commentFileUpload(a){var b=a.files[0].name;$("#txtFlUpload").val(b)}function clearBugDetailsFields(){$("#ddlBugProjectName").val();$("#divBugInnerFields select").prop("selectedIndex",0),vrstatus?0!=_vrBugProjFields.length?($("#ddlBugProjectName").val(_vrBugProjFields),$("#ddlNewBugTask").val(_vrBugTaskField)):($("#ddlNewBugTask").empty(),$("#ddlNewBugTask").append("<option value='0'>Select task</option>")):($("#ddlBugProjectName").val("0"),$("#ddlNewBugTask").empty(),$("#ddlNewBugTask").append("<option value='0'>Select task</option>")),$("#txtBrowsers").text(""),$("#txtBugComments").text(""),$("#flCtBugMultiUpload").replaceWith($("#flCtBugMultiUpload").clone()),$("#divBugAttachedFiles").empty(),$("#divInnerAttachedFiles").empty(),_vrNewBugAttachedFiles="",$(".clsexistedbugfields").css("display","none"),$(".clssavebug").css("display","inline-block"),$("#txtBugCreatedDate").val(_vrTodayDate),$("#txtBugSearch").val(""),$("#lblBugId").text(""),$("#txtBrowsers").val(""),$("#txtBugComments").val(""),$(".clsnewbugmandatory").each(function(){$(this).removeClass("error")}),$("#divErrNewBug").css("display","none"),$("#imgLoaderFileUpload").css("display","none"),$("#flCtBugMultiUpload").prop("disabled",!1),$(".clsinsertbugdata").prop("disabled",!1)}function reloadBugsGrid(){0==_vrSaveNewBug.length?($("#dailog").dialog("close"),0==_vrTskOpenBugDialog&&FilterBugTrail(),_vrBugProjFields="",_vrBugTaskField=""):(_vrBugProjFields=$("#ddlBugProjectName").val(),_vrBugTaskField=$("#ddlNewBugTask").val(),0==_vrTskOpenBugDialog&&FilterBugTrail()),_BaseUrl=_vrLocationOrigin+"/mobile/PrjctBugDetails?intEmployeeID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFixedBugsCount),_vrSaveNewBug="",clearBugDetailsFields(),1==_vrTskOpenBugDialog&&FilterTskOpenBugTrail()}function ClearNewTaskFields(){$("#ddlNewTskInformTo").val(""),$(".clsClearNewTskFields").val(""),$("#chkNewTskGetUpdates").prop("checked",!0),$("#chkNewTskNonBillable").prop("checked",!1),$("#ddlNewTskAssignTo").val(""),$("#txtNewTskName").val(""),$("#txtNewTskDueDate").val(""),$("#txtNewTskEffortPlanned").val(""),$("#txtNewTskInformTo").val(""),$("#txtNewTskNotes"),$("#errNewTskError").css("display","none"),$("#flNewTskAttachFile").replaceWith($("#flNewTskAttachFile").clone()),$("#idChooseExcel").replaceWith($("#idChooseExcel").clone()),$("#ddlNewTskPriority").val("1"),$("#txtSelectedProjManager").attr("title",""),$("#idSpnLoading").css("display","none"),"1"==_vrCloseDialog&&($("#ddlNewTskCustomer").val(""),$("#ddlNewTskProject").empty(),$("#ddlNewTskModule").empty(),$("#ddlNewTskOwner").val(_EmpId),$("#ddlNewTskCategory").val("1"),$(".clsNewTskMandatory").each(function(){$(this).removeClass("error")}),$("#dailog").dialog("close"),_vrCloseDialog=""),"0"==_vrCloseDialog&&($("#ddlNewTskModule").val(""),$("#ddlNewTskOwner").val(_EmpId),$("#ddlNewTskCategory").val(_vrDefaultTskCatogery),$(".clsNewTskMandatory").each(function(){$(this).removeClass("error")}),$("#divMainLoader").css("display","none"))}function validateNewTskFields(){if($("#errNewExcelTskError").css("display","none"),$("#errExcelFile").css("display","none"),$(".clsNewTskMandatory").each(function(){0==$.trim($(this).val()).length&&$(this).addClass("error")}),$(".error").length>0)return $("#errNewTskError").css("display","block"),!1;$("input[type = submit]").attr("disabled",!0),$("#divMainLoader").css("display","inline");var a=$("#flNewTskAttachFile").val();0!=a.length?(_BaseUrl=_vrLocationOrigin+"/Task/ToFilesUpload?strPicFileName="+_DefaultAttachedFileName+"&strTokenID="+_vrUserTokenId,uploadFile(_BaseUrl,InsertNewTask,"flNewTskAttachFile")):InsertNewTask("")}function InsertNewTask(a){var b="undefined"==typeof a.Value?"":a.Value;_vrUpdatedInformToText=GetInformToIds("ddlNewTskInformTo","txtNewTskInformTo");var c=$("ddlNewTskSprint").val(),d=$("#ddlAssTaskList").val();if(null!=d)for(var e=d[0],f=1;f<d.length;f++)e=e+","+d[f];c="undefined"==typeof c?"":c;var g=1==$("#chkNewTskNonBillable").prop("checked")?"1":"0",h={TaskName:$("#txtNewTskName").val(),TaskProjectName:$("#ddlNewTskProject option:selected").text(),TaskSprintID:c,TaskDueDate:$("#txtNewTskDueDate").val(),TaskDescription:$("#txtNewTskNotes").val(),TaskProjectID:$("#ddlNewTskProject").val(),TaskStatusID:_vrPlannedId,TaskPriorityID:$("#ddlNewTskPriority").val(),TaskCategoryID:$("#ddlNewTskCategory").val(),IsUpdate:$("#chkNewTskGetUpdates").prop("checked"),InformTo:_vrUpdatedInformToText,TaskReleaseVersion:_vrProjVersionNum,NonBillableTask:g,ExpectedHours:replaceColon($("#txtNewTskEffortPlanned").val()),OwnerID:$("#ddlNewTskOwner").val(),ModuleName:$("#ddlNewTskModule").val(),SprintID:$("#ddlNewTskSprint").val(),EmpID:$("#ddlNewTskAssignTo").val(),AssignedTo:$("#ddlNewTskAssignTo").val(),AssignedToName:$("#ddlNewTskAssignTo option:selected").text(),TaskComments:$("#txtNewTskNotes").val(),AssignedBy:$("#lblLogin").text(),AttchedFiles:b,TokenID:_vrUserTokenId,AssociatedTasks:e};_vrTaskCreation=_vrResponseId,_BaseUrl=_vrLocationOrigin+"/Task/insertTask",ajaxCallWithObject(_BaseUrl,h,reloadTasksGrid)}function FilterBugTrail(){_vrBugTrFromDate=$("#txtBugTrFromDate").val(),_vrBugTrToDate=$("#txtBugTrToDate").val();var a=$("#txtBugTrFromDate").val();if($("#txtBugTrToDate").datepicker("option","minDate",a),0==$.trim(_vrBugTrFromDate).length&&0==$.trim(_vrBugTrToDate).length)_vrFilterDates=!1;else{var b=_vrBugTrFromDate.split("/"),c=_vrBugTrToDate.split("/");_vrBugTrFromDate=b[2]+"-"+b[1]+"-"+b[0],_vrBugTrToDate=c[2]+"-"+c[1]+"-"+c[0],_vrFilterDates=!0}_vrddlEmpName="0"==_vrddlEmpName?_EmpId:_vrddlEmpName,$("#idBugTrailLoading").css("display","block");var d={blnPrjct:_vrblnProjId,strPrjctID:_vrddlProjId,blnEmpID:_vrblnEmpName,strEmpID:_vrddlEmpName,blnTaskId:_vrblnTaskId,intTaskId:_vrddlTaskId,blnStatus:_vrblnStatus,strStatus:_vrddlStatus,strFrmDate:_vrBugTrFromDate,strToDate:_vrBugTrToDate,blnDate:_vrFilterDates,strUsrRleID:_UserRoleId,boolOnHoldFilter:$("#chkHoldBugs").is(":checked"),TokenID:_vrUserTokenId};if(_BaseUrl=_vrLocationOrigin+"/Bug/GetBugFilterData",ajaxCallWithObject(_BaseUrl,d,bindBugTrial),1==_vrSuccessStatus&&$("#dailog").dialog("isOpen")){_vrSuccessStatus="";var a=$("#txtFromDate").val().split("/"),e=$("#txtToDate").val().split("/"),f=a[2]+"-"+a[1]+"-"+a[0],g=e[2]+"-"+e[1]+"-"+e[0];getReports(f,g)}if(1==_vrSuccessBillingFlag&&$("#dailog").dialog("isOpen")){_vrSuccessBillingFlag="";var a=$("#txtFromDate").val().split("/"),e=$("#txtToDate").val().split("/"),f=a[2]+"-"+a[1]+"-"+a[0],g=e[2]+"-"+e[1]+"-"+e[0];viewBillingSummaryReport(f,g)}}function FilterTskOpenBugTrail(){if($("#idTskBugTrailLoading").css("display","block"),_vrTskBugTrFromDate=$("#txtTskOpenBugTrFromDate").val(),_vrTskBugTrToDate=$("#txtTskOpenBugTrToDate").val(),0==$.trim(_vrTskBugTrFromDate).length&&0==$.trim(_vrTskBugTrToDate).length)_vrTskBugFilterDates=!1;else{var a=_vrTskBugTrFromDate.split("/"),b=_vrTskBugTrToDate.split("/");_vrTskBugTrFromDate=a[2]+"-"+a[1]+"-"+a[0],_vrTskBugTrToDate=b[2]+"-"+b[1]+"-"+b[0],_vrTskBugFilterDates=!0}_vrTskddlEmpName="0"==_vrTskddlEmpName?_EmpId:_vrTskddlEmpName,$("#idTskBugTrailLoading").css("display","block");var c={blnPrjct:_vrTskblnProjId,strPrjctID:_vrTskddlProjId,blnEmpID:_vrTskblnEmpName,strEmpID:_vrTskddlEmpName,blnTaskId:_vrTskblnTaskId,intTaskId:_vrTskddlTaskId,blnStatus:_vrTskblnStatus,strStatus:_vrTskddlStatus,strFrmDate:_vrTskBugTrFromDate,strToDate:_vrTskBugTrToDate,blnDate:_vrTskBugFilterDates,strUsrRleID:_UserRoleId,boolOnHoldFilter:$("#chkTskOpenHoldBugs").is(":checked"),TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Bug/GetBugFilterData",ajaxCallWithObject(_BaseUrl,c,bindBugTrial)}function submitBugData(){if(_vrNewBugAttachedFiles="",$(".clsnewbugmandatory").each(function(){("0"==$.trim($(this).val())||0==$.trim($(this).val()).length)&&$(this).addClass("error")}),$(".error").length>0)return $("#divErrNewBug").css("display","inline"),!1;$("input[type = submit]").attr("disabled",!0),_vrBugStatus=_vrFunctionalityStatus!=_vrBugUpdateStatus?_vrDefaultBugStatus:$("#ddlNewBugStatus").val(),$(".clsbugdynfilename").each(function(){var a=$(this).prop("title");_vrNewBugAttachedFiles=_vrNewBugAttachedFiles+a+"~"}),$(".clshrefupdatedbug").each(function(){if(0==$(this).hasClass("clsremovefileonupdate")){var a=$(this).find("a").prop("title");_vrNewBugAttachedFiles=_vrNewBugAttachedFiles+a+"~"}});var a=$("#ddlBugProjectName").val(),b=$("#ddlNewBugTask").val(),c={PrjctID:a,TaskID:b,BugDscrptn:$("#txtBugComments").val(),PriorityID:$("#ddlNewBugPriority").val(),SeverityID:$("#ddlNewBugSeverity").val(),BugTypeID:$("#ddlNewBugType").val(),ReproducibleID:$("#ddlNewBugReproducible").val(),BugStatusID:_vrBugStatus,CreatedDate:$("#txtBugCreatedDate").val(),EmpID:_EmpId,AttachedFiles:_vrNewBugAttachedFiles,Browsers:$("#txtBrowsers").val(),strEmpFulName:$("#lblLogin").text(),strAction:_vrFunctionalityStatus,BugID:$("#lblBugId").text(),TokenID:_vrUserTokenId};clearAttachedFiles(),_BaseUrl=_vrLocationOrigin+"/Bug/InsrtBugTrailData",ajaxCallWithObject(_BaseUrl,c,reloadBugsGrid)}function InformToOnChange(a,b){if("-1"!=$("#")){var c=document.getElementById(a),d=c.options[c.selectedIndex].text,e=c.options[c.selectedIndex].value;if("-1"==e||0==e.length)return!1;{var f=document.getElementById(b).value,g=f.split(",");document.getElementById(b)}if("Select"!=d)if(""!=f){for(var h=0;h<g.length;h++)if(d==$.trim(g[h])){var i="'"+d+"' is already selected";return void displayMessage(_vrAlert,i)}document.getElementById(b).value=f+", "+d}else document.getElementById(b).value=d}}function fetchCommentFields(){$("#flCommUpload").replaceWith($("#flCommUpload").clone()),$(".clsCommDialogBox").css("display","inline");{var a=$("#txtTskProjId").text();$("#lblTaskId").text()}_BaseUrl=_vrLocationOrigin+"/project/FetchPrjctsEmp?strPrjctID="+a+"&strEmployeeID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,getTaskRelEmps),$("#txtDueDate").val($("#lblDueDate").text()),$("#ddlStatus").val(_vrTaskStatusId),1==_vrTaskStatusId||1==_vrNonBillableTask?($("#txtCommBillHours").prop("disabled",!0),$("#txtCommBillHours").css("background-color","rgb(131, 131, 131)"),1==_vrNonBillableTask&&($("#txtNonBillableComm").css("display","inline"),$("#txtTaskComments").css("display","none"))):($("#txtCommBillHours").prop("disabled",!1),$("#txtCommBillHours").css("background-color","transparent"),$("#txtTaskComments").css("display","block"),$("#txtNonBillableComm").css("display","none")),1==_vrBeyondScope||"True"==_vrBeyondScope?($("#chkBeyondScope").prop("checked",!0),_vrBeyondScope=!0):($("#chkBeyondScope").prop("checked",!1),_vrBeyondScope=!1)}function GetInformToIds(a,b){var c="";vrTxtInformTo=$("#"+b).val().split(",");for(var d=($("#"+b).val(),0);d<vrTxtInformTo.length;d++){try{vrInformToIndivid=$("#"+a+" option[text='"+$.trim(convertDoubleSingleQuotetoNormalChar(vrTxtInformTo[d]))+"']").val()}catch(e){continue}!isNaN(vrInformToIndivid)&&vrInformToIndivid.length>0&&(c=c+vrInformToIndivid+",")}return c.substr(0,c.length-1)}function getCurrentDate(){var a=new Date,b=DoubleDigit(a.getMonth()+1)+"/"+DoubleDigit(a.getDate())+"/"+a.getFullYear()+" "+DoubleDigit(a.getHours())+":"+DoubleDigit(a.getMinutes())+":"+DoubleDigit(a.getSeconds());return b}function filterTaskTrailSprintDataJqxGrid(){try{var a=$("#ddlTaskTrailSprint").val(),b=$("#ddlTskTrailStatus").val(),c=_vrTasksData,d=_vrTasksData.localdata,e=d;0==a&&0==b||0==b.length?e=d:0!=a&&0!=b?e=jQuery.grep(e,function(c){return c.SprintID==parseInt(a)&&c.TaskStatusID==parseInt(b)}):0!=a?e=jQuery.grep(e,function(b){return b.SprintID==parseInt(a)}):0!=b&&(e=jQuery.grep(e,function(a){return a.TaskStatusID==parseInt(b)})),c.localdata=e,$("#jqxTasksgrid").jqxGrid({source:_vrTasksData}),_vrTasksData.localdata=d,disableJqxPagerButtonsOnLoad("jqxTasksgrid")}catch(f){$("#idSpnLoading").css("display","none")}}function bindTasksBasedOnClientID(a,b,c,d){if(_UserRoleId!=_vrClientRoleId)_BaseUrl=_vrLocationOrigin+"/Task/GetTaskDataUsingEmpID?intProjectid="+a+"&intEmployeeID="+b+"&blnExcludeCSD="+c+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,d);else{_BaseUrl=_vrLocationOrigin+"/Customer/GetCustomerProjectEmpTaskDetails";var e={TokenID:_vrUserTokenId,AssignedToEmpID:b,TaskProjectID:a,CustomerID:_EmpId,IsExcludeCSD:c};ajaxCallWithObject(_BaseUrl,e,d)}}function GetInsertedResponse(a){var b=a;$(".info").html("Updated user preferences successfully"),showStatusDiv(),$(".dropdown-menu").css("display","none");try{var c=JSON.parse(b.MultipleResults[0].Preferences);if(_vrUserPreferredWidgets="undefined"==typeof c.gridsterWidgets?"":c.gridsterWidgets,$.trim(_vrUserPreferredWidgets).length>0)for(var d=0;d<_vrUserPreferredWidgets.length;d++){var e=vrwidgetPreferences[d].WidgetId;e=e.replace("divWidget","chk"),$("#"+e).prop("checked",!0)}}catch(f){}}function GetUserPreferences(){_BaseUrl=_vrLocationOrigin+"/user/GetUserPreferenceDetails?strTokenID="+_vrUserTokenId+"&intEmpID="+_EmpId,ajaxCall(_BaseUrl,BindUserPrefData)}function BindUserPrefData(a){if(_vrUserPreferredWidgets="","undefined"!=typeof a){var b=a[0].Preferences,c=JSON.parse($.trim(b));try{c.jqxGridjqxTasksgrid.columns.TaskID.text='Task ID <img src="img/Status.png" title="Status" class="clsstatushdrimg">'}catch(d){}var e="undefined"==typeof c.jqxGridjqxDeployGrid?null:c.jqxGridjqxDeployGrid;localStorage.setItem("jqxGridjqxBillingReport",JSON.stringify(c.jqxGridjqxBillingReport)),localStorage.setItem("jqxGridjqxBugTrial",JSON.stringify(c.jqxGridjqxBugTrial)),localStorage.setItem("jqxGridjqxCustomerTrial",JSON.stringify(c.jqxGridjqxCustomerTrial)),localStorage.setItem("jqxGridjqxProjectsGrid",JSON.stringify(c.jqxGridjqxProjectsGrid)),localStorage.setItem("jqxGridjqxTasksgrid",JSON.stringify(c.jqxGridjqxTasksgrid)),localStorage.setItem("jqxGridjqxUserTrial",JSON.stringify(c.jqxGridjqxUserTrial)),localStorage.setItem("jqxGridjqxDeployGrid",JSON.stringify(e)),_vrUserPreferredWidgets="undefined"==typeof c.gridsterWidgets?"":c.gridsterWidgets,$.trim(_vrUserPreferredWidgets).length>0?getUserPrefWidgets(_vrUserPreferredWidgets):userPreferredWidgets()}else userPreferredWidgets()}function userPreferredWidgets(){_UserRoleId==_vrClientRoleId&&(_idSlider="idDashboardslide",$("#"+_idSlider).click()),_idSlider="idTasksSlide",$("#"+_idSlider).click(),_idSlider="idBugsSlide",$("#"+_idSlider).click()
}function getUserPrefWidgets(a){for(var b="",c={},d=0;d<a.length;d++){var e=a[d].WidgetId;c={},"undefined"!=typeof a[d].vrAllWidgetContrlData&&(c=a[d].vrAllWidgetContrlData[0],c.vrWidgetId=e),_vrWidgetCOntrolData.push(c),e=e.replace("divWidget","chk"),$("#"+e).prop("checked",!0),_idSlider=e.replace("chk","id"),_vrCheckDragNDrop=1,$("#"+_idSlider).click(),"idTasksSlide"==_idSlider&&(b=1)}0==$.trim(b).length&&(_vrCheckIdSlider=1,_BaseUrl=_vrLocationOrigin+"/Task/GetTaskDataUsingEmpID?intProjectid=0&intEmployeeID="+_EmpId+"&blnExcludeCSD="+_vrBlnExcludeDefault+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindJqxGrid))}function checkUserPrefWidgets(a){a=a.replace("id","chk"),$("#"+a).prop("checked",!0)}function checkUserPrefWidgetsPosition(a){var b="";a=a.replace("id","divWidget");for(var c=0;c<_vrUserPreferredWidgets.length;c++)if(a==_vrUserPreferredWidgets[c].WidgetId){b=_vrUserPreferredWidgets[c].xaxisval+","+_vrUserPreferredWidgets[c].yaxisval+","+_vrUserPreferredWidgets[c].col+","+_vrUserPreferredWidgets[c].row;break}return b}function GetAllActiveEmployees(a){_UserRoleId!=_vrClientRoleId?(_BaseUrl=_vrLocationOrigin+"/User/GetActiveEmployeeDetails?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,a)):(_BaseUrl=_vrLocationOrigin+"/customer/GetCustomerProjectEmployees?intCustomerEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,a))}function bindTasksBasedOnConTrolData(a){if(0!=$.trim(a).length){var a=a.MultipleResults;_vrTasksData={datatype:"json",type:"GET",cache:!1,datafields:_vrTasksDataFields,localdata:a,pagesize:_vrDefaultTaskSizer},_vrCheckCallFromLogin=1,bindDataToJqx("jqxTasksgrid",_vrTasksData,_vrTasksColumns,_vrProjectsTasksWidth);var b=parseInt(_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailProject);b>0&&0/0!=b&&AjaxCallToGetSprintDataBasedOnProjectID(b,_vrFlagTaskWidgetSprintName),_vrCheckCallFromLogin="",bindLoggedUserTaskCount(),$("#idSpnLoading").css("display","none"),setRecordCountPosition("jqxTasksgrid")}}function bindTasksBasedOnClientID(a,b,c,d){if(_UserRoleId!=_vrClientRoleId)_BaseUrl=_vrLocationOrigin+"/Task/GetTaskDataUsingEmpID?intProjectid="+a+"&intEmployeeID="+b+"&blnExcludeCSD="+c+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,d);else{_BaseUrl=_vrLocationOrigin+"/Customer/GetCustomerProjectEmpTaskDetails";var e={TokenID:_vrUserTokenId,AssignedToEmpID:b,TaskProjectID:a,CustomerID:_EmpId,IsExcludeCSD:c};ajaxCallWithObject(_BaseUrl,e,d)}}function ViewReport(){try{_vrSummaryReportDialog=1,$("#divMainLoader").css("display","inline");var a="1";$("#txtFromDate").datepicker("setDate",-1),$("#txtToDate").datepicker("setDate",new Date),$("#txtToDate").datepicker("option","minDate","-1d"),_BaseUrl=_vrLocationOrigin+"/User/GetActive?strActiveID="+a+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrReportEmp),_BaseUrl=_vrLocationOrigin+"/User/GetReports?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrUserReports);var b=$("#txtFromDate").val().split("/"),c=$("#txtToDate").val().split("/"),d=b[2]+"-"+b[1]+"-"+b[0],e=c[2]+"-"+c[1]+"-"+c[0],f="";f=1!=vrLoginRoleId?!0:!1;var g={EmpID:_EmpId,BlnFromDate:!0,BlnToDate:!0,BlnEmpID:f,FromDate:d,ToDate:e,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/User/GetTaskSummaryReportDetails",ajaxCallWithObject(_BaseUrl,g,loadReportGrid),$(".clsdailogfields").css("display","none"),$("#dailog").dialog("option","title",_vrSummRprtHdr),$("#divCreateReports").css("display","inline"),_UserRoleId!=_vrClientRoleId&&_UserRoleId!=_vrUserRoleId||0!=_vrUserIsProjManager||$("#ddlEmployee").attr("disabled",!0);var h=$("#dailog").dialog("option","title");h==_vrSummRprtHdr?$("#ddlReports").val(4):h==_vrDialogBoxProjBillSummary&&$("#ddlReports").val(6),$("#dailog").dialog("open")}catch(i){}}function loadReportGrid(a){try{if(a.RecordCount>0){var b=a,c=[],d=a.MultipleResults[0].EmpFirstName;c="undefined"!=typeof d?b.MultipleResults:[]}else c=[];var e={datatype:"json",type:"GET",cache:!1,datafields:_vrReportsDataFields,localdata:c};bindDataToJqx("ReportGrid",e,_vrReportColumns,_vrMagnifyGridWidth),$("#divMainLoader").css("display","none")}catch(f){$("#divMainLoader").css("display","none")}}function getReports(a,b){if($("#divMainLoader").css("display","none"),$(".clsdailogfields").css("display","none"),$("#dailog").dialog("option","title",_vrSummRprtHdr),$("#divCreateReports").css("display","inline"),$("#dailog").dialog("open"),void 0!=a||void 0!=b){var c=a,d=b,e=c.split("-"),f=d.split("-");$("#txtFromDate").val(e[2]+"/"+e[1]+"/"+e[0]),$("#txtToDate").val(f[2]+"/"+f[1]+"/"+f[0])}else var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];$("#divMainLoader").css("display","inline");var g="",h="",i=$("#ddlEmployee").val();if("0"!=i?(g=!0,h=$("#ddlEmployee").val()):(g=!1,h=i),null==_vrattachedStatus||""==_vrattachedStatus){var j={EmpID:h,BlnFromDate:!0,BlnToDate:!0,BlnEmpID:g,FromDate:c,ToDate:d,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/User/GetTaskSummaryReportDetails",ajaxCallWithObject(_BaseUrl,j,loadReportGrid)}else{if(_BaseUrl=_vrLocationOrigin+"/user/FilterTaskDetailsWithAttachFiles?strTokenID="+_vrUserTokenId,_vrReportProjVal=$("#ddlReportPoj").val(),_vrReportProjVal.length>0&&"0"!=_vrReportProjVal)var k=!0;else var k=!1;j={BlnFromDate:!0,BlnToDate:!0,BlnEmpID:g,BlnProjectID:k,EmpID:h,FromDate:c,ToDate:d,ProjectID:_vrReportProjVal,TokenID:_vrUserTokenId,IsSummaryReport:!1},ajaxCallWithObject(_BaseUrl,j,loadReportAttachedGrid)}}function loadReportAttachedGrid(a){try{if(0==a.RecordCount){var b=[];$("#idTotalHours").text(0),$("#idBillableHours").text(0),$("#idNonBill").text(0)}else{var b=a.MultipleResults[0].TaskAttachedFileDetails;"undefined"!=typeof a.MultipleResults[0].ProjectBillingDetails&&($("#idTotalHours").text(displayFormat(a.MultipleResults[0].ProjectBillingDetails[0].TotalProjectHours)),$("#idBillableHours").text(displayFormat(a.MultipleResults[0].ProjectBillingDetails[0].TotalBillaleHours)),$("#idNonBill").text(displayFormat(a.MultipleResults[0].ProjectBillingDetails[0].TotalNonBillaleHours)))}var c={datatype:"json",type:"GET",cache:!1,datafields:_vrReportsFilesDataFields,localdata:b,pagesize:_vrDefaultTaskSizer},d=$("#dailog").dialog("option","title");$("#ReportGrid").jqxGrid(d==_vrDialogBoxProjBillSummary?{pagesize:_vrProjBillRprtPgr}:{pagesize:_VrSummRprtPager}),bindDataToJqx("ReportGrid",c,_vrReportFilesColumns,_vrMagnifyGridWidth),$("#divMainLoader").css("display","none"),$("#ddlReportPoj").css("display","inline"),$("#lblReportProj").css("display","inline")}catch(e){$("#divMainLoader").css("display","none")}}function RepotEmployeeValues(a){_vrReportMagnifyStatus=1,_vrAttachedEmpID=a,_BaseUrl=_vrLocationOrigin+"/User/GetEmpPersonalDetails?strTokenID="+_vrUserTokenId+"&intEmpID="+a,ajaxCall(_BaseUrl,GetUserDetails)}function GetUserDetails(a){var b=a[0].EmpFirstName,c=a[0].PhoneNumber,d=a[0].Address;userValueLink(_vrAttachedEmpID,b,c,d)}function addBoosterARooster(a){$("#divBARInnerFieldsDeatils").show(),$("#BtnEmpPoints").show(),$("#employeeDiv").hide(),$("#BtnAllotPoints").hide(),"1"==a&&(clearBoostaroosterFields(),GetAllActiveEmployees(_vrFlagActiveEmployees)),$("#dailog").dialog("option","title",_vrDialogBoosterAdd),_vrDialogBoxTitle=_vrDialogBoosterAdd,$(".clsdailogfields").css("display","none"),$("#boosterDialog").css("display","inline-block"),$("#dailog").dialog("open");var b="";$(".clsscoretype").click(function(){b=$("input:radio[name=pointsTypeRadio]:checked").val(),_BaseUrl=_vrLocationOrigin+"/user/BoostRoosterCategory?strCategoryType="+b+"&&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagCategory)}),$("#ddlCatergory").change(function(){b=$("input:radio[name=pointsTypeRadio]:checked").val();var a=$("#ddlCatergory option:selected").val();_BaseUrl=_vrLocationOrigin+"/user/BRSubCategoryTypes?strTokenID="+_vrUserTokenId+"&&strCategoryID="+a+"&&intPointsType="+b,$("#ddlSubCatergory").empty(),$(".clsbrtxtfields").val(""),$("#lblFrequency").html(""),$("#ddlSubCatergory").append("<option value='0'>Select subcategory</option>"),ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagSubCategory)}),$("#ddlSubCatergory").change(function(){BindScoreData()})}function showOpenBugs(){$("#chkTskOpenHoldBugs").prop("checked",!1),_vrTskblnEmpName=!1,_vrTskddlEmpName=_EmpId,$("#idTskBugTrailLoading").css("display","block"),_vrTskOpenBugDialog=1,$("#MagnifierDialog").dialog("open"),$("#MagnifierDialog").dialog("option","title",_vrDialogBoxBugTrail),$("#MagnifierDialog #idBugTrail").length>0&&$("#idBugTrail").css("display","none"),$("#divProjectsTrail").css("display","none"),$("#divMagnifyHdrTitle").css("display","none"),$("#divMagnifierGrid").css("display","none"),$(".clstasksfields").css("display","none"),$("#idTskOpenBugTrail").css("display","block"),$(".clsTskbugtrailDates").css("display","block"),$("#MagnifierDialog").append($("#idTskOpenBugTrail")),BindValuesToBugFieldsTaskBugs(),GetAllActiveEmployees(_vrTskOpenBugsEmp),$("#ddlTskOpenBugTrProject").val(_vrTxtTskProjId),_vrTskddlProjId=_vrTxtTskProjId,_vrTskblnProjId=!0,$("#ddlTskOPenBugTrTaskName").empty(),$("#ddlTskOPenBugTrTaskName").append("<option value='0'>Select task</option>"),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+$("#ddlTskOpenBugTrProject").val()+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrTskOpenBugsTsk),_vrTskddlTaskId=_vrTxtTskId,_vrTskblnTaskId=!0,_vrTskddlStatus=1,_vrTskblnStatus=!0;var a=_vrTskCreatOn.split("/");_vrTskCreatOn=a[1]+"/"+a[0]+"/"+a[2],$("#txtTskOpenBugTrFromDate").datepicker("setDate",_vrTskCreatOn);var b=$("#txtTskOpenBugTrFromDate").val();$("#txtTskOpenBugTrToDate").datepicker("option","minDate",b),$(".ui-datepicker-trigger").css("width","20px").css("margin-left","2px"),$(".clsSpnLoading").css("display","none"),FilterTskOpenBugTrail(),event.preventDefault()}function BindValuesToDeployFields(){try{var a=$("#txtDeployFromDate,#txtDeployToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(b){if($.trim($("#txtDeployFromDate").val()).length>0)for(var c=0;c<a.length;++c)a[c].id>this.id&&$(a[c]).datepicker("option","minDate",b)}});$(".ui-datepicker-current").hide(),$("#txtDeployToDate").datepicker("setDate",new Date),$("#txtDeployFromDate").datepicker("setDate",-1),_deployIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_deployIndexNO]).length>0&&($("#txtDeployFromDate").datepicker("setDate",_vrWidgetCOntrolData[_deployIndexNO].txtDeployFromDate),$("#txtDeployToDate").datepicker("option","mindate",_vrWidgetCOntrolData[_deployIndexNO].txtDeployFromDate))}catch(b){}}function createProjectwithExcel(){$(".clsNewTskMandatory").removeClass("error"),$("#errNewTskError").css("display","none"),$("#errExcelFile").css("display","none");var a={AnticipatedHours:"",AssignedBy:"",AssignedTo:"",AttachedFiles:"",TaskDueDate:"",TaskCategoryID:"",Comments:"",InformTo:"",ModuleName:"",OwnerID:"",SprintID:"",TaskDescription:"",TaskDueDate:"",TaskName:"",ProjectName:"",TaskReleaseVersion:"",TokenID:""},b=[];if(null!=_vrJsonOutput.Sheet1&&"undefined"!=typeof _vrJsonOutput.Sheet1){for(var c=0;c<_vrJsonOutput.Sheet1.length;c++)if("undefined"!=typeof _vrJsonOutput.Sheet1[c].TaskName){var a={EffortHours:"",TaskName:"",ProjectName:""};a.EffortHours=_vrJsonOutput.Sheet1[c].EffortHours,a.TaskName=_vrJsonOutput.Sheet1[c].TaskName,a.ProjectName=_vrJsonOutput.Sheet1[c].ProjectName,b.push(a)}var d={AssignedBy:$("#lblLogin").text(),AssignedTo:0,AttachedFiles:"",TaskDueDate:"",TaskCategoryID:1,Comments:"",InformTo:"",ModuleName:"",OwnerID:_EmpId,TaskDescription:"",TaskDueDate:"",TaskReleaseVersion:"",TokenID:_vrUserTokenId,TaskPriorityID:1,MultiTasks:b};d.MultiTasks.length>0?(_BaseUrl=_vrLocationOrigin+"/Task/InsertTaskWithXLS/",ajaxCallWithObject(_BaseUrl,d,bindTaskCreationData),$("#idChooseExcel").replaceWith($("#idChooseExcel").clone())):($("#errExcelFile").css("display","inline"),$("#idChooseExcel").replaceWith($("#idChooseExcel").clone()))}else $("#errNewExcelTskError").css("display","inline"),$("#idChooseExcel").replaceWith($("#idChooseExcel").clone()),$("#idDisplayNonCreatedTasks").css("display","none"),$("#idDisplayCreatedTasks").css("display","none"),$("#divSuccesTaskCreationDiv").empty(),$("#divSuccesTaskCreationDiv").css("display","none"),$("#divNonSuccesTaskCreationDiv").empty(),$("#divNonSuccesTaskCreationDiv").css("display","none");_vrJsonOutput.Sheet1=null}function bindTaskCreationData(a){_vrSuccessSource=a.SingleResult.CreatedTasks,$("#idDisplayCreatedTasks").css("display","inline"),a.SingleResult.NonCreatedTasks.length>0&&($("#idDisplayNonCreatedTasks").css("display","inline"),_vrNonSuccessSource=a.SingleResult.NonCreatedTasks),$("#idDisplayCreatedTasks").click()}function LaodQuoteCategoryDetails(){_BaseUrl=_vrLocationOrigin+"/Task/GetTaskCategories?strTokenID="+_vrUserTokenId,$.ajax({type:"GET",url:_BaseUrl,contentType:"application/json;charset=utf-8",processData:!1,crossDomain:!0,dataType:"json",success:function(a){if(a.ResponseId==_vrExpiredTokendIdResponse&&logOutUser(),1==a.RecordCount)sourceGrid=a.SingleResult,"undefined"==typeof _vrQuoteCategory&&(_vrQuoteCategory=a.MultipleResults);else{_vrQuoteCategory=a.MultipleResults;var b=_vrQuoteCategory;_vrQuoteCategory=[],"undefined"!=b&&b.length>0&&$.each(b,function(a,b){_vrQuoteCategory.push(b.TaskCategoryType)})}},error:function(){return displayError(),!1}})}function viewBillingSummaryReport(a,b){if($(".clsdailogfields").css("display","none"),$("#divCreateReports").css("display","inline"),void 0!=a||void 0!=b){var c=a,d=b,e=c.split("-"),f=d.split("-");$("#txtFromDate").val(e[2]+"/"+e[1]+"/"+e[0]),$("#txtToDate").val(f[2]+"/"+f[1]+"/"+f[0])}else var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];$("#divMainLoader").css("display","inline"),$("#dailog").dialog("option","title",_vrDialogBoxProjBillSummary);var g="",h="",i=$("#ddlEmployee").val();if("0"!=i?(g=!0,h=$("#ddlEmployee").val()):(g=!1,h=i),null==_vrattachedStatus||""==_vrattachedStatus){var j={EmpID:h,BlnEmpID:g,FromDate:c,ToDate:d,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Project/GetTaskProjectSummaryReprtDtls",ajaxCallWithObject(_BaseUrl,j,loadSummaryBillingReportGrid)}else{if(_BaseUrl=_vrLocationOrigin+"/user/FilterTaskDetailsWithAttachFiles?strTokenID="+_vrUserTokenId,_vrReportProjVal.length>0&&"0"!=_vrReportProjVal)var k=!0;else var k=!1;j={BlnFromDate:!0,BlnToDate:!0,BlnEmpID:g,BlnProjectID:k,EmpID:h,FromDate:c,ToDate:d,ProjectID:_vrReportProjVal,TokenID:_vrUserTokenId,IsSummaryReport:!0},ajaxCallWithObject(_BaseUrl,j,loadReportAttachedGrid)}$("#dailog").dialog("open")}function loadSummaryBillingReportGrid(a){var b=[];try{a.RecordCount>0?($("#idTotalHours").text(displayFormat(a.MultipleResults[0].TotalProjectSummaryBillingDetails[0].TotalProjectHours)),$("#idBillableHours").text(displayFormat(a.MultipleResults[0].TotalProjectSummaryBillingDetails[0].TotalBillaleHours)),$("#idNonBill").text(displayFormat(a.MultipleResults[0].TotalProjectSummaryBillingDetails[0].TotalNonBillaleHours)),b=a.MultipleResults[0].ProjectSummaryBillingDetails):(b=[],$("#idTotalHours").text("0"),$("#idBillableHours").text("0"),$("#idNonBill").text("0"));var c={datatype:"json",type:"GET",cache:!1,datafields:_vrBillingSummaryDataFields,localdata:b,pagesize:_vrMagnifierTaskSizer};bindDataToJqx("ReportGrid",c,_vrBillingSummaryColumns,_vrMagnifyGridWidth),$("#divMainLoader").css("display","none")}catch(d){}}function viewBillingReport(a,b){if($(".clsdailogfields").css("display","none"),$("#divCreateReports").css("display","inline"),void 0!=a||void 0!=b){var c=a,d=b,e=c.split("-"),f=d.split("-");$("#txtFromDate").val(e[2]+"/"+e[1]+"/"+e[0]),$("#txtToDate").val(f[2]+"/"+f[1]+"/"+f[0])}else var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];$("#divMainLoader").css("display","inline"),$("#dailog").dialog("option","title",_vrDialogBoxProjBillSummary);var g="",h="",i=$("#ddlEmployee").val();if("0"!=i?(g=!0,h=$("#ddlEmployee").val()):(g=!1,h=i),_vrReportProjVal.length>0&&"0"!=_vrReportProjVal)var j=!0;else var j=!1;if(null==_vrattachedStatus||""==_vrattachedStatus){_BaseUrl=_vrLocationOrigin+"/Task/FilterBillingDetails";var k={BlnEmpID:g,EmpID:h,BlnProject:j,ProjectID:_vrReportProjVal,BlnFromDate:!0,FromDate:c,BlnToDate:!0,ToDate:d,IsBeyondScope:!1,TokenID:_vrUserTokenId,ProjectManager:_EmpId,RoleID:_UserRoleId,IsProjectManager:_vrUserIsProjManager,LoggedInEmpID:_EmpId};_vrBillReportFlag=1,ajaxCallWithObject(_BaseUrl,k,bindBillingReportData)}else{if(_BaseUrl=_vrLocationOrigin+"/user/FilterTaskDetailsWithAttachFiles?strTokenID="+_vrUserTokenId,_vrReportProjVal.length>0&&"0"!=_vrReportProjVal)var j=!0;else var j=!1;objSummaryReport={BlnFromDate:!0,BlnToDate:!0,BlnEmpID:g,BlnProjectID:j,EmpID:h,FromDate:c,ToDate:d,ProjectID:_vrReportProjVal,TokenID:_vrUserTokenId,IsSummaryReport:!0},ajaxCallWithObject(_BaseUrl,objSummaryReport,loadReportAttachedGrid)}$("#dailog").dialog("open")}function bindBillingSummaryReportData(a){}function bindLoggedUserTaskCount(){_BaseUrl=_vrLocationOrigin+"/Mobile/GetTaskDataUsingEmpID?intEmployeeID="+_EmpId+"&&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,loadsTasksCount)}function fetchProjectsData(){$("#divProjectLoading").css("display","block"),_BaseUrl=_vrLocationOrigin+"/Project/GetProjectData";var a={ProjectName:0,ProjectCustomerID:0,ProjectStatusID:"0",ProjectID:0,EmpID:_EmpId,RoleID:_UserRoleId,TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,a,bindProjectsData)}function bindProjectsData(a){try{var b="",c="",d="";d=a.RecordCount>0?a.MultipleResults[0].LstProjects:[];var e=sortingcolumns("jqxProjectsGrid");if(b=e.vrSortColumnName,c=e.vrSortOrder,_vrProjectsData={datatype:"json",type:"GET",cache:!1,datafields:_vrProjDataFields,localdata:d,pagesize:_vrDefaultProjSizer},$("#ddlProjCustomer").empty(),$("#ddlProjTrStatus").empty(),$("#ddlProjectStatus").empty(),$("#ddlProjCustomer").append("<option value='0'>Select customer</option>"),$("#ddlProjTrStatus").append("<option value='0'>Select status</option>"),bindDataToDropDown(a.MultipleResults[0].LstCustomers,"ddlProjCustomer","CustomerID","CompanyName"),bindDataToDropDown(a.MultipleResults[0].LstProjStatus,"ddlProjTrStatus","StatusId","StatusType"),bindDataToDropDown(a.MultipleResults[0].LstProjStatus,"ddlProjectStatus","StatusId","StatusType"),$("#ddlProjTrStatus").val(_vrSelProjStatus.length>0?_vrSelProjStatus:_vrInProgId),_vrSelProjCustomer.length>0&&$("#ddlProjCustomer").val(_vrSelProjCustomer),_projIndexNO>-1){var f=parseInt(_vrWidgetCOntrolData[_projIndexNO].ddlProjTrStatus);f>0&&0/0!=f&&$("#ddlProjTrStatus").val(f);var g=parseInt(_vrWidgetCOntrolData[_projIndexNO].ddlProjCustomer);g>0&&0/0!=g&&$("#ddlProjCustomer").val(g),$("#txtProjTrProjects").val(_vrWidgetCOntrolData[_projIndexNO].txtProjTrProjects),_projIndexNO=-1}"0"==$(".clsprojwidget #divProjectsTrail").length?loadJqxProjectsGrid():(bindDataToJqx("jqxProjectsGrid",_vrProjectsData,_vrProjColumns,_vrProjectsGridWidth),filterProjectsJqxGrid()),_UserRoleId==_vrClientRoleId&&$(".search-wrapper-proj").css("margin-left","160px"),$("#btnMagnifyProject").attr("disabled",!1),$("#btnCreateProject").css("disabled",!1),CheckBrowserNAddCSS(),LoadPageNumForProj(),setRecordCountPosition("jqxProjectsGrid"),sortOrderUserPref("jqxProjectsGrid",b,c)}catch(h){}}function projInProgLink(a,b,c){_vrReportMagnifyStatus="";var d=$("#MagnifierDialog").dialog("option","title");d==_vrProjectsTitle?(_vrLocalTaskDataOnProjClick=null,_vrLocalTaskDataOnProjClick=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid"))):d!=_vrProjDetDialogHdr&&(_vrLocalTaskDataOnProjClick=null,_vrLocalTaskDataOnProjClick=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid"))),_vrProjDialogOpen=1,$(".clslblgetvalue").text("");try{var e=$("#MagnifierDialog").dialog("option","title");e==_vrDialogBoxCustomerTrail&&(_vrTaskDataOnCPUOnTaskClick=null,_vrTaskDataOnCPUOnTaskClick=$("#jqxPreviewGrid").jqxGrid("getpaginginformation")),checkWidgetsAndAppend(),b=convertCharToDoubleSingle(b),c=convertCharToDoubleSingle(c),$("#divMainLoader").css("display","block"),$("#divMagnifyHdrTitle").css("display","block"),_vrSelectedProjectProjId=a,$("#lblMagfieldtext1").text(_vrProjectNameLbl),$("#lblMagfieldtext2").text(_vrProjectManagerLbl),$("#lblMagfieldtext3").text(""),$("#lblMagFieldVal1").text(b),c="undefined"!=typeof c?c:"",cropText($("#lblMagFieldVal2"),c,_vrTextFieldUserManagerLen),$("#lblMagFieldVal3").text(""),_BaseUrl=_vrLocationOrigin+"/Task/GetInProgTasksByProjId?intProjId="+_vrSelectedProjectProjId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindInProgTasks),event.preventDefault()}catch(f){}}function bindInProgTasks(a){$(".clsmagnifyeditbuttons").css("display","none"),_UserRoleId!=_vrClientRoleId&&$("#btnEditProject").css("display","inline");var b=a;$("#MagnifierDialog").dialog("isOpen")===!1?openMagnifyDialogBox(_vrProjDetDialogHdr,"jqxPreviewGrid",_vrDefaultPreviewPager):(_vrMagnifyCloneTitle=_vrProjDetDialogHdr,$("#MagnifierDialog").dialog("option","title",_vrProjDetDialogHdr)),$("#divMagnifierGrid").css("display","inline"),$(".ui-dialog :button").focus(),_vrJqxMagnifyLoadedFlag!=_vrTasksMagnifyLoaded?(_vrProjectsTasksData={datatype:"json",type:"GET",cache:!1,datafields:_vrTasksDataFields,localdata:b},bindDataToJqxInMagnifier("jqxPreviewGrid",_vrProjectsTasksData,_vrTasksMagnifierColumns,_vrProjectsMagTasksWidth)):(_vrProjectsTasksData.localdata=b,null!=_vrTaskDataOnCPUOnTaskClick?($("#jqxPreviewGrid").jqxGrid({source:_vrProjectsTasksData}),$("#jqxPreviewGrid").jqxGrid("gotopage",_vrTaskDataOnCPUOnTaskClick.pagenum)):$("#jqxPreviewGrid").jqxGrid({source:_vrProjectsTasksData}),_vrTaskDataOnCPUOnTaskClick=null,disableJqxPagerButtonsOnLoad("jqxPreviewGrid"),$("#jqxPreviewGrid").on("pagechanged",function(a){disableEnablePagingButtons("jqxPreviewGrid",a)})),_vrJqxMagnifyLoadedFlag=_vrTasksMagnifyLoaded,$("#divMainLoader").css("display","none"),$("#imgMagnifydialogLoader").css("display","none")}function editProjectProfile(){createNewProject(_vrGetProjDataById),_vrSetProjUpdateFlag=_vrGetProjDataById}function bindProjectData(a){$(".clsupdateprojfields").css("display","inline"),$("#btnSaveNewProject").css("display","none"),$("#ddlFirstReleaseVersion").css("display","none"),$("#ddlSecondReleaseVersion").css("display","none"),$("#ddlFirstReleaseVersion").empty(),$("#ddlSecondReleaseVersion").empty();var b=a,a=a[0],c=a.VersionNumber.split("!^"),d=a.VersionReleaseDate.split("_"),e="undefined"!=a.ProjectManager&&"0"!=a.ProjectManager?getInformPersonNames("ddlNewProjManager",a.ProjectManager):"",f="undefined"!=a.InformUpdates&&"0"!=a.InformUpdates?getInformPersonNames("ddlNewProjManager",a.InformUpdates):"",g=$("#JqxWidget").jqxDropDownList("getItems"),h=a.InformUpdates.split(",");if(h.length==g.length-parseInt(1))$("#JqxWidget").jqxDropDownList("checkIndex",0);else{for(var i="",j=0;j<g.length;j++)i+=j!=g.length-1?g[j].value+",":g[j].value;for(var k,l=i.split(","),m=0;m<h.length;m++)"Select all"!=h[m]&&(k=l.indexOf(h[m]),$("#JqxWidget").jqxDropDownList("checkIndex",k))}_vrNewProjectAttachedFiles="undefined"!=typeof a.ProjectAtchDocmnt?a.ProjectAtchDocmnt:"";var n=""!=_vrNewProjectAttachedFiles?_vrNewProjectAttachedFiles.split("~"):"";$.each(n,function(a,b){$.trim(b).length>0&&($("#divProjAttachedFiles").css("border","1px solid rgb(210, 208, 208)"),$("#divProjAttachedFiles").append("<div class='clsprojattachedfiles'><a href='"+_vrAttachedFilesPath+b+"' title='"+b+"' target='_blank'>"+CropTextHtml(b,_vrUpdateLimitFileName)+"</a><img src='img/closeicon.ico' class='clsupdatedprojectfileremove'/><img src='img/revert.ico' class='clsprojfileremovecancel'/></div>"))}),$.trim(d[0]).length>0&&"undefined"!=d[0]&&($("#ddlFirstReleaseVersion").css("display","inline"),0==$('#ddlFirstReleaseVersion option[value="'+d[0]+'"]').length&&$("#ddlFirstReleaseVersion").append("<option value='"+d[0]+"'>"+d[0]+"</option>")),$.trim(d[1]).length>0&&"undefined"!=d[1]&&($("#ddlSecondReleaseVersion").css("display","inline"),0==$('#ddlSecondReleaseVersion option[value="'+d[1]+'"]').length&&$("#ddlSecondReleaseVersion").append("<option value='"+d[1]+"'>"+d[1]+"</option>")),$("#ddlNewCustomer option[value="+a.ProjectCustomerID+"]").length>0&&$("#ddlNewCustomer").val(a.ProjectCustomerID);var o="undefined"!=typeof a.ProjectBudget?a.ProjectBudget:"0";$("#txtNewProjName").val(a.ProjectName),$("#txtNewModuleNames").val(a.ModuleName),$("#ddlNewProjTechnology").val(a.TechnologyID),$("#ddlNewProjPriority").val(a.ProjectPriorityID),$("#txtSelectedProjManager").val(e),$("#txtSelectedProjManager").attr("title",e),$("#txtSelectedEmp").val(f),$("#txtSelectedEmp").attr("title",f),$("#txtNewProjBudgetEfforts").val(displayFormat(o)),$("#txtPMPercentage").val(a.ProjectAlertPM),$("#ddlReleaseDate option:contains("+a.ReleaseType+")").attr("selected","selected"),$("#ddlProjectStatus").val(a.ProjectStatusID),$("#txtVersionNumStart").val(c[0]),$("#txtVersionNumEnd").val(c[1]),$("#txtNewProjDescription").val(a.ProjectDescription),$("#divMainLoader").css("display","none");var p=$("#ddlFirstReleaseVersion option:selected").text();$("#ddlFirstReleaseVersion").prop("title",p);var q=$("#ddlSecondReleaseVersion option:selected").text();$("#ddlSecondReleaseVersion").prop("title",q);var r=$("#ddlReleaseDate option:selected").text();if($("#ddlReleaseDate").prop("title",r),$("#divProjAttachFiles").css("border","none"),$.trim(b[0].SprintName).length>0){var s={datatype:"json",type:"GET",cache:!1,datafields:_vrProjSprintDataFields,localdata:b,pagesize:_vrDefaultTaskSizer};bindDataToJqx("JqxGridSprint",s,_vrSprintColumns,650)}}function linkrendersprintstatus(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=JSON.stringify(c.SprintStatus).toString();if(0==d)return'<span style="margin: 4px; line-height: 1.9;" title="Freeze sprint">Freeze sprint</span>';if(1==d)return'<span style="margin: 4px; line-height: 1.9;" title="Select status">Select status</span>';if(2==d)return'<span style="margin: 4px; line-height: 1.9;" title="Close sprint">Close sprint</span>'}}catch(e){}}function filterProjTrStatus(){_projIndexNO=-1,filterProjectsJqxGrid(),_vrSelProjStatus=$("#ddlProjTrStatus").val();var a=$("#ddlProjTrStatus option:selected").text();$("#ddlProjTrStatus").attr("title",""),$("#ddlProjTrStatus").attr("title",a)}function filterProjCustomer(){filterProjectsJqxGrid(),_vrSelProjCustomer=$("#ddlProjCustomer").val();var a=$("#ddlProjCustomer option:selected").text();$("#ddlProjCustomer").prop("title",a)}function LoadProjectDetails(){setTimeout(function(){filterProjectsJqxGrid()},5)}function filterProjName(){filterProjectsJqxGrid()}function filterProjectsJqxGrid(){try{var a=$("#ddlProjTrStatus option:Selected").text(),b=$("#ddlProjCustomer").val(),c=$("#txtProjTrProjects").val().toLowerCase(),d=_vrProjectsData,e=_vrProjectsData.localdata,f="";f="0"!=$("#ddlProjTrStatus").val()&&"0"!=$("#ddlProjCustomer").val()?jQuery.grep(e,function(c){return c.Status==a&&c.ProjectCustomerID==b}):"0"!=$("#ddlProjTrStatus").val()?jQuery.grep(e,function(b){return b.Status==a}):"0"!=$("#ddlProjCustomer").val()?jQuery.grep(e,function(a){return a.ProjectCustomerID==b}):e,$.trim(c).length>0&&(f=jQuery.grep(f,function(a){return a.ProjectName.toLowerCase().indexOf(c)>-1})),d.localdata=f,$("#jqxProjectsGrid").jqxGrid({source:d}),_vrProjectsData.localdata=e,disableJqxPagerButtonsOnLoad("jqxProjectsGrid"),$("#divProjectLoading").css("display","none")}catch(g){$("#divProjectLoading").css("display","none")}}function loadJqxProjectsGrid(){bindDataToJqx("jqxProjectsGrid",_vrProjectsData,_vrProjColumns,_vrMagnifyGridWidth),filterProjectsJqxGrid(),LoadPageNumForProj()}function decreaseJqxProjectsGrid(){setLocalStorageFromDialog("jqxProjectsGrid",_vrProjectsGridWidth),bindDataToJqx("jqxProjectsGrid",_vrProjectsData,_vrProjColumns,_vrProjectsGridWidth),filterProjectsJqxGrid()}function createNewProject(a){try{0==$.trim(SprintStatus).length&&(LoadJqxSprintGrid(),SprintStatus=1),selectCount=0,$("#divProjAttachFiles").css("border","none"),$("#divProjAttachedFiles").css("border","none"),_vrNewProjectAttachedFiles="",$("#ddlFirstReleaseVersion").css("display","none"),$("#ddlSecondReleaseVersion").css("display","none"),$("#divMainLoader").css("display","block"),_vrDialogBoxTitle=_vrDialogBoxNewProj,clearProjectFields(),$(".clsupdateprojfields").css("display","none"),$("#btnSaveNewProject").css("display","inline"),a==_vrGetProjDataById?$("#dailog").dialog("option","title",_vrProjectEditLbl):($("#dailog").dialog("option","title",_vrDialogBoxNewProj),_vrLocalTaskDataOnProjClick=null,_vrLocalTaskDataOnProjClick=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid"))),_vrDialogBoxTitle=_vrDialogBoxNewProj,$(".clsdailogfields").css("display","none"),$("#divCreateNewProject").css("display","inline-block"),$("#dailog").dialog("open"),_BaseUrl=_vrLocationOrigin+"/Project/GetNewProjectFields?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrGetProjFields),disableJqxPagerButtonsOnLoad("JqxGridSprint")}catch(b){}}function LoadJqxSprintGrid(){var a={datafields:_vrProjSprintDataFields,addrow:function(a,b,c,d){d(!0)}},b=new $.jqx.dataAdapter(a);$("#JqxGridSprint").jqxGrid({width:650,source:b,pageable:!0,autoheight:!0,pagerbuttonscount:3,sortable:!0,pagermode:"simple",enabletooltips:!0,editable:!0,editmode:"click",columnsresize:!1,autorowheight:!0,pagesize:8,columns:_vrSprintColumns});var c=function(){var a={},b=linkrenderer_sprintdefaultdate(),c=linkrenderer_sprintdefaultenddate();return a.SprintName="",a.StartDate=b,a.EndDate=c,a.SprintStatus="Select status",a};$("#addrowbutton").on("click",function(){var a=c();vrJqxId=$("#JqxGridSprint").jqxGrid("getdatainformation").rowscount,$("#JqxGridSprint").jqxGrid("addrow",vrJqxId,a),disableJqxPagerButtonsOnLoad("JqxGridSprint")}),disableJqxPagerButtonsOnLoad("JqxGridSprint"),$("#JqxGridSprint").on("pagechanged",function(a){disableEnablePagingButtons("JqxGridSprint",a)})}function DeleteRow(){for(var a=$("#JqxGridSprint").jqxGrid("getdatainformation").rowscount,b=0,c=a;parseInt(b)<parseInt(c)&&(b>=0&&a>b);parseInt(c--)){var d=$("#JqxGridSprint").jqxGrid("getrowid",b);$("#JqxGridSprint").jqxGrid("deleterow",d)}}function linkrenderer_sprintdefaultdate(){var a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();return 10>b&&(b="0"+b),10>c&&(c="0"+c),a=b+"/"+c+"/"+d}function linkrenderer_sprintdefaultenddate(){var a=new Date;a.setDate(a.getDate()+7);var b=a.getDate(),c=a.getMonth(),d=a.getFullYear(),e=1;if(e+=c,10>e)var f="0"+e;return a=b+"/"+f+"/"+d}function clearProjectFields(){$(".clsClearNewProjFields").val(""),$(".clscreatenewddl").empty(),$("#divProjAttachFiles").empty(),$("#divProjAttachedFiles").empty(),$("#divInformToMembers").empty(),$("#txtNewProjName").removeClass("error"),$("#ddlNewProjTechnology").removeClass("error"),$("#ddlNewCustomer").removeClass("error"),$(".clserrorprojlbl").css("display","none"),$(".clserrorsprintlbl").css("display","none"),$("#flAttachProjFile").replaceWith($("#flAttachProjFile").clone()),$("#txtSelectedProjManager").attr("title",""),$("#JqxGridSprint").jqxGrid("clear")}function showprojManager(){InformToOnChange("ddlNewProjManager","txtSelectedProjManager");var a=$("#txtSelectedProjManager").val();$("#txtSelectedProjManager").attr("title",a)}function saveNewProject(){_vrProjDataStatus=_vrProjCrtStatus,_vrSelectedProjectProjId=_vrDefaultProjId,submitProjectData()}function updateProj(){if(_vrProjDataStatus=_vrProjUpdatedStatus,_vrSprintStatus=1,$("#divProjAttachedFiles .clsremoveprojectfileonupdate").length>0){var a="";
$(".clsprojattachedfiles").each(function(){if(1==$(this).hasClass("clsremoveprojectfileonupdate")){var b=$(this).find("a").prop("title");a=a+b+"~"}}),$("#divMainLoader").css("display","block"),_BaseUrl=_vrLocationOrigin+"/Bug/DeleteFile";var b={FileName:a,TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,b,submitProjectData)}else submitProjectData();$("#lblMagFieldVal1").text($("#txtNewProjName").val());var c=$("#txtSelectedProjManager").val();$("#lblMagFieldVal2").attr("title",c),cropText($("#lblMagFieldVal2"),c,_vrTextFieldUserManagerLen)}function customerProjValuesRebind(a){var b=a.MultipleResults[0].LstProjects,c=jQuery.grep(b,function(a){return a.ProjectCustomerID==parseInt(_vrMagnifyCustId)});vrCustomerProjData={datatype:"json",type:"GET",cache:!1,datafields:_vrProjDataFields,localdata:c},_vrCustSourceData=c,event.preventDefault(),$("#divMainLoader").css("display","none")}function checkProjNameField(){$.trim($("#txtNewProjName").val()).length>0&&($("#txtNewProjName").removeClass("error"),0==$("#divCreateNewProject .error").length&&$(".clserrorprojlbl").css("display","none"))}function submitProjectData(){if(_vrNewProjectAttachedFiles="",$("#divCreateNewProject .clsprojreqfields").each(function(){0==$.trim($(this).val()).length&&($(this).addClass("error"),$(".clserrorprojlbl").css("display","block"))}),$(".error").length>0)return!1;for(var a=$("#JqxGridSprint").jqxGrid("getrows"),b=[],c=0,d=0;d<a.length;d++)notEmpty(d)&&c++;c!=a.length&&$(".clserrorsprintlbl").css("display","block"),_vrProjCreationStatus=_vrProjInsertionStatus;var e="";$("#divInformToMembers input:checked").each(function(){e+=$(this).attr("value")+","}),e=e.substr(0,e.length-1);var f=($("#txtVersionNumStart").val()+"!^"+$("#txtVersionNumEnd").val(),GetInformToIds("ddlNewProjManager","txtSelectedProjManager")),g=GetSelProjManagerIds();$(".clsprojdynfilename").each(function(){var a=$(this).prop("title");_vrNewProjectAttachedFiles=_vrNewProjectAttachedFiles+a+"~"}),$(".clsprojattachedfiles").each(function(){if(0==$(this).hasClass("clsremoveprojectfileonupdate")){var a=$(this).find("a").prop("title");_vrNewProjectAttachedFiles=_vrNewProjectAttachedFiles+a+"~"}});var h=$("#ddlFirstReleaseVersion option:selected").text()+"_"+$("#ddlSecondReleaseVersion option:selected").text();if(h=h.replace(/\'/g,"''"),c!=a.length)return $(this).addClass("error"),$(".clserrorsprintlbl").css("display","block"),!1;c=0;for(var d=0;d<a.length;d++)notEmpty(d)&&(b.push($("#JqxGridSprint").jqxGrid("getrowdata",d)),b[c].CreatedBy=_EmpId,b[c].STATUS=formatSprintStatus(a[d].SprintStatus),b[c].StartDate=formatSprintFromDate(a[d].StartDate),b[c].EndDate=formatSprintFromDate(a[d].EndDate),b[c].Name=a[d].SprintName.replace(/\'/g,"''"),void 0!=a[d].SprintID&&(b[c].ID=a[d].SprintID),delete b[c].uid,delete b[c].SprintName,delete b[c].SprintID,c++);$("#divMainLoader").css("display","block"),_BaseUrl=_vrLocationOrigin+"/Project/InsertProjDetails";var i={ProjectID:_vrSelectedProjectProjId,ProjectName:$("#txtNewProjName").val().replace(/\'/g,"''"),ProjectCustomerID:$("#ddlNewCustomer").val(),ModuleName:$("#txtNewModuleNames").val().replace(/\'/g,"''"),TechnologyID:$("#ddlNewProjTechnology").val(),ProjectPriorityID:$("#ddlNewProjPriority").val(),ProjectManager:f,ProjectBudget:$("#txtNewProjBudgetEfforts").val(),ProjectAlertPM:$("#txtPMPercentage").val(),ReleaseType:"",VersionNumber:1,ProjectDescription:$("#txtNewProjDescription").val().replace(/\'/g,"''"),InformUpdates:g,ProjectAtchDocmnt:_vrNewProjectAttachedFiles,VersionReleaseDate:h,ProjectStatusID:$("#ddlProjectStatus").val(),TokenID:_vrUserTokenId,SprintDetails:b};ajaxCallWithObject(_BaseUrl,i,reloadProjectGrid),$(".clserrorsprintlbl").css("display","none"),$("input[type = submit]").attr("disabled",!1),$("#divProjAttachFiles").empty()}function GetSelProjManagerIds(){for(var a=$("#JqxWidget").jqxDropDownList("getCheckedItems"),b=a.length,c="",d="",e=0;b>e;e++)c=a[e].value,"Select all"!=c&&(d=d+c+",");return d.substr(0,d.length-1)}function notEmpty(a){var b=$("#JqxGridSprint").jqxGrid("getrowdata",a);return""==b.SprintName||""==b.StartDate||""==b.EndDate||""===b.SprintStatus?!1:!0}function checkAllCheckboxes(){var a=$("#chkEmpSelectAll").is(":checked");$("#divInformToMembers").find(":checkbox").each(a?function(){$(this).prop("checked",!0)}:function(){$(this).prop("checked",!1)})}function uploadNewProjFile(){$("#flAttachProjFile").prop("disabled",!0),$("#btnSaveProject").prop("disabled",!0),$("#btnUpdateProj").prop("disabled",!0),$("#divProjAttachFiles").css("border","1px solid rgb(210, 208, 208)"),_BaseUrl=_vrLocationOrigin+"/Task/ToFilesUpload?strPicFileName="+_DefaultAttachedFileName+"&strTokenID="+_vrUserTokenId,uploadFile(_BaseUrl,loadNewProjFileName,"flAttachProjFile"),_VrProjFileUploading=_VrProjFileUploaded}function loadNewProjFileName(a){try{$("#imgProjFileLoader").css("display","none");var b=a.Value.toString(),c=b.split(",");if($.trim(a.Value).length>0&&$("#dailog").dialog("isOpen")===!0&&_vrDialogBoxNewProj==_vrDialogBoxTitle&&$.trim(_VrProjFileUploading).length>0){for(var d=0;d<c.length;d++)$("#divProjAttachFiles").append("<div class='clsnewprojdynupload'><label class='clsprojdynfilename' title='"+c[d]+"'>"+CropTextHtml(c[d],_vrLimitFileName)+"<a href='#'class='clsnewprojfileremove' ><img src='img/closeicon.ico'/><a></label></div>");$("#flAttachProjFile").replaceWith($("#flAttachProjFile").clone()),_VrProjFileUploading=""}else"undefined"!=typeof a.value&&deleteUploadedFileFunc(a.Value);$("#flAttachProjFile").prop("disabled",!1),$("#btnSaveProject").prop("disabled",!1),$("#btnUpdateProj").prop("disabled",!1)}catch(e){$("#imgProjFileLoader").css("display","none"),$("#flCtBugMultiUpload").prop("disabled",!1),$(".clsinsertbugdata").prop("disabled",!1),$("#btnUpdateProj").prop("disabled",!1)}}function reloadProjectGrid(){$("#dailog").dialog("close"),$("#divMainLoader").css("display","none"),fetchProjectsData(),$("#MagnifierDialog").dialog("isOpen")===!0&&projInProgLink(_vrSelectedProjectProjId,$("#txtNewProjName").val(),$("#txtSelectedProjManager").val())}function cancelNewProj(){$("#JqxGridSprint").jqxGrid("deleterow",rowIDs),$("#dailog").dialog("close")}function GetDayName(a){var b=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return null!=a||""!=a||a>7?b[a]:""}function BindData(){var a=$("#ddlReleaseDate option:selected").text();$("#ddlReleaseDate").prop("title",a),$("#ddlFirstReleaseVersion").empty(),$("#ddlSecondReleaseVersion").empty();var b=document.getElementById("ddlReleaseDate").value,c=(document.getElementById("ddlFirstReleaseVersion").value,document.getElementById("ddlSecondReleaseVersion").value,new Array),e=new Array;d=new Date,dateForMonth=new Date;for(var f=(d.getMonthName(),d.getDate(),new Date(d.getYear(),d.getMonth()+1,1,-1).getDate()),g=0;7>g;g++){var h=GetDayName(dateForMonth.getDay());0==h?dateForMonth.setDate(dateForMonth.getDate()+1):f!=dateForMonth.getDate()?(c[g]=h+" "+(dateForMonth.getDate()+1)+"/"+(parseInt(dateForMonth.getMonth())+1)+"/"+dateForMonth.getFullYear(),dateForMonth.setDate(dateForMonth.getDate()+1)):(dateForMonth.setDate(dateForMonth.getDate()+1),c[g]=h+" "+dateForMonth.getDate()+"/"+(parseInt(dateForMonth.getMonth())+1)+"/"+dateForMonth.getFullYear())}for(var g=0;32>g;g++){var h=GetDayName(d.getDay());0==h?d.setDate(d.getDate()+1):(f!=d.getDate()&&(1==d.getDate()&&(h=GetDayName(parseInt(d.getDay())-parseInt(1)),h="undefined"==typeof h?GetDayName(6):h,e[g]=h+" "+d.getDate()+"/"+(parseInt(d.getMonth())+1)+"/"+d.getFullYear(),g++,h=GetDayName(d.getDay())),e[g]=h+" "+(d.getDate()+1)+"/"+(parseInt(d.getMonth())+1)+"/"+d.getFullYear()),d.setDate(d.getDate()+1))}if(1==b||3==b||4==b){if(document.getElementById("ddlFirstReleaseVersion").style.display="inline",document.getElementById("ddlSecondReleaseVersion").style.display="none",1==b||3==b)for(var i=0;7>i;i++){var j="";if(void 0==c[i]);else{j=c[i];var k=c[i],l=document.createElement("option"),m=document.getElementById("ddlFirstReleaseVersion");document.getElementById("ddlFirstReleaseVersion").options.add(l),m.options[m.selectedIndex].value,l.text=j,l.value=k}}if(4==b){document.getElementById("ddlFirstReleaseVersion").innerHTML="";for(var i=0;32>i;i++){var j="";if(void 0==e[i]);else{j=e[i];var k=e[i],l=document.createElement("option");document.getElementById("ddlFirstReleaseVersion").options.add(l),l.text=j,l.value=k}}}}else if(2==b||5==b){if(document.getElementById("ddlFirstReleaseVersion").style.display="inline",document.getElementById("ddlSecondReleaseVersion").style.display="inline",2==b){document.getElementById("ddlFirstReleaseVersion").innerHTML="",document.getElementById("ddlSecondReleaseVersion").innerHTML="";for(var i=0;7>i;i++){var n="",o="";if(void 0==c[i]);else{n=c[i],o=c[i];var p=document.createElement("option"),q=document.createElement("option");document.getElementById("ddlFirstReleaseVersion").options.add(p),document.getElementById("ddlSecondReleaseVersion").options.add(q),p.text=n,p.value=o,q.text=n,q.value=o}}}if(5==b){document.getElementById("ddlFirstReleaseVersion").innerHTML="",document.getElementById("ddlSecondReleaseVersion").innerHTML="";for(var i=0;32>i;i++){var j="";if(void 0==e[i]);else{j=e[i];var k=e[i],p=document.createElement("option"),q=document.createElement("option");document.getElementById("ddlFirstReleaseVersion").options.add(p),document.getElementById("ddlSecondReleaseVersion").options.add(q),p.text=j,p.value=k,q.text=j,q.value=k}}}var r=$("#ddlFirstReleaseVersion option:selected").text();$("#ddlFirstReleaseVersion").prop("title",r);var s=$("#ddlSecondReleaseVersion option:selected").text();$("#ddlSecondReleaseVersion").prop("title",s)}else document.getElementById("ddlFirstReleaseVersion").style.display="none",document.getElementById("ddlSecondReleaseVersion").style.display="none"}function ShowOneDDL(){document.getElementById("ddlFirstReleaseVersion").style.display="inline",document.getElementById("ddlSecondReleaseVersion").style.display="none"}function ShowTwoDDL(){document.getElementById("ddlFirstReleaseVersion").style.display="inline",document.getElementById("ddlSecondReleaseVersion").style.display="inline"}function deleteUploadedProjFile(){var a="";$(".clsprojdynfilename").each(function(){var b=$(this).prop("title");a=a+b+"~"}),deleteUploadedFileFunc(a)}function deleteUploadedFileFunc(a){_BaseUrl=_vrLocationOrigin+"/Bug/DeleteFile";var b={FileName:a,TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,b,loadNewProjFileName)}function deleteSelQuoteRec(a){}function setEditableDisable(){$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Section","editable",!1),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","IsTaskCreated","editable",!1),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Requirement","editable",!1),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Comments","editable",!1),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Category","editable",!1),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Development","editable",!1),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","TaskCategoryType","editable",!1),$(".clsquotationfields").attr("disabled",!0),$(".clshidequotebtns").css("display","none"),$(".clscreatequotefields").find(".ui-datepicker-trigger").css("display","none"),$("#txtQuoteDate").css("width","195px").attr("disabled",!0),$("#btnCreateTaskRowQuote").css("display","inline")}function setEditableEnable(){$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Section","editable",!0),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","IsTaskCreated","editable",!0),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Requirement","editable",!0),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Comments","editable",!0),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Category","editable",!0),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","Development","editable",!0),$("#jqxQuoteGrid").jqxGrid("setcolumnproperty","TaskCategoryType","editable",!0),$(".clsquotationfields").attr("disabled",!1),$("#ddlQuoteStatus").attr("disabled",!1),$(".clshidequotebtns").css("display","inline"),$("#btnCreateTaskRowQuote").css("display","none"),$(".clscreatequotefields").find(".ui-datepicker-trigger").css("display","none")}function createNewQuote(){_vrQuoteProjId=_vrDefaultQuoteId,_vrQuoteCustId=_vrDefaultQuoteId,_vrQuoteEffEst=_vrDefaultQuoteId,_vrQuoteRevBy=_vrDefaultQuoteId,_vrQuoteStatus=_vrDefaultQuoteId,$("#ddlQuoteProjectName").empty(),$("#ddlQuoteProjectName").append("<option value='0'>Select project</option>"),loadDialogFields();var a=[];$("#btnSaveQuote").css("display","inline"),$("#btnUpdateQuote").css("display","none"),loadQuotationDetailsGrid(a),$(".clsquotemandatory").removeClass("error"),_vrQuoteTaskCreateStatus=0}function loadDialogFields(){_BaseUrl=_vrLocationOrigin+"/customer/GetCustomerNames?strTokenID="+_vrUserTokenId+"&intEmpID="+_EmpId+"&intRoleId="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindQuoteCustDropdown),_BaseUrl=_vrLocationOrigin+"/User/GetActiveEmployeeDetails?strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindActiveUsers),_BaseUrl=_vrLocationOrigin+"/customer/GetQuoteStatusDetails?strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindQuotationStatus),$("#dailog").dialog("option","title",_vrDialogBoxNewQuote),$(".clsdailogfields").css("display","none"),$("#divCreateQuote").css("display","inline-block"),$(".clshidequotebtns").css("display","inline"),$("#btnCreateTaskRowQuote").css("display","none"),$("#dailog").dialog("open"),$("#txtQuoteDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",minDate:0,showButtonPanel:!0,changeMonth:!0,changeYear:!0}),$("#txtQuoteDate").datepicker("setDate",new Date)}function getQuoteCustomers(){_BaseUrl=_vrLocationOrigin+"/Project/GetProjectData";var a={ProjectName:0,ProjectCustomerID:0,ProjectStatusID:"0",ProjectID:0,EmpID:_EmpId,RoleID:_UserRoleId,TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,a,bindQuoteCustDropdown)}function loadQuotationDetailsGrid(a){"undefined"==typeof a&&(a=[]),1==a.length&&0==a[0].QuoteDetailsID&&(a=[]);try{var b={datatype:"json",type:"GET",cache:!1,datafields:_vrQuoteDetailsDataFields,localdata:a,pagesize:_vrDefaultCustomerSizer},c=new $.jqx.dataAdapter(b);$("#jqxQuoteGrid").jqxGrid({width:1035,source:c,sortable:!0,autoheight:!0,enabletooltips:!0,editable:!0,columnsresize:!0,filterable:!0,editable:!0,editmode:"click",showaggregates:!0,showstatusbar:!0,statusbarheight:25,columns:[{text:"QuoteID",columntype:"textbox",datafield:"QuoteID",cellsalign:"right",width:"50px",align:"center",hidden:!0},{text:"QuoteDetailsID",columntype:"textbox",datafield:"QuoteDetailsID",cellsalign:"right",width:"50px",align:"center",hidden:!0},{text:"Sl. No",columntype:"textbox",datafield:"SLNo",cellsalign:"right",width:"50px",align:"center",hidden:!0},{text:"Tasks",columntype:"checkbox",datafield:"IsTaskCreated",align:"center",cellsalign:"right",checked:!1,hasThreeStates:!1,width:"40px",checked:!0,createeditor:function(){}},{text:"Section",columntype:"textbox",datafield:"Section",width:"65px",align:"center"},{text:"Requirement",columntype:"textbox",datafield:"Requirement",width:"100px",align:"center"},{text:"Comments",columntype:"textbox",datafield:"Comments",width:"160px",align:"center"},{text:"Category",columntype:"dropdownlist",datafield:"TaskCategoryType",width:"180px",align:"center",createeditor:function(a,b,c){c.jqxDropDownList({autoDropDownHeight:!0,source:_vrQuoteCategory,placeHolder:"Select category",promptText:"Select category",width:180})},cellvaluechanging:function(a,b,c,d,e){var f=$("#jqxQuoteGrid").jqxGrid("getcellvalue",a,"TaskCategoryType");return""==e?f:void 0}},{text:"Dev",columngroup:"Efforts(In hours)",columntype:"textbox",datafield:"Development",width:"80px",align:"center",cellsalign:"right",editable:!0,columntype:"numberinput",inputMode:"simple",aggregates:["sum"],createeditor:function(a,b,c){c.jqxNumberInput({decimalDigits:2,digits:8,min:0})},cellsrenderer:linkrenderer_timeformatForBillingReport,aggregatesrenderer:function(a){var b="",c=0,d="Total";return $.each(a,function(a,b){c+=b}),b+='<div style="position: relative; margin: 4px; overflow: hidden;">'+d+": "+displayFormat(c)+"</div>"}},{text:"Test",columngroup:"Efforts(In hours)",columntype:"textbox",datafield:"Testing",width:"80px",align:"center",editable:!1,columntype:"numberinput",inputMode:"simple",aggregates:["sum"],createeditor:function(a,b,c){c.jqxNumberInput({decimalDigits:2,digits:8,min:0})},cellsrenderer:linkrenderer_timeformatForBillingReport,aggregatesrenderer:function(a){var b="",c=0,d="Total";return $.each(a,function(a,b){c+=b}),b+='<div style="position: relative; margin: 4px; overflow: hidden;">'+d+": "+displayFormat(c)+"</div>"}},{text:"Doc",columngroup:"Efforts(In hours)",columntype:"textbox",datafield:"Documentation",width:"80px",align:"center",editable:!1,columntype:"numberinput",inputMode:"simple",aggregates:["sum"],createeditor:function(a,b,c){c.jqxNumberInput({decimalDigits:2,digits:8,min:0})},cellsrenderer:linkrenderer_timeformatForBillingReport,aggregatesrenderer:function(a){var b="",c=0,d="Total";return $.each(a,function(a,b){c+=b}),b+='<div style="position: relative; margin: 4px; overflow: hidden;">'+d+": "+displayFormat(c)+"</div>"}},{text:"Sup",columngroup:"Efforts(In hours)",columntype:"textbox",datafield:"Support",width:"80px",align:"center",editable:!1,columntype:"numberinput",inputMode:"simple",aggregates:["sum"],createeditor:function(a,b,c){c.jqxNumberInput({decimalDigits:2,digits:8,min:0})},cellsrenderer:linkrenderer_timeformatForBillingReport,aggregatesrenderer:function(a){var b="",c=0,d="Total";return $.each(a,function(a,b){c+=b}),b+='<div style="position: relative; margin: 4px; overflow: hidden;">'+d+": "+displayFormat(c)+"</div>"}},{text:"Dep",columngroup:"Efforts(In hours)",columntype:"textbox",datafield:"Deployment",width:"80px",align:"center",editable:!1,columntype:"numberinput",inputMode:"simple",aggregates:["sum"],createeditor:function(a,b,c){c.jqxNumberInput({decimalDigits:2,digits:8,min:0})},cellsrenderer:linkrenderer_timeformatForBillingReport,aggregatesrenderer:function(a){var b="",c=0,d="Total";return $.each(a,function(a,b){c+=b}),b+='<div style="position: relative; margin: 4px; overflow: hidden;">'+d+": "+displayFormat(c)+"</div>"}},{text:"Hours per task",columntype:"textbox",datafield:"TotalHours",width:"90px",align:"center",editable:!1,columntype:"numberinput",inputMode:"simple",aggregates:["sum"],createeditor:function(a,b,c){c.jqxNumberInput({decimalDigits:2,digits:8,min:0})},cellsrenderer:linkrenderer_timeformatForBillingReport,aggregatesrenderer:function(a){var b="",c=0,d="Total";return $.each(a,function(a,b){c+=b}),b+='<div style="position: relative; margin: 4px; overflow: hidden;">'+d+": "+displayFormat(c)+"</div>"}}],columngroups:[{text:"Efforts(In hours)",align:"center",name:"Efforts(In hours)",align:"center"}]});var d=$("#jqxQuoteGrid").jqxGrid("getcolumnaggregateddata","TotalHours",["sum"]).sum;$("#lblTtlHrsExt").text(displayFormat(d)),$("#divMainLoader").css("display","none")}catch(e){$("#divMainLoader").css("display","none")}}function bindQuoteCustDropdown(a){$("#ddlQuoteClientName").empty(),$("#ddlQuoteProjectName").empty(),$("#ddlQuoteProjectName").append("<option value='0'>Select project</option>");$("#ddlQuoteClientName").append("<option value='0'>Select customer</option>"),bindDataToDropDown(a,"ddlQuoteClientName","CustomerID","CustomerCompanyName"),setTimeout(function(){isNaN(checkDropdownValues("ddlQuoteClientName",_vrQuoteCustId))||($("#ddlQuoteClientName").val(_vrQuoteCustId),_vrQuoteCustId!=_vrDefaultQuoteId&&$("#ddlQuoteClientName").change())},_vrQuoteCustomerInterval)}function bindQuoteProjectDdl(a){$("#ddlQuoteProjectName").empty();$("#ddlQuoteProjectName").append("<option value='0'>Select project</option>"),"undefined"!=typeof a&&(bindDataToDropDown(a,"ddlQuoteProjectName","ProjectID","ProjectName"),isNaN(checkDropdownValues("ddlQuoteProjectName",_vrQuoteProjId))||$("#ddlQuoteProjectName").val(_vrQuoteProjId))}function bindActiveUsers(a){$("#ddlQuoteEffEstimated").empty(),$("#ddlQuoteReviewedBy").empty(),$("#ddlQuoteEffEstimated").append("<option value='0'>Select estimated by </option>"),bindDataToDropDown(a,"ddlQuoteEffEstimated","EmpID","EmpFirstName"),$("#ddlQuoteReviewedBy").append("<option value='0'>Select reviewed by</option>"),bindDataToDropDown(a,"ddlQuoteReviewedBy","EmpID","EmpFirstName"),isNaN(checkDropdownValues("ddlQuoteEffEstimated",_vrQuoteEffEst))||$("#ddlQuoteEffEstimated").val(_vrQuoteEffEst),isNaN(checkDropdownValues("ddlQuoteReviewedBy",_vrQuoteRevBy))||$("#ddlQuoteReviewedBy").val(_vrQuoteRevBy)}function bindQuotationStatus(a){try{$("#ddlQuoteStatus").empty(),$("#ddlQuoteStatus").append("<option value='0'>Select status </option>"),bindDataToDropDown(a,"ddlQuoteStatus","StatusID","StatusType"),$("#ddlQuoteStatus").val(_vrQuoteStatus),_vrQuoteClienbtApprove==_vrQuoteStatus&&($(".clsquotationfields").attr("disabled",!0),$(".clshideinsertdatabtns").css("display","none"),$("#ddlQuoteStatus").attr("disabled",!0),$(".clshidequotebtns").css("display","none"),$("#btnCreateTaskRowQuote").css("display","inline"),setEditableDisable()),0!=_vrQuoteTaskCreateStatus&&$("#btnCreateTaskRowQuote").css("display","none")}catch(b){}}function updateQuotation(){_vrQuoteRecStatus=_vrQuoteUpd,saveQuotation(_vrQuoteUpdateId)}function saveQuotation(a){var b=[],c="",d=0;if(!validateQuoteMandatory())return!1;for(var e=$("#jqxQuoteGrid").jqxGrid("getrows"),f=0;f<e.length;f++)b.push($("#jqxQuoteGrid").jqxGrid("getrowdata",f)),b[f].Category="Bug on Production"==$.trim(b[f].TaskCategoryType)?2:"Coding"==$.trim(b[f].TaskCategoryType)?3:"Documentation"==$.trim(b[f].TaskCategoryType)?5:"Feature addition/development"==$.trim(b[f].TaskCategoryType)?1:"Independent Testing"==$.trim(b[f].TaskCategoryType)?4:6;d=a;var g=$("#ddlQuoteClientName").val(),h=$("#ddlQuoteProjectName").val(),i=$("#ddlQuoteEffEstimated").val(),j=$("#ddlQuoteReviewedBy").val(),k=$("#ddlQuoteStatus").val(),l=$("#txtQuoteDate").val();if($.trim(l).length>0){var m=l.split("/");c=m[2]+"-"+m[1]+"-"+m[0]}$("#divMainLoader").css("display","block");var n={QuoteID:d,CustomerID:g,ProjectID:h,Date:c,EffortsEstimatedBy:i,EffortsReviewedBy:j,QuoteStatus:k,QuoteHistoryDetails:b,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/customer/InsertQuoteDetails",ajaxCallWithObject(_BaseUrl,n,reloadQuotations)}function reloadQuotations(a){$("#dailog").dialog("close");loadQuotationFields(),$("#divMainLoader").css("display","none"),a.ResponseId>0&&($(".info").html(_vrQuoteRecStatus),showStatusDiv(),_vrQuoteRecStatus=_vrQuoteSucc)}function loadQuotationFields(){$("#divQuotationLoader").css("display","block"),_BaseUrl=_vrLocationOrigin+"/customer/GetQuoteStatusDetails?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindQuotationWidgetStatus),_BaseUrl=_vrLocationOrigin+"/customer/GetQuoteDetails?strTokenID="+_vrUserTokenId+"&intQuoteID="+_vrDefaultQuoteId+"&intRoleID="+_UserRoleId+"&intCustomerEmpID="+_EmpId,ajaxCall(_BaseUrl,bindDataToQuoteGrid)}function bindQuotationWidgetStatus(a){try{$("#ddlWidgetQuoteStatus").empty(),$("#ddlWidgetQuoteStatus").append("<option value='0'>Select status </option>"),bindDataToDropDown(a,"ddlWidgetQuoteStatus","StatusID","StatusType"),_QuoteIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_QuoteIndexNO]).length>0&&$("#ddlWidgetQuoteStatus").val(_vrWidgetCOntrolData[_QuoteIndexNO].ddlWidgetQuoteStatus)}catch(b){}}function bindDataToQuoteGrid(a){var b=a;"undefined"==typeof b&&(b=[]),_vrQuoteData={datatype:"json",type:"GET",cache:!1,datafields:_vrQuoteDataFields,localdata:b},bindDataToJqx("jqxQuotationGrid",_vrQuoteData,_vrQuoteWidgetColumns,_vrProjectsGridWidth),_QuoteIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_QuoteIndexNO]).length>0&&($("#ddlWidgetQuoteStatus").val(_vrWidgetCOntrolData[_QuoteIndexNO].ddlWidgetQuoteStatus),filterBasedOnQuoteStatus()),$("#divQuotationLoader").css("display","none"),$("#imgQuotationMagnify").attr("disabled",!1)}function getDataToEdit(a){var b=a;if("undefined"!=typeof b){_vrQuoteCustId=b[0].CustomerID,_vrQuoteEffEst=b[0].EffortsEstimatedBy,_vrQuoteRevBy=b[0].EffortsReviewedBy,_vrQuoteStatus=b[0].QuoteStatus,_vrQuoteProjId=b[0].ProjectID,_vrQuoteTaskCreateStatus=b[0].QuoteTaskStatus;var c=b[0].Date.split(" ");$("#txtQuoteDate").val(c[0])}$("#dailog").dialog("option","title",_vrDialogBoxNewQuote),$(".clsdailogfields").css("display","none"),$("#divCreateQuote").css("display","inline-block"),$("#dailog").dialog("open"),loadQuotationDetailsGrid(b),$("#divQuotationLoader").css("display","none")}function quoteLink(a){$(".clsquotationfields").attr("disabled",!1),$("#ddlQuoteStatus").attr("disabled",!1),$("#divMainLoader").css("display","block"),$(".clsquotemandatory").removeClass("error"),loadDialogFields(),$("#btnSaveQuote").css("display","none"),$("#btnUpdateQuote").css("display","inline"),_vrQuoteUpdateId=a,_vrQuoteTaskCreateStatus=0,_BaseUrl=_vrLocationOrigin+"/customer/GetQuoteDetails?strTokenID="+_vrUserTokenId+"&intQuoteID="+a+"&intRoleID="+_UserRoleId+"&intCustomerEmpID="+_EmpId,ajaxCall(_BaseUrl,getDataToEdit),event.preventDefault()}function refreshQuotationGrid(){_BaseUrl=_vrLocationOrigin+"/customer/GetQuoteDetails?strTokenID="+_vrUserTokenId+"&intQuoteID="+_vrDefaultQuoteId+"&intRoleID="+_UserRoleId+"&intCustomerEmpID="+_EmpId,ajaxCall(_BaseUrl,bindDataToQuoteGrid)}function filterBasedOnQuoteStatus(){var a=$("#ddlWidgetQuoteStatus option:selected").text(),b=_vrQuoteData,c=_vrQuoteData.localdata,d=[];d="0"!=$("#ddlWidgetQuoteStatus").val()?jQuery.grep(c,function(b){return b.StatusType==a}):_vrQuoteData.localdata,b.localdata=d,$("#jqxQuotationGrid").jqxGrid({source:b}),_vrQuoteData.localdata=c,disableJqxPagerButtonsOnLoad("jqxQuotationGrid"),$("#divQuotationLoader").css("display","none"),_QuoteIndexNO>-1&&(_QuoteIndexNO=-1)}function validateQuoteMandatory(){return $(".clsquotemandatory").each(function(){0==$.trim($(this).val())&&$(this).addClass("error")}),$(".error").length>0?($("#lblQuoteMandatoryError").css("display","block"),!1):!0}function insertMultipleTask(){if(!validateQuoteMandatory())return!1;for(var a=0,b=[],c=$("#ddlQuoteClientName").val(),d=$("#ddlQuoteProjectName").val(),e=$("#lblLogin").html(),f=$("#jqxQuoteGrid").jqxGrid("getrows"),g=0;g<f.length;g++){var h={TaskName:"",TaskDueDate:"",TaskDescription:"",AssignedTo:"",AnticipatedHours:"",InformTo:"",TaskReleaseVersion:"",ModuleName:"",SprintID:"",Comments:"",AttachedFiles:"",TaskCategoryID:""},i=0,j=$("#jqxQuoteGrid").jqxGrid("getrowdata",g);1==j.IsTaskCreated&&(j=$("#jqxQuoteGrid").jqxGrid("getrowdata",g),h.TaskName=j.Requirement,h.TaskDueDate="",h.TaskDescription=j.Comments,h.AssignedTo=0,h.AnticipatedHours=0,h.InformTo="",h.TaskReleaseVersion="",h.ModuleName="",h.SprintID=0,h.Comments="",h.AttachedFiles="",i="Bug on Production"==$.trim(j.TaskCategoryType)?2:"Coding"==$.trim(j.TaskCategoryType)?3:"Documentation"==$.trim(j.TaskCategoryType)?5:"Feature addition/development"==$.trim(j.TaskCategoryType)?1:"Independent Testing"==$.trim(j.TaskCategoryType)?4:6,h.TaskCategoryID=i,b.push(h)),a=j.QuoteID}var k={MultiTasks:b,TokenID:_vrUserTokenId,OwnerID:_EmpId,CustomerID:c,AssignedBy:e,TaskProjectID:d,TokenID:_vrUserTokenId,QuoteID:a};_BaseUrl=_vrLocationOrigin+"/Task/InsertMultipleTasks",ajaxCallWithObject(_BaseUrl,k,reloadQuoteTaskGrid)}function reloadQuoteTaskGrid(a){var b=a;b.ResponseId>0&&($(".info").html(_vrQuoteTaskStatus),showStatusDiv())}function startupModule(a){return jQuery(function(){a.init&&a.init()}),a}var vrBlnBeyondScope=!1,_vrEmpId="",_vrProjectId="",_vrblnProjId=!1,_vrblnEmpId=!1,_vrblnFromDate=!1,_vrblnToDate=!1,_BaseUrl="",_varSource="",vrBillRprtBillableHrs=0,vrBillRprtNonBillableHrs=0,vrBillRprtTotalHrs=0,vrBillingFlag=!1;$(document).ready(function(){$(".clsBillingReport").css("display","none"),$("#jqxBillingReport").on("cellbeginedit",function(a){var b=a.args;$("#cellbegineditevent").text("Event Type: cellbeginedit, Column: "+b.datafield+", Row: "+(1+b.rowindex)+", Value: "+b.value)}),$(".gridster").on("click","#btnRefreshBillingReportGrid",function(){_BRIndexNO=-1,$("#imgBIllingReportrMagnify").attr("disabled",!0),$("#ddlBillingRprtEmpName").val(_EmpId),$("#ddlBillingRprtProjectName").val(0),$("#divBillingReportLoading").css("display","block"),$("#chkBillingReportBeyondScope").prop("checked",!1),loadFieldsDataToBillRprt(),$("#imgBIllingReportrMagnify").attr("disabled",!1)}),$("#jqxBillingReport").on("cellendedit",function(a){var b=a.args;$("#cellendeditevent").text("Event Type: cellendedit, Column: "+b.datafield+", Row: "+(1+b.rowindex)+", Value: "+b.value)}),$("#jqxBillingReport").bind("cellendedit",function(a){{var b=a.args;b.datafield,b.rowindex,b.value,b.oldvalue}})});var linkrenderer_timeformatForBillingReport=function(a,b,c){var d="undefined"==typeof c||0==$.trim(c).length?_vrDefaultFmt:c.toString();if(d!=_vrDefaultFmt){var e=displayFormat(d);return"<div class='clsformatfields' title='"+e+"'>"+e+"</div>"}},linkrenderer_TaskName=function(a,b,c){return linkrendervaluesbilling("jqxBillingReport",a,b,c)},linkrendervaluesbilling=function(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=c.ProjectID,e=c.TaskName.toString(),f=convertDoubleSingleQuotetoChar(c.TaskName);f=JSON.stringify(f);var g=c.TaskID;return"<div class='clsaddellipsis'><a href='#' onclick='taskBRLink("+g+","+d+","+f+")' class='clsallBillingReportvaluesalign clsaddellipsis'>"+e+"</a></div>"}}catch(h){}},linkrenderer_Datetimeformat=function(a,b,c){var d=GetBillingReportFormat(c);return"<div title='"+d+"' class='clsbillingrptdatefrmt'><label title='"+d+"'>"+d+"</label></div>"},linkrenderer_comments=function(a,b,c){var d=c,e=d.replace(_vrNonBillDiv,_vrNonBillSepText),f=e;return f=f.replace(/\</g,"<span><</span>"),e=e.replace(/\'/g,"&#145").replace(/\'/g,"&#146"),"<div class='clsbillingrptcomments clsaddellipsis' title='"+e+"'><label title='"+e+"' >"+f+"</label></div>"},vrEmpID="0",vrEmpSelect=!0,vrCurSelmonth=0;$(document).ready(function(){$(".clsnewBoostermandatory").change(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#BRErrorDiv").css("display","none")}),$(".clsnewBoostermandatory").blur(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#BRErrorDiv").css("display","none")}),$("#ddlEmployeeName").change(function(){validateEmpName()}),$("body").on("change","#ddlBRYear",function(){vrCurSelmonth=$("#ddlBRMonth").val(),loadMonthsData(),$("#ddlBRMonth").val(vrCurSelmonth)}),$("#txtGivenScore").keydown(function(){var a=event.charCode||event.keyCode||0,b=$("input:radio[name=pointsTypeRadio]:checked").val(),c=$("#txtGivenScore").val();if(c.indexOf("-")>-1){if(8==a);else if(109==a)return!1}else if("1"==b&&109==a)return!1;return 189==a||8==a||9==a||46==a||109==a||190==a||a>=35&&40>=a||a>=48&&57>=a||a>=96&&105>=a}),$("#btnNewBrPointsCancel").click(function(){clearBoostaroosterFields(),$("#dailog").dialog("close")})});var linkrenderer_booster=function(a,b,c){return Pointsrenderer("jqxgridBrpoints",a,b,c)},linkrender_delete=function(a,b,c){return deleteRowrenderer("jqxgridBrpoints",a,b,c)},_vrJsonOutput="",X=XLS,XW={msg:"xls"},rABS="undefined"!=typeof FileReader&&"undefined"!=typeof FileReader.prototype&&"undefined"!=typeof FileReader.prototype.readAsBinaryString,wtf_mode=!1,idChooseExcel=document.getElementById("idChooseExcel"),vrCustId="",vrCustCompany="",vrContactName="",vrCmpEmailId="",vrWebsite="",vrCustomerProjData="",vrCustCompanyShow="",objCustomerDetailsMagnify="",str="",count=0;$(document).ready(function(){$(".gridster").on("click","#btnRefreshCustomerGrid",function(){_custIndexNO=-1,$("#imgCustomerMagnifier").attr("disabled",!0),$("#idCustomerLoding").css("display","block"),_vrSelCustomerStatus=_vrDefaultActiveStatus,$("#idSearchCustomer").val(""),bindCustomersDetails(),LoadCountDataToCustUserProjSilde(),$("#imgCustomerMagnifier").attr("disabled",!1),$("#idCustomerLoding").css("visibility","none")
}),$("#txtWebsite").blur(function(){var a=$(this).val();validateWebsite(a)}),$("#txtEmail").blur(function(){var a=$(this).val();validateEmail(a)}),$("#ddlCountryList").change(function(){$.trim($("#ddlCountryList").val()).length>0&&($("#ddlCountryList").removeClass("error"),0==$("#idShowCustomerDetails .error").length&&$("#errNewCustomerError").css("display","none"))}),$(".gridster").on("click","#btnCustomerResetSearch",function(){$("#idSearchCustomer").val(""),filterCustomersJqxGrid()});var a=0;$(".clsmobilevalidatefield").keypress(function(b){return b.keyCode>=48&&b.keyCode<=57||40==b.keyCode||41==b.keyCode||43==b.keyCode||45==b.keyCode||8==b.keyCode?(count++,a=1,count>1&&43==b.keyCode?!1:1==$("#txtPhone").val().length&&45==b.keyCode?!1:1==$("#txtNewUserContact").val().length&&45==b.keyCode?!1:1==$("#txtNewUserEmerContactNo").val().length&&45==b.keyCode?!1:void 0):!1}),$("#txtPhone").keydown(function(a){if(8==a.keyCode||46==a.keyCode){{$("#txtPhone").val()}$("#txtPhone").val().length<=1&&(count=0)}}),$("#txtNewUserContact").keydown(function(a){if(8==a.keyCode||46==a.keyCode){{$("#txtNewUserContact").val()}1==$("#txtNewUserContact").val().length&&(count=0)}})}),$("#txtNewUserEmerContactNo").keydown(function(a){if(8==a.keyCode){{$("#txtPhone").val()}1==$("#txtPhone").val().length&&(count=0)}});var linkrenderer_customers=function(a,b,c){return linkrendercustomervalues("jqxCustomerTrial",a,b,c)},linkrendercustomervalues=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);return null!=c&&(vrCustId=c.CustomerID,vrCustCompany=c.CustomerCompanyName,vrCustCompanyShow=convertDoubleSingleQuotetoChar(c.CustomerCompanyName.toString()),vrContactName=convertDoubleSingleQuotetoChar(c.ContactPerson),vrCmpEmailId=convertDoubleSingleQuotetoChar(c.Email.toString()),vrWebsite=convertDoubleSingleQuotetoChar(c.Website.toString())),"<div class='clscustcompanyvalues clsaddellipsis'><a href='#' onclick='customerValuesLink("+vrCustId+","+vrContactName+","+vrCmpEmailId+","+vrWebsite+","+vrCustCompanyShow+")' >"+vrCustCompany+"</a></div>"};$(document).ready(function(){});var vrUserEmpId="",vrUserFirstName="",vrUserName="",vrUserMobile="",vrUserAddress="",varEmpPrflPicNme="",dtToday=new Date;_vrMagnifyUserTrailGridWidth=1048,$(document).ready(function(){$("#userProfilePicture").error(function(){}),$("#txtNewUserDateOfBirth").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,maxDate:new Date,yearRange:_vrMinYear+":"+dtToday.getFullYear(),showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:""});var a=$("#txtNewUserDateOfJoin,#txtNewUserResignDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(b){if($.trim($("#txtNewUserDateOfJoin").val()).length>0){$("#txtNewUserDateOfJoin").removeClass("error");for(var c=0;c<a.length;++c)a[c].id>this.id&&$(a[1]).datepicker("option","minDate",b),$(a[1]).datepicker("option","maxDate",null)}0==$(".error").length&&$(".clsmandatoryuserreqfield").css("display","none")}});$(".clscheckcharacters").keypress(function(a){var b=String.fromCharCode(a.which),c="~`#$%&^*|\\{}[]:;<>,.?/+=";return c.indexOf(b)>-1?!1:void 0}),$(".gridster").on("click","#btnRefreshUserGrid",function(){_userIndexNO=-1,$("#imgUserMagnify").attr("disabled",!0),$("#divUserLoading").css("display","block"),_vrSelUserStatus=_vrDefaultActiveStatus,$("#txtUserSearch").val(""),_vrLocalUserDataOnUserClick=null,LoadUserDataToWidget(),LoadCountDataToCustUserProjSilde(),$("#imgUserMagnify").attr("disabled",!1),$("#divUserLoading").css("visibility","none")}),$("#ddlNewUserDesignation").change(function(){$.trim($("#ddlNewUserDesignation").val()).length>0&&($("#ddlNewUserDesignation").removeClass("error"),0==$("#idShowNewUser .error").length&&$("#mandatoryUserReqField").css("display","none"))}),$(".gridster").on("click","#btnUserResetSearch",function(){$("#txtUserSearch").val(""),filterUserJqxGrid()}),$("#iddeployemail").keypress(function(a){return a.keyCode>=33&&a.keyCode<=42||94==a.keyCode?!1:void 0})});var vrUserEmpId="",vrUserFirstName="",vrUserName="",vrUserMobile="",vrUserAddress="",linkrenderer_uservalue=function(a,b,c){return linkrenderuseridvalues("jqxUserTrial",a,b,c)},linkrenderuseridvalues=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);return null!=c&&(vrUserEmpId=c.EmpID,vrUserFirstName=checkIsUndefined(c.EmpFirstName).toString(),vrUserName=checkIsUndefined(c.EmpFirstName).toString()+" "+checkIsUndefined(c.EmpLastName).toString(),vrUserName=convertDoubleSingleQuotetoChar(vrUserName),vrUserMobile=JSON.stringify(checkIsUndefined(c.Phone)).toString(),vrUserAddress=convertDoubleSingleQuotetoChar(checkIsUndefined(c.Address).toString())),"<div><a href='#' onclick='userValueLink("+vrUserEmpId+","+vrUserName+","+vrUserMobile+","+vrUserAddress+")'  class='clsalluservaluesalign'>"+vrUserEmpId+"</a></div>"},linkrenderer_user=function(a,b,c){return linkrenderuservalues("jqxUserTrial",a,b,c)},linkrenderuservalues=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);return null!=c&&(vrUserEmpId=c.EmpID,vrUserFirstName=checkIsUndefined(c.EmpFirstName).toString(),vrUserName=checkIsUndefined(c.EmpFirstName).toString()+" "+checkIsUndefined(c.EmpLastName).toString(),vrUserName=convertDoubleSingleQuotetoChar(vrUserName),vrUserMobile=JSON.stringify(checkIsUndefined(c.Phone)).toString(),vrUserAddress=convertDoubleSingleQuotetoChar(checkIsUndefined(c.Address).toString())),"<div class='clsaddellipsis'><a href='#' onclick='userValueLink("+vrUserEmpId+","+vrUserName+","+vrUserMobile+","+vrUserAddress+")'  class='clsalluservalues clsaddellipsis'>"+vrUserFirstName+"</a></div>"};window.onload=function(){noBack()};var returnStatus=!0,_vrSuccessStatus="",_vrSuccessBillingFlag="";window.history.forward(),$(document).keydown(function(a){var b=a.which;return 8==b&&$(a.target).attr("readonly")?(a.returnValue=!1,!1):void 0});var linkrenderer_tasksmagnifier=function(a,b,c){return linkrendertask("jqxPreviewGrid",a,b,c)};$(document).ready(function(){$("body").on("mouseup","input",function(){$(this).attr("id")}),$(".clsdisablecutcopypaste").on("paste",function(){var a=$(this).val(),b=$(this).attr("id"),c=this;setTimeout(function(){var d=$(c).val();isNaN(d)&&$("#"+b).val(a)},5)}),$("#ddlTaskTrailProject").mousedown(function(){$(this).width("css","120px")}),$(".clsvalidateemailkeypress").keypress(function(a){return a.keyCode>=33&&a.keyCode<=42||94==a.keyCode?!1:void 0})}),$(function(){$("body").on("click",".clsgetgridcolumns",function(a){var b=a.pageX,c=a.pageY;$(".dropdown-menu").css("left",b+"px"),$(".dropdown-menu").css("top",c+"px"),$(".dropdown-menu").css("display","block")}),$("body").on("click",".clsgetMagnifygridcolumns",function(a){var b=a.pageX,c=a.pageY;$(".dropdown-menu").css("left",b+"px"),$(".dropdown-menu").css("top",c+"px"),$(".dropdown-menu").css("display","block")}),$("#divListOfJqxColumns").on("click",".clschkdyncolumns",function(){var a=$(this).parent().attr("class"),b=$(this).attr("id");"chkdynselectall"!==b?checkUserPrefSelectAll(a):CheckAllColumns()}),$(".gridster").click(function(){$(".dropdown-menu").css("display","none")}),$("#MagnifierDialog").click(function(){$(".dropdown-menu").css("display","none")}),$("#MagnifierDialog").on("dialogdrag",function(){$(".dropdown-menu").css("display","none")})}),$(document).unbind("keydown").bind("keydown",function(a){var b=!1;if(8===a.keyCode){var c=a.srcElement||a.target;b="INPUT"===c.tagName.toUpperCase()&&("TEXT"===c.type.toUpperCase()||"PASSWORD"===c.type.toUpperCase()||"FILE"===c.type.toUpperCase()||"EMAIL"===c.type.toUpperCase()||"SEARCH"===c.type.toUpperCase()||"DATE"===c.type.toUpperCase())||"TEXTAREA"===c.tagName.toUpperCase()?c.readOnly||c.disabled:!0}b&&a.preventDefault()});var StatusType=[],TaskCount=[],vrAllTasksCount="";$(document).ready(function(){$("#ddlGraphProjects").on("change",function(){bindGraphValues()}),$("#graphloaderImage").css("display","none")}),$(document).ready(function(){var a="",b="",c=new Date;$("#lblCopyRightYear").text(c.getFullYear()),$(".clsInput").keypress(function(a){var b=a.which;return 13==b?($("#btnLogin").click(),!1):void 0});var d=new Array;if(window.location.search.split("?").length>1){for(var e=window.location.search.split("?")[1].split("&"),f=0;f<e.length;f++){var g=e[f].split("=")[0],h=decodeURIComponent(e[f].split("=")[1]);d[g]=h}_VrFrgtPswrdGuid=d.FrgtPswrd,_BaseUrl=_vrLocationOrigin+"/User/CheckFrgtPswGuidStatus?strGuid="+encodeURIComponent(_VrFrgtPswrdGuid),returnBool(_BaseUrl,showDailogBasedGuid)}if(0!=$.trim(_VrFrgtPswrd).length&&$("#dgResetPassword").dialog("open"),null!=localStorage.getItem("LoggedEmailId")&&null!=localStorage.getItem("LoggedPassword")){var i=localStorage.getItem("LoggedEmailId"),j=localStorage.getItem("LoggedPassword");$("#txtEmail").val(i),$("#txtPassword").val(j),$("#chkRememberMe").prop("checked",!0)}$("#btnLogin").click(function(){if(a=$.trim($("#txtEmail").val()),b=$.trim($("#txtPassword").val()),!(a.length>0&&b.length>0))return 0==a.length&&0==b.length?($("#lblInvalid").text(_vrValidateBoth),$("#divInvlaidCred").css("display","block")):0==b.length?($("#lblInvalid").text(_vrValidatePsw),$("#divInvlaidCred").css("display","block")):0==a.length&&($("#lblInvalid").text(_vrValidateEmail),$("#divInvlaidCred").css("display","block")),!1;$("#imgLoginLoader").css("display","inline");var c=$("#chkRememberMe").prop("checked");c?(localStorage.setItem("LoggedEmailId",a),localStorage.setItem("LoggedPassword",b)):localStorage.clear();var d=_vrLocationOrigin+"/USer/EncryptPswrd",e={EmpUserName:a,EmpPassword:b};$.ajax({type:"POST",url:d,contentType:"application/json;charset=utf-8",data:JSON.stringify(e),processData:!1,crossDomain:!0,dataType:"json",timeout:18e3,success:function(a){if("1"==a.RecordCount){var b=a.SingleResult,c=b.EmpFirstName+" "+b.EmpLastName,d=b.EmpID,e=b.TokenId,f=b.UserRoleID,g=b.IsProjectManager;$.cookie("LoggedNow",_vrLoggedCheckDefault),localStorage.setItem("LoggedEmpId",d),localStorage.setItem("LoggedEmpName",c),localStorage.setItem("LoggedUserRole",f),localStorage.setItem("LoggedUserTokenId",e),localStorage.setItem("LoggedIsProjManager",g),clearLocalStorage(),window.location.href="home.html"}else $("#lblInvalid").text(_vrValidateCred),$("#divInvlaidCred").css("display","block"),$("#imgLoginLoader").css("display","none")},error:function(){return $("#divError").dialog("open"),$("#imgLoginLoader").css("display","none"),!1}})}),$("#lblForgotPassword").click(function(){$("#dgForgotPassword").dialog("open"),$("#txtForgotEmail").val("")}),$("#btnReset").click(function(){var a=$("#txtForgotEmail").val();a.length>0?(_BaseUrl=_vrLocationOrigin+"/User/CheckIfUserExists?strEmpEmail="+encodeURIComponent(a),returnBool(_BaseUrl,EmailUser),$("#dgForgotPassword").dialog("close")):$("#lblEmailEmpty").css("display","inline")}),$("#btnResetPsw").click(function(){$("#txtNewPassword").val()==$("#txtReNewPassword").val()?$("#lblPswInfo").css("display","none"):$("#lblPswInfo").css("display","inline")}),$("#btnCloseErrDialog").click(function(){$("#divError").dialog("close")})});var vrEnvironment="1",vrDepCheckId=0,vrClear=0,vrbtnStatus="",vrDepChangeStatus=0,vrEmpDeployDisableGrid=0;$(document).ready(function(){$(function(){$(".chosen-container").chosen()}),$("#slstatus").change(function(){vrDepChangeStatus=1}),$("#btnDepClose").click(function(){$("#dailog").dialog("close")}),bindFieldsToGrid([]),$("#deployaddrowbutton").click(function(){$("#jqxgridFilesDetails").jqxGrid("addrow",null,{}),$("#jqxgridFilesDetails").jqxGrid("refreshData")}),$("#deploydeleterowbutton").click(function(){var a=$("#jqxgridFilesDetails").jqxGrid("getselectedrowindex"),b=($("#jqxgridFilesDetails").jqxGrid("getrowdata",a),$("#jqxgridFilesDetails").jqxGrid("getdatainformation").rowscount);if(a>=0&&b>a){var c=$("#jqxgridFilesDetails").jqxGrid("getrowid",a);$("#jqxgridFilesDetails").jqxGrid("deleterow",c)}$("#jqxgridFilesDetails").jqxGrid("refreshData")}),$("#ddldeploymentProject").on("change",function(){$("#ddldeploymentTask").empty().trigger("chosen:updated"),$("#ddldeploymentTask").append("<option value='0'>Select task</option>"),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+$("#ddldeploymentProject").val()+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagDeployTask);var a=$("#ddldeploymentProject option:selected").text();$("#ddldeploymentProject").prop("title",a);var b=_vrLocationOrigin+"/project/GetChecklistDataBasedOnProject?intProjectID="+parseInt($("#ddldeploymentProject").val())+"&&strTokenID="+_vrUserTokenId;ajaxCall(b,bindFieldsToText),$(".clsnewdeployvaluefields").find("#ddldeploymentProject_chosen").find(".chosen-single").removeClass("error"),0==$(".error").length&&$("#errNewDeployError").css("display","none")}),$("#ddldeploymentTask").on("change",function(){$(".clsnewdeployvaluefields").find("#ddldeploymentTask_chosen").find(".chosen-single").removeClass("error")}),$("#ddldeploymentApplication").on("change",function(){_BaseUrl=_vrLocationOrigin+"/project/GetChecklistDataBasedOnApplication?intChecklistID="+vrDepCheckId+"&&intGetID=3&&strSaveButtonValue="+vrbtnStatus+"&&intChecklistAppID="+parseInt($("#ddldeploymentApplication").val())+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindFieldsToGrid),$("#ddldeploymentApplication_chosen").removeClass("error"),0==$(".error").length&&$("#errNewDeployError").css("display","none")}),$("#ddldeploymentTask").change(function(){$(".clsnewdeployvaluefields").find(".chosen-choices").removeClass("error"),0==$(".error").length&&$("#errNewDeployError").css("display","none")}),$("#iddeployemail").blur(function(){var a=$(this).val();validateDeployEmail(a)}),$("#iddeployversion").keypress(function(a){return a.keyCode>=48&&a.keyCode<=57||a.keyCode>=97&&a.keyCode<=122||8==a.keyCode||46==a.keyCode||95==a.keyCode?void 0:!1}),$("#iddeployversion").bind("paste",function(a){return a.keyCode>=48&&a.keyCode<=57||a.keyCode>=97&&a.keyCode<=122||8==a.keyCode||46==a.keyCode||95==a.keyCode?void 0:!1}),$("#iddeploysvn").keypress(function(a){return a.keyCode>=48&&a.keyCode<=57||8==a.keyCode||a.keyCode>=97&&a.keyCode<=122?void 0:!1}),$(".clsnewdeploymandatory ").change(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#errNewDeployError").css("display","none")}),$(".clsnewdeploymandatory").blur(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#errNewDeployError").css("display","none")}),$("input:radio[name=Deployment]").click(function(){vrEnvironment=$(this).val()}),$("body").on("change","#ddlDeploystatus",function(){filterDeployJqxGrid()}),$(".gridster").on("click","#btnDeployResetSearch",function(){$("#txtDeploySearch").val(""),filterDeployJqxGrid()})});var linkrenderer_deployempname=function(a,b,c){return linkrenderdeployempname("jqxDeployGrid",a,b,c)},linkrenderer_deploy=function(a,b,c){return linkrenderdeploy("jqxDeployGrid",a,b,c)},linkrenderer_deployStatus=function(a,b,c){return linkrenderdeploystatus("jqxDeployGrid",a,b,c)},linkrenderer_deployEnv=function(a,b,c){return linkrenderdeployEnv("jqxDeployGrid",a,b,c)},linkrenderer_deployStatus=function(a,b,c){return linkrenderdeploystatus("jqxDeployGrid",a,b,c)},linkrenderer_deployEnv=function(a,b,c){return linkrenderdeployEnv("jqxDeployGrid",a,b,c)},linkrenderer_deployCreatedOn=function(a,b,c){return linkrenderdeploycreatedon("jqxDeployGrid",a,b,c)},linkrenderdeploycreatedon=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c&&"undefined"!=typeof c.CreatedDate){var d=c.CreatedDate,e=d.split(" "),f=e[0].split("/"),g=f[1]+"/"+f[0]+"/"+f[2],h=g+" "+e[1];return"<div class='clscustcompanyvalues clsaddellipsis' title='"+h+"'> "+h+"</div>"}},_vrProjectIDedit="",_vrUpdateComment="",_EmpId="",_UserRoleId="",_vrTaskPriorityId="",_vrTaskStatusId="",_vrUpdatedStatus="",_vrTaskStatus="",_vrEditTaskDetails="",_vrInformTo="",_vrInformToText="",_ArrModule,_vrAssignedTo="",_vrBeyondScope="",_vrAssignedTo="",_vrDueDate="",_vrMyScore=0,_vrTaskHistoryID="",_vrUpdatedInformToText="",_vrTaskModule="",_vrEditTaskOwnerName="",_vrFlag="1",_BaseUrl="",_TskStatus,_TaskId,_tskSt,_TskSubject,_BillableHours,_BugId="",_BugProjectId="",_Brpointstype="",_BrPositive="",_BrNegative="",_vrProjVersionNum="",_Score,_HighestScore=0,sourceGrid,_intDataFlag=0,_ArrStatus=["In Progress","Planned","Bugs"],_arrStatusCount=[0,0,0],_vrTaskStatus="",_vrEditSprintID="",_vrEditAssignedTo="",_vrEditModuleName="",_vrEditInformTo="",_vrEditCustomerID="",_vrTaskOwnerID="",tskdetaileidting="",_vrEditTaskStatusID="",_vrEditProjManager="",taskDate="";$(document).ready(function(){$("#txtSearchBug").keypress(function(a){return a.keyCode>=48&&a.keyCode<=57?!0:!1}),$("#btnUpdateTask").on("click",function(){var a=$("#flNewTskAttachFile").val();0!=a.length?($("#ddlNewTskInformTo").val(""),_BaseUrl=_vrLocationOrigin+"/Task/ToFilesUpload?strPicFileName="+_DefaultAttachedFileName+"&strTokenID="+_vrUserTokenId,uploadFile(_BaseUrl,updateTask,"flNewTskAttachFile")):($("#ddlNewTskInformTo").val(""),updateTask())}),$(".gridster").on("click","#idSelectAllimg",function(){$("#ddlBugStatus").jqxDropDownList("checkAll"),$("#idSelectAllimg").css("display","none"),$("#idUnselectAllimg").css("display","inline")}),$(".gridster").on("click","#idUnselectAllimg",function(){$("#ddlBugStatus").jqxDropDownList("uncheckAll"),$("#idUnselectAllimg").css("display","none"),$("#idSelectAllimg").css("display","inline")}),$("#imgedittsk").on("click",function(){$("#txtTaskComments").val("");{var a=$("#imgedittsk").attr("value");a.split(",")}_vrTaskStatus="update",_vrEditTaskDialog=1,_vrEditTaskFlagSprint=1,createNewTask(_vrTaskStatus),_vrUpdatedStatus=1}),$(".gridster").on("click","#btnRefreshBugTrailGrid",function(){_BTIndexNO=-1,$("#idBugTrailLoading").css("display","block"),$("#ddlBugTrTaskName").empty(),$("#ddlBugTrTaskName").append("<option value='0'>Select task</option>"),$("#chkHoldBugs").prop("checked",!1),setDefaultValuesBugTrail(),bindDataToBugDropDownDyn(),BindValuesToBugFields(),FilterBugTrail(),bindBugStatus(),$("#idBugTrailLoading").css("visibility","none")}),$("#divBugAttachedFiles").on("click",".clsupdatedfileremove",function(){$(this).closest(".clshrefupdatedbug").find("a").prop("title");$(this).closest(".clshrefupdatedbug").addClass("clsremovefileonupdate"),$(this).css("display","none"),$(this).closest(".clshrefupdatedbug").find(".clsfileremovecancel").css("display","inline")}),$("#divBugAttachedFiles").on("click",".clsfileremovecancel",function(){$(this).closest(".clshrefupdatedbug").find("a").prop("title");$(this).closest(".clshrefupdatedbug").removeClass("clsremovefileonupdate"),$(this).css("display","none"),$(this).closest(".clshrefupdatedbug").find(".clsupdatedfileremove").css("display","inline")}),$("#txtBugSearch").keypress(function(a){return 8!=a.which&&0!=a.which&&(a.which<48||a.which>57)?!1:void 0})});var linkrenderer_task=function(a,b,c){return linkrendertask("jqxTasksgrid",a,b,c)},linkrenderer_taskname=function(a,b,c){return linkrendertaskname("jqxTasksgrid",a,b,c)},linkrenderer_timeformat=function(a,b,c){var d="undefined"==typeof c||0==$.trim(c).length?_vrDefaultFmt:c.toString(),e=displayFormat(d);return"<div class='clsformatfields' title='"+e+"'>"+e+"</div>"},linkrenderer_Bug=function(a,b,c){return 0==_vrTskOpenBugDialog?linkrenderbug("jqxBugTrial",a,b,c):linkrenderbug("jqxTskBugTrial",a,b,c)},linkrenderer_BugDesc=function(a,b,c){var d=c.replace(/\</g,"<span><</span>");return"<div class='clsbugdscrpalign'>"+d+"</div>"},checkindexbugtrail=0,sortingcolumns=function(a){var b="",c="",d=JSON.parse(localStorage.getItem("jqxGrid"+a));return null!=d&&null!=d.sortcolumn&&(b=d.sortcolumn,c=d.sortdirection.ascending),{vrSortColumnName:b,vrSortOrder:c}},_vrLocationOrigin="http://10.0.0.19:8087/webapi",_vrLocalUrl="http://10.0.0.19:8087/webapi",_vrMainWebstationPath="http://testbetawebstation.osmosystems.com/EmpPics/",_vrAttachedFilesPath="http://testbetawebstation.osmosystems.com/AttachedFiles/",_vrDialogBoxProjBillSummary="Project billing summary report",_vrDragDropBillRprt="",_vrLoggedCheckDefault="1",_vrLoggedCheckHome="",_vrGetInfrmUpdCount="",_vrHostAddressDefault="http://",_vrUserTokenId="",_vrBtnWidgetResize=0,_vrBtnBugTrailResize=0,_vrBtnDeployResize=0,_vrBtnTaskWidgetResize="btnResizeTasksWidget",_vrBtnBugTrailWidgetResize="btnResizeBugTrailWidget",_vrBtnDeployWidgetResize="btnResizeDeployWidget",_vrUserPrefWidgetWidth=1,_vrUserAlternateEmailTxtBoxName="txtNewUserAltEmail",_vrUserPreferredWidgets="",_vrObjJqxGrids={jqxGridjqxBillingReport:"",jqxGridjqxBugTrial:"",jqxGridjqxCustomerTrial:"",jqxGridjqxProjectsGrid:"",jqxGridjqxTasksgrid:"",jqxGridjqxUserTrial:"",gridsterWidgets:""},_vrMonthShortHand=["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sep","Oct","Nov","Dec"],_vrUserIsProjManager="",_vrNonBillDiv="<div class='commntsnonbill'>*Comments for Non-billable hours*</div>",_vrNonBillTextDiv="*Comments for Non-billable hours*",_vrNonBillReplace="&^%&*",_vrNonBillSepText="\r\n*Comments for Non-billable hours*\r\n",_vrNonBillMailComments="\r\nComments for Non-billable hours:\r\n",_vrNonBillableTask="",_vrTskProjBudgetPlannedId="txtNewProjBudgetEfforts",_vrMaxLengthProjBudget=7,_vrMaxEffLength=5,_vrMaxLengthTxt=5,_vrMinYear=1960,_vrErrResponseId="-1",_vrInProgId="2",_vrErrorMsg="Unable to process request. Please try again.",_vrPicExt=".jpg",_EmpDefaultPic="default_profile.jpg",_vrUploadEmpPicdefault="img/userProfilePic.jpg",_DefaultAttachedFileName="",_SemiUploadedPath="/UploadedFiles/",_vrFileSize=368e4,_vrMaxFileSize=3.5,_vrLimitFileName=40,_vrLimitBugFileName=25,_vrUpdateLimitFileName=25,_vrChkEmpLength=15,_vrAssignedByName=20,_vrTaskSubLen=14,_vrMonthHrs=3,_vrWeekHrs=2,_vrHrsLengthDefault=5,_vrPlannedId="1",_vrResponseId="1",_vrResponseFailureId="0",_vrCloseDialog="",_vrDefaultTskCatogery=1,_VrGridID="",_VrDefaultFileSize=0,_vrBlnExcludeDefault=!0,_vrAttachedFileMessage="Attached file size should be less than or equal to 3.5MB.",_vrFilesCount="Group of file names length should be less than 200.",_vrFileSizeMsg="Attached file doesn't contains any data.",_vrFileNameMsg="This file has already been selected",_vrValidateEmail="Email is required.",_vrValidatePsw="Password is required.",_vrValidateBoth="Email and Password are required.",_vrValidateCred="Invalid Credentials.",_vrblnProjId=!1,_vrblnTaskId=!1,_vrblnStatus=!1,_vrFilterDates=!0,_vrblnEmpName=!1,_vrddlProjId="0",_vrddlTaskId="0",_vrddlStatus="0",_vrddlEmpName="0",_vrBugTrFromDate="",_vrBugTrToDate="",_vrFlagPriority="1",_vrFlagTaskCategory="2",_vrFlagNewBugTrTask="3",_vrFlagTskCustomer="4",_vrFlagTskProject="5",_vrFlagTskModules="6",_vrFlagLoadBugTrEmp="7",_vrFlagBugStatus="8",_vrFlagBugTrTask="9",_vrFlagBugTrProject="10",_vrFlagNewBugFields="11",_vrFlagUpdateBugFields="12",_vrFlagBugProj="13",_vrFlagBugEmp="14",_vrFlagTaskProj="15",_vrFlagTaskEmp="16",_vrFlagBindStatusRole="17",_vrFlagBindStatusRoleUser="18",_vrFlagBindCountrys="19",_vrFlagBindUpdatedCountrys="20",_vrFlagNewUserRole="21",_vrFlagBindUpdatedCountrys="22",_vrFlagBIllingReportBindProjects="23",_vrFlagBIllingReportBindEmployees="24",_vrFlagTaskNewTaskSprintName="25",_vrFlagTaskWidgetSprintName="26",_vrTskOpenBugsTsk="27",_vrTskOpenBugsTaskStatus="28",_vrFlagDeployProject="29",_vrFlagDeployTask="30",_vrFlagDeployApplication="31",_vrFlagActiveEmployees="32",_vrFlagCategory="33",_vrFlagSubCategory="34",_vrFlagBrActiveEmployees="35",_vrFlagBrClick="1",_vrFlagBrDates="0",_vrFlagTaskAssociate="40",_vrFlagTaskListAssociate="41",_vrTskOpenBugsEmp="39",_vrReportEmp="36",_vrUserReports="37",_vrReportProjects="38",_vrDataStatus="Task created successfully.",_vrAdminRoleId="1",_vrUserRoleId="2",_vrClientRoleId="3",_vrDdlDefault="0",_vrDefaultBugStatus="1",_vrBugSaveStatus="Save",_vrBugUpdateStatus="Update",_vrFunctionalityStatus="",_vrBugStatus="",_vrDialogBoxNewTask="New task",_vrDialogBoxBugTrail="Bug trail",_vrDialogBoxTaskTrail="Task details",_vrTaskTrailTitle="Task trail",_vrDialogBoxCustomerTrail="Customer details",_vrProjectsTitle="Projects",_vrDialogBoxUser="User details",_vrUserTitle="Users",_vrDialogBoxCustomerUpdateTrail="Edit customer details",_vrDialogBoxCustomerAddingTrail="Add customer",_vrBillingReportTitle="Billing report details",_vrDialogBoxNewBug="New bug",_vrDialogBoxBugDetails="Bug details",_vrDialogBoosterAdd="Boost a rooster",_vrDialogBoxTitle="",_vrNewBugAttachedFiles="",_vrExistingBugTaskId="",_vrExistingBugProjId="",_vrExistingBugTaskSubject="",_vrTodayDate="",_vrCommentCreatedFlag="",_vrTaskCreation="",_vrCustomerCreation="",_vrTskCreatedStatus="Task created successfully",_vrBugCreatedStatus="Bug created successfully",_vrBugUpdatedStatus="Bug updated successfully",_vrCommentInsertStatus="Comments added successfully",_widgetBugHeader='<div class="widget clshomepage clsbugtrail" id="divWidgetBugsSlide">',_widgetCustomerHeader='<div class="widget clshomepage clscustomertrail" id="divWidgetCustomerSlide">',_widgetEnd="</div>",_widgetBillingReportHeader='<div class="widget clshomepage clsBillingReport" id="divWidgetBillingReportSlide">',_widgetTasksHeader='<div class="widget clsusertasks" id="divWidgetTasksSlide">',_widgetProjectHeader='<div class="widget clsprojwidget " id="divWidgetProjectsSlide" >',_widgetUserHeader='<div class="widget clshomepage clsuser" id="divWidgetUserSlide">',_widgetProcsHeader='<div class="widget clshomepage clsprocs clsprocstrail" id="divWidgetProcSlide">',_widgetDeploymentHeader='<div class="widget clshomepage clsdeploy clsdeploytrail" id="divWidgetDeploymentSlide">',_DefaultWidget='<div class="widget"><button class="resize_widget"><img src="img/resize.png" alt="Resize grid" title="Resize grid"></button><button class="magnify_widget"><img src="img/magnifier.png" alt="Magnify grid" title="Magnify grid"></button><button class="close_widget"><img src="img/close.png" alt="Close grid" title="Close grid"></button><div class="clsunderDevelopmentWidget">Under Development</div></div>',_widgetProjTasksCount="<div class='widget clsclientroletskdetcharts' id='divWidgetDashboardslide'>",_widgetQuoteHeader="<div class='widget clsquotation' id='divWidgetQuotationSlide'>",_widgetBAR="<div class='widget clshomepage clsbrPoints' id='divWidgetBARSlide'>",_vrCheckMailInfo="Please check your email for Reset Password",_vrMailidMessage="Please provide valid Email.",_vrSetTime="2000",_vrDdlProject="",_vrDdlEmployee="",_vrFileNameLength="170",_vrSomeThingError="Unable to add comment. Please try again.",_VrFrgtPswrd="",_VrReloadEmpHours="",_vrBugIdDiv="",_vrBugRecorded="Bug Recorded",_vrAlert="Alert",_vrUnderDevelop="Under Development",_vrFileNameVeirfy="Invalid file name. It can contain only _@()- and alphanumeric characters.",_vrDefaultHours="00",_vrDefaultFmt="00:00",_vrTasksData="",_vrBugsData="",_vrProjectsData="",_vrUsersData="",_vrProjectsGridWidth=838,_vrCustomersGridWidth=838,_vrBillingReportGridWidth=840,_vrBrPointsData="",_vrQuoteData="",_vrUsersGridWidth=838,_vrQuoteGridWidth=838,_vrDefaultTaskSizer=9,_vrMagnifierTaskSizer=14,_vrDefaultBugSizer=8,_vrMagnifierBugSizer=14,_vrMagnifierCustomerSizer=14,_vrDefaultCustomerSizer=11,_vrDefaultUserSizer=11,_vrMagnifierUserSizer=14,_vrDefaultBillingReportSizer=14,_vrBillingGridPagerSize=9,_vrDefaultProjSizer=11,_vrMagnifierProjSizer=14,_vrDefaulUserSizer=11,_vrDefaultBARSizer=12,_vrDefaultDeploySizer=9,_vrArrPlanned="",_vrArrInProgress="",_vrPlannedVal="Planned",_vrInProgVal="In Progress",_vrFlagData="1",_vrEventVal="",_vrFlagBindDataToDdl="",_vrSameFileName="",_vrSaveNewBug="",_vrArrFileNames=[],_vrFileUploading="",_vrFileUploadDefault="1",_vrFileUploadCanceled="2",_vrUploadedCancFile="",_vrFileUploadComplete="",_vrBugStatus="",_vrTaskProjId="0",_vrBugProjFields="",_vrBugTaskField="",_Columns="",_DataFields="",_vrCustomerCreatedStatus="Customer Created Successfully",_vrDialogBoxNewProj="New project",_vrGetProjFields="20",_vrProjCreationStatus="",_vrProjInsertionStatus="1",_vrProjCrtStatus="Project created successfully",_vrProjUpdatedStatus="Project updated successfully",_vrProjDataStatus="",_vrBugsFileUpload="1",_vrNewProjFileUpload="2",_vrMagnifyCloneTitle="",_vrDefaultProjId=0,_vrDefaultTskTrEmp="0",_vrProjDetDialogHdr="Project details",_vrCustomerDialogHdr="Customers",_vrCustomerDetDialogHdr="Customer details",_vrUserDetDialogHdr="User details",_vrAddUserHdrDetails="Add user",_vrAddProcHdr="Add new policy",_vrTaskTrEmp="",_vrTskTrProj="",_vrSelectedProjectProjId=0,_vrGetProjDataById="1",_vrSetProjUpdateFlag="",_vrClearProjUpdateFlag="",_VrProjFileUploading="",_VrProjFileUploaded="1",_vrMagnifyCustId="",_vrMagnifyUserId="",_vrUserFirstName="",_vrUserLastName="",_vrCustContName="",_vrCustEmailId="",_vrCustWebsiteName="",_vrCustname="",_vrCustSourceData,_vrUserSourceData,_vrCustDetCnt="0",_vrCustDetails="0",_vrUsrDeCnt="0",_vrCustomerUpdatedStatus="Customer updated successfully",_vrUserCreatedStatus="User created successfully",_vrUserUpdatedStatus="User updated successfully",_vrProjectNameLbl="Project name",_vrProjectEditLbl="Edit project details",_vrProjectManagerLbl="Project manager",_vrVersionNumberLbl="Version number",_vrCustNameLbl="Contact name",_vrCustEmailIdLbl="Email ID",_vrCustWebsite="Website",_vrUserNameLbl="Username",_vrUserMobileLbl="Mobile",_vrUserAddressLbl="Address",_vrIndiaStandardTime="India Standard Time",_vrSaveExitClick="",_vrSaveExitFlag="1",_vrTasksMagnifyLoaded="1",_vrProjectsMagnifyLoaded="2",_vrJqxMagnifyLoadedFlag="";_VrDefaultUserRole="2";var _vrCheckUserUpdate="0",_vrCheckUserSave="1",_vrCheckDefaultUpdate="",_vrCheckUserResponseID="0",_vrEditUserProfile="",_vrUserEditProfileDefault="1",_vrUpdateDialogBoxUser="Edit user details",_vrSelProjStatus="",_vrSelProjCustomer="",_vrSelCustomerStatus="",_vrSelCustomerUserStatusText="All",_vrDdlSelectCustUserAll="",_vrSelUserStatus="",_vrTextFieldUserManagerLen=110,_vrEmpProfilePicImage="",_vrNewProjectAttachedFiles="",_vrFileExtension="Please select jpg format file.",_vrExpiredTokendIdResponse="9999",_vrUserSelEmpId="",_vrArrValidExtensions=["jpg","jpeg","bmp","gif","doc","xlsx","pdf","xls","txt","png"],_vrValidFileFormatExtMessage="Invalid file format.Allows file formats like jpg, jpeg, bmp, gif, png, doc, xlsx, pdf, xls, txt.",_vrBillingLoadingFlag="",_vrBillingGridInit="1",_vrCustMagLen=20,_vrCustLen=10,_vrCustDefLen=10,_vrProjMagLen=40,_vrProjLen=23,_vrProjDefLen=23,_vrMinTextLength=3,_vrUsersSliderTextLength=2,_vrDshProjLen=13,_vrOpenBugs=0,_vrSaveReset="",_vrArrTaskTrDetails=[],objArrJqxColumns={};objArrJqxColumns.jqxTasksgrid=[];var _vrUserMagnifyDialog=0,_vrUserDialogOpen=0,_vrProjMagnifyDialog=0,_vrProjDialogOpen=0,_vrCustDialogOpen=0,_vrCustMagnifyDialog=0,_vrDayHrs=24,_varcheckDragDrop=0,_varMaxTimecharlen=5,htmlTags=["<script>","<a>","marquee>"],_vrCheckNewTaskSprintDropDown=0;_vrCheckWidgetSprintDropDown=1,_varMaxTimecharlen=7,_vrMaxTimecharlenTotal=10;var _vrDdlStatusChange="1",_vrCheckDdlChange="0",_vrDdlStatusChange="1",_vrCheckDdlChange="0",_vrStoppedStatus=9,_vrDeliveredStatus=8,_vrDoneStatus=6,vrPrefDynSelectall="chkdynselectall",_vrDisplayBugErrorMsg="There is no data to display for this bug id.",_vrJqxBRGrid="jqxTasksgrid",arrData=new Array,_vrJqxTasksGrid="jqxTasksgrid",_vrJqxBugTrailGrid="jqxBugTrial",_vrDialogBoxNewDeployment="New deployment",_vrEditDeploy="Edit deployment",_vrStoppedStatus=9,_vrDeliveredStatus=8,_vrDoneStatus=6,_vrBtnWidgetResize=0,_vrBtnBugTrailResize=0,_vrBtnTaskWidgetResize="btnResizeTasksWidget",_vrBtnBugTrailWidgetResize="btnResizeBugTrailWidget",_vrPageNumForTaskWidget=0,_vrPageNumForBugTrailWidget=0,_vrPageNumForBRWidget=0,_vrPageNumForProjectsWidget=0,_vrPageNumForUserWidget=0,_vrPageNumForCustWidget=0,_vrLocalTaskDataOnTaskClick=null,_vrLocalBTDataOnBugClick=null;
_vrLocalCustDataOnCustClick=null,_vrLocalUserDataOnUserClick=null,_vrLocalBRDataOnTaskClick=null,_vrLocalTaskDataOnProjClick=null,_vrLocalDeployData=null;var _vrUserEmailTxtBoxName="txtNewUserEmail",_vrUserAlternateEmailTxtBoxName="txtNewUserAltEmail",_vrBtnTaskResize=0,_vrTaskDataOnCPUOnTaskClick=null,_vrBugSaveNNewClick=0,_vrJqxTasksGrid="jqxTasksgrid",_vrJqxBugsGrid="jqxBugTrial",_vrBillingRprtGrid="jqxBillingReport",_vrCheckUserPref=1,_vrCheckDefaultIndex=1,_vrCheckSelectBill=2,_vrCheckIdSlider="",_vrTxtTskProjName="",_vrTxtTskId="",_vrTskSubject="",_vrTskOpenBugDialog=0,_vrTxtTskProjId=0,_vrTskblnProjId=!1,_vrTskblnTaskId=!1,_vrTskblnStatus=!1,_vrTskFilterDates=!0,_vrTskblnEmpName=!1,_vrTskddlProjId="0",_vrTskddlTaskId="0",_vrTskddlStatus="0",_vrTskddlEmpName="0",_vrTskBugTrFromDate="",_vrTskBugTrToDate="",_vrTskCreatOn="",_vrObjExportData={jqxSource:"",jqxColumns:""},_vrDialogBoxNewQuote="Create quote",_vrObjExportData={jqxSource:"",jqxColumns:""},_ddlTaskTrailProject="",_ddlTaskTrailSprint="",_vrGetBacklogID="",_ProcAndTemplate="",_vrbacklog="backlog",_vrUserPrefBtnClick="",_ProcAndTemplate="",_vrQuoteCellValue="Development",_vrTestingQuote="60",_vrSupQuote="8",_vrDepQuote="8",_vrDocumentationQuote="8",_vrTotalPercent=100;_vrCalType="%";var _vrDepInsertStatus="succ",_vrDepUpdateStatus="updatesucc",_vrDeployStatusId="",_vrDeployInsertSucess="Deployment inserted successfully",_vrDeployUpdateSucess="Deployment updated successfully",_vrChecklistID=0,_vrDeployFilesData="",_vrDialogDeployment="Deployment details",_vrMagnifierDeploySizer=14,_vrDeployData="",_vrMagnifyDeployGridWidth=1035,_vrDeployGridPagerSize=9,_vrQuoteGridPagerSize=10,_vrDeploymentData="",_vrDefaultQuoteId=0,_vrQuoteProjId=0,_vrQuoteCustId=0,_vrQuoteEffEst=0,_vrQuoteRevBy=0,_vrQuoteStatus=0,_vrQuoteUpdateId=0,_vrLoadQuoteDetGrid=0,_vrGridQuoteDetailsLoaded=1,_selYearInBAR="",_selMonthInBAR="",_varcheckDragDropBAR=0,_BARTitle="Boost a rooster points",_vrSetWidthOfGraph="",_vrSetHeightOfGraph="",_vrBARInsertSucess="Points added successfully",_vrHTMLBRWidget="",_vrQuotation="Quotation",_vrEditTaskDialog="",_vrChecklistAppID=0,_vrCheklistProjectId=0,_vrChecklistTaskId=[],_vrsliderDates=0,_vrGridDeployMagnify=0,_vrDeployGrid="jqxDeployGrid",_vrPointsAllot="Points allotted successfully",_vrMailTskPrjName="",_vrMailTskOwnerName="",_vrMailTaskName="",_vrMailTskOwnerID=0,_vrSelTaskNames=[],_vrTxtOpenBugTaskId=0,_vrTskBugOpend=0,_vrQuoteCustomerInterval=1e3,_vrFromDate="",vrToDate="",_vrQuotation="Quotation",_vrEditTaskDialog="",_vrChecklistAppID=0,_vrCheklistProjectId=0,_vrChecklistTaskId=[],_vrsliderDates=0,_vrGridDeployMagnify=0,_vrDeployGrid="jqxDeployGrid",_vrPointsAllot="Points allotted successfully",_vrMailTskPrjName="",_vrMailTskOwnerName="",_vrMailTaskName="",_vrMailTskOwnerID=0,_vrSelTaskNames=[],_vrTxtOpenBugTaskId=0,_vrQuoteCustomerInterval=1e3,_vrQuoteClienbtApprove=1,_vrDashBoardTitle="Dashboard",_vrUpdatedStatus="",_vrUserPrefGet=0,_vrFromdate="",_vrToDate="",_vrDeleteBRRecId=0,_vrDeleteRowIndex=0,_vrBRDeleteStatus="Points deleted successfully.",_vrFreezeSprintStatus="You can't add new tasks under this sprint as this sprint is freezed.",_vrQuoteSucc="Quotation created successfully",_vrQuoteUpd="Quotation updated successfully ",_vrQuoteTaskStatus="Tasks created successfully",_vrQuoteRecStatus="Quotation created successfully",_vrQuoteCategory="",_vrDeleteMsg="Are you sure you want to delete the selected employee's points?",_VrSummRprtPager=14,_vrProjBillRprtPgr=13,_vrSummRprtHdr="Summary report",_vrTaskChosenTaskName=[],_vrTaskCreatedDate="",_vrDialogBoxBillSummary="Billing report",_vrWidgetCOntrolData=[],_vrBugWidgetCOntrolData="",_vrCheckCallFromLogin="",_vrCustCheckCallFromLogin="",_vrBRCheckCallFromLogin="",_vrWidgetIDProperty="vrWidgetId",_taskIndexNO=-1,_BTIndexNO=-1,_custIndexNO=-1,_userIndexNO=-1,_BRIndexNO=-1,_projIndexNO=-1,_deployIndexNO=-1,_DashboardIndexNo=-1,_QuoteIndexNO=-1,_vrCheckDragNDrop="",_vrFlagReloadGraph="0",_vrQuoteTaskCreateStatus=0,_vrTaskProjIdSprint=0,_vrTskSprintSelectval=0,_vrTskMoveSprintID=0,_vrEditTaskFlagSprint=0,vrstatus="",_vrattachedStatus="",_vrEditStatusReport="",_vrattachedTask="",_vrAttachedEmpID="",_vrReportProjVal="",_vrReportMagnifyStatus="",_vrSummaryReportDialog="",_vrReportCount="",_vrattachedFiles="",_vrSummaryBillingFlag="",_vrSuccessSource="",_vrNonSuccessSource="",_vrBillReportFlag="";$(document).ready(function(){function a(a){var b=$("#txtCommdate").val(),c="00:00:00",e="",f="";if(""!=b){var g=b.split("/"),h=g[2]+"-"+g[1]+"-"+g[0]+" "+c;e=h;var i=g[1]+"/"+g[0]+"/"+g[2]+" "+c;f=i}else e="",f="";var j=0==$("#txtCommNonBillableHours").val().length?0:$("#txtCommNonBillableHours").val(),k=$("#txtTaskComments").val(),l=$("#txtNonBillableComm").val();("0"!=$.trim(j)||1==_vrNonBillableTask)&&0!=$.trim(l).length&&(k=k+_vrNonBillDiv+l),_vrUpdatedInformToText=GetInformToIds("ddlCommInformTo","txtCommInformTo");var m="undefined"==typeof a.Value?"":a.Value,n=$("#ddlAssignTo").val();n=null==n?_EmpId:n;var o=$("#lblTaskId").text(),p=$("#chkBeyondScope").prop("checked");_vrBeyondScope=p;var q=$("#ddlStatus").val(),r=$("#txtDueDate").val(),s=$("#ddlSelectModule").val(),j=0==$("#txtCommNonBillableHours").val().length?0:replaceColon($("#txtCommNonBillableHours").val()),t=0==$("#txtCommBillHours").val().length?0:replaceColon($("#txtCommBillHours").val()),u=0==$("#txtCommMoreHours").val().length?0:replaceColon($("#txtCommMoreHours").val()),v=$("#lblLogin").text(),w=($("#lblTskSubject").text(),$("#txtTskProjId").text(),{TaskID:o,AssignedTo:n,PriorityID:_vrTaskPriorityId,CreatedOn:e,Comments:k,AttachedFiles:m,AssignedBy:v,TaskHstryStatusID:q,TaskDueDate:r,BeyondScope:p,TaskModulename:s,BillableHours:t,NonBillableHours:j,MoreHours:u,PresentEmpID:_EmpId,EmployeeID:_EmpId,CreatedDate:e,CommentedOn:f,Path:d,TokenID:_vrUserTokenId});_BaseUrl=_vrLocationOrigin+"/Task/InsertTaskHistory/",ajaxCallWithObject(_BaseUrl,w,updateTaskStatus)}function b(a){var b=$("#ddlStatus").val();1==$("#ddlStatus").val()||1==_vrNonBillableTask?($("#txtCommBillHours").prop("disabled",!0),$("#txtCommBillHours").val(""),$("#txtCommBillHours").css("background-color","rgb(131, 131, 131)")):($("#txtCommBillHours").prop("disabled",!1),$("#txtCommBillHours").css("background-color","transparent")),0==_vrOpenBugs||"4"!=b&&"6"!=b&&"8"!=b||"1"!=a||($("#ddlStatus").val(_vrPlannedId),displayMessage(_vrAlert,"Please fix the Open Bugs under this task."),$("#txtCommBillHours").prop("disabled",!0),$("#txtCommBillHours").val(""),$("#txtCommBillHours").css("background-color","rgb(131, 131, 131)")),_vrSaveCommentClick="",_vrPrevDdlSelStatus=$("#ddlStatus").val()}function c(){$("#BtnAllotPoints").hide(),$("#divBARInnerFieldsDeatils").show(),addBoosterARooster("1")}$("#ddlAssTask").on("change",function(){var a=$("#ddlAssTask").val(),b="",c=0;b=$("#ddlAssTask option:selected").text(),c=$("#ddlAssTask option:selected").data("taskprojectid"),a>0&&taskLink(a,c,b)}),$(".clshidetemporarily").remove();var d="",e="",f="",g="",h="",i="",j="";if(_vrFlagBindDataToDdl=_vrResponseId,$(".slide").draggable({containment:".gridster"}),j=$.cookie("LoggedNow"),j!=_vrLoggedCheckDefault&&logOutUser(),e=localStorage.getItem("LoggedEmpId"),f=localStorage.getItem("LoggedEmpName"),vrLoginRoleId=localStorage.getItem("LoggedUserRole"),h=localStorage.getItem("LoggedUserTokenId"),i=localStorage.getItem("LoggedIsProjManager"),i="false"==i&&""!=i?!1:!0,0==$.trim(e).length||0==$.trim(f).length||0==$.trim(h).length)return window.location.href="default.htm",!1;$("#btnFilter").on("click",function(){""!=_vrSummaryBillingFlag?viewBillingSummaryReport():getReports()}),$("#templatedownloader").on("click",function(){window.open(_vrLocationOrigin+"/AttachedFiles/Template for task multiple creation.xls","_blank")}),$("#txtFromDate").attr("title","From date"),$("#txtToDate").attr("title","To date"),$("#ddlReportPoj").on("change",function(){_vrReportProjVal=$("#ddlReportPoj").val()}),$("#ddlReports").on("change",function(){$("#ddlReportPoj").css("display","none"),_vrattachedStatus="",$("#lblReportProj").css("display","none");var a=$("#ddlReports").val();4==a?(_vrSummaryBillingFlag=1,$("#idEffortsInfo").css("display","block"),viewBillingSummaryReport(),$("#dailog").dialog("option","title",_vrDialogBoxProjBillSummary),$("#idEmpReport").css("display","none"),$("#idProjBillReport").css("display","inline"),$("#idAttachedFilesLink").css("display","none")):(6==a?($("#idProjBillReport").css("display","none"),$("#idEmpBillReport").css("display","none"),$("#idAttachedFilesLink").css("display","inline"),_vrSummaryBillingFlag="",$("#idEffortsInfo").css("display","none"),$("#dailog").dialog("option","title",_vrSummRprtHdr),getReports()):0==a&&($("#idEffortsInfo").css("display","block"),viewBillingReport(),$("#dailog").dialog("option","title",_vrDialogBoxBillSummary),$("#idEmpReport").css("display","none"),$("#idProjBillReport").css("display","inline"),$("#idAttachedFilesLink").css("display","none")),$("#idEffortsInfo").css("display","none"))}),$("body").on("click","#imgCloseIcon",function(){$("#divSuccesTaskCreationDiv").empty(),$("#divSuccesTaskCreationDiv").css("display","none")}),$("body").on("click","#imgCloseFailIcon",function(){$("#divNonSuccesTaskCreationDiv").empty(),$("#divNonSuccesTaskCreationDiv").css("display","none")}),$("#idEmpBillReport").on("click",function(){var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];_vrattachedStatus="",$("#ddlReportPoj").css("display","none"),$("#idEmpBillReport").css("display","none"),$("#lblReportProj").css("display","none"),$("#idEmpReport").css("display","none"),$("#idProjBillReport").css("display","inline"),viewBillingSummaryReport(c,d)}),$("#idCreateEcelTask").on("click",function(){createProjectwithExcel()}),$("#txtNewTskDueDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",minDate:0,showButtonPanel:!0,changeMonth:!0,changeYear:!0,beforeShow:function(a,b){b.dpDiv.css({marginTop:"0px",marginLeft:a.offsetWidth-$(".ui-datepicker").width()+"px"})},onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},beforeShow:function(a,b){b.dpDiv.css({marginTop:"0px",marginLeft:a.offsetWidth-$(".ui-datepicker").width()+"px"})},closeText:"Clear",buttonText:""}),$("#txtDueDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",minDate:0,showButtonPanel:!0,changeMonth:!0,changeYear:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:""}),$("#idDisplayCreatedTasks").on("click",function(){$("#divNonSuccesTaskCreationDiv").css("display","none"),$("#divSuccesTaskCreationDiv").css("display","inline"),$("#divSuccesTaskCreationDiv").empty();var a=_vrSuccessSource.split(";");$("#divSuccesTaskCreationDiv").append("<div id='divcloseIcon'><img src='img/close.png' title='close' id='imgCloseIcon'/></div>");for(var b=0;b<a.length;b++)$("#divSuccesTaskCreationDiv").append("<div id='divTskCreatedlbl'><label class='clsInnerExcelMsg' title='"+a[b]+"'>"+a[b]+"</label></div>")}),$("#idDisplayNonCreatedTasks").on("click",function(){$("#divSuccesTaskCreationDiv").css("display","none"),$("#divNonSuccesTaskCreationDiv").css("display","inline"),$("#divNonSuccesTaskCreationDiv").empty();var a=_vrNonSuccessSource.split(";");$("#divNonSuccesTaskCreationDiv").append("<div id='divcloseIcon'><img src='img/close.png' title='close' id='imgCloseFailIcon'/></div>");for(var b=0;b<a.length;b++)$("#divNonSuccesTaskCreationDiv").append("<div id='divTskCreatedlbl'><label class='clsNonCreatedTsk' title='"+a[b]+"'>"+a[b]+"</label></div>")});var k=$("#txtFromDate,#txtToDate").datepicker({showOn:"button",buttonImage:"img/calendar.gif",buttonImageOnly:!0,buttonText:"Select date",dateFormat:"dd/mm/yy",maxDate:new Date,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){var a=window.event;"Clear"==a.srcElement.innerHTML&&(this.value="")},closeText:"Clear",buttonText:"",onSelect:function(a){if($.trim($("#txtFromDate").val()).length>0)for(var b=0;b<k.length;++b)k[b].id>this.id&&$(k[b]).datepicker("option","minDate",a)}});$("#idEmpReport").on("click",function(){var a=$("#txtFromDate").val().split("/"),b=$("#txtToDate").val().split("/"),c=a[2]+"-"+a[1]+"-"+a[0],d=b[2]+"-"+b[1]+"-"+b[0];_vrattachedStatus="",$("#ddlReportPoj").css("display","none"),$("#lblReportProj").css("display","none"),$("#idEmpReport").css("display","none"),$("#idAttachedFilesLink").css("display","inline"),ViewReport(),getReports(c,d)}),$("#idProjBillReport").on("click",function(){$("#idAttachedFilesLink").click()}),$("#idAttachedFilesLink").on("click",function(){var a=$("#dailog").dialog("option","title");if(a==_vrDialogBoxProjBillSummary){$("#idEmpReport").css("display","none"),$("#idAttachedFilesLink").css("display","none"),$("#idEmpBillReport").css("display","inline"),$("#idProjBillReport").css("display","none"),$("#lblReportProj").css("display","inline"),$("#ddlReportPoj").css("display","inline");var b=!0}else{$("#idEmpReport").css("display","inline"),$("#idAttachedFilesLink").css("display","none"),$("#lblReportProj").css("display","inline"),$("#ddlReportPoj").css("display","inline");var b=!1}_vrattachedTask=1,_vrattachedStatus=1,_vrattachedFiles=1,$("#divMainLoader").css("display","inline"),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrReportProjects);var c=$("#ddlReportPoj").val();null==c&&($("#ddlReportPoj").append("<option value='0'>Select project</option>"),$("#ddlReportPoj").attr("title","Select project"));var d=$("#txtFromDate").val().split("/"),e=$("#txtToDate").val().split("/"),f=d[2]+"-"+d[1]+"-"+d[0],g=e[2]+"-"+e[1]+"-"+e[0];_BaseUrl=_vrLocationOrigin+"/user/FilterTaskDetailsWithAttachFiles?strTokenID="+_vrUserTokenId;var h="",i="",j=$("#ddlEmployee").val();"0"!=j?(h=!0,i=$("#ddlEmployee").val()):(h=!1,i=j),objSummaryReport={BlnFromDate:!0,BlnToDate:!0,BlnEmpID:h,BlnProjectID:!1,EmpID:i,FromDate:f,ToDate:g,ProjectID:0,TokenID:_vrUserTokenId,IsSummaryReport:b},ajaxCallWithObject(_BaseUrl,objSummaryReport,loadReportAttachedGrid)});new Date;initializeCommDialog("divUnderDevelopment","450","270"),initializeCommDialog("divBugRecorddetails","1100","552"),initializeCommDialog("divDeployFilesDailog","450","270"),initializeCommDialog("divSprintStatusalert","450","270"),initializeCommDialog("MagnifierDialog","1100","552"),initializeCommentdDialog(),$(".ui-datepicker-trigger").css("width","20px").css("margin-left","2px"),$("#lblLogin").text(f),_EmpId=e,_UserRoleId=vrLoginRoleId,_vrUserTokenId=h,GetUserPreferences(),_vrUserIsProjManager=i,_UserRoleId==_vrUserRoleId&&$(".clsshowforclient").remove(),_UserRoleId==_vrUserRoleId&&($(".clsshowforadmin").remove(),$("#lnkNewQuote").css("display","none")),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager?($("#lnkNewTask").css("color","#B3BFCB"),$("#txtCommMoreHours").attr("disabled",!0),$("#btnRefreshTasksGrid").css("margin-right","80px"),$("#btnExportTasks").css("margin-right","-22px"),$(".clsshowforadmin").remove()):_UserRoleId==_vrClientRoleId&&(0==_vrUserIsProjManager&&($("#txtCommMoreHours").attr("disabled",!0),$("#btnRefreshTasksGrid").css("margin-right","80px"),$("#btnExportTasks").css("margin-right","-22px")),$("#lnkRoleDashboard").css("display","none"),$(".clshideforclient").remove(),$(".clsdisableforclient").attr("disabled",!0),$(".clsdisableforclient").css("color","#B3BFCB"),$("#lnkDeployment").css("display","none"),$("#lnkBar").css("display","none"),$(".clslogin").css("width","392px"),loadDdlInTasksCount()),BindValuesToBugFields(),_BaseUrl=_vrLocationOrigin+"/Task/GetStatusDetails?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindStatus),_BaseUrl=_vrLocationOrigin+"/Project/FetchEmpInfrmUpdtsPrjcts?strEmpID="+_EmpId+"&strEmpUserRoleID="+_UserRoleId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBugTrProject),bindLoggedUserTaskCount();var l=new Date;$("#lblCopyRightYear").text(l.getFullYear());var m=l.getFullYear(),n=DoubleDigit(l.getMonth()+1);LoadDataToBARControls(),LoadBARDataToSlider();var o=m+"-"+n+"-01",p=m+"-"+n+"-"+DoubleDigit(l.getDate());_vrTodayDate=DoubleDigitNum(l.getDate())+"/"+DoubleDigitNum(n)+"/"+m,$("#txtBugCreatedDate").val(_vrTodayDate),o="2014-10-01",p="2014-10-30",_BaseUrl=_vrLocationOrigin+"/Task/GetBillingDetails?intEmpID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindBillingHours),_BaseUrl=_vrLocationOrigin+"/mobile/PrjctBugDetails?intEmployeeID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFixedBugsCount),LoadCountDataToCustUserProjSilde(),LoadDeploymentCountDetails(),LaodQuoteCategoryDetails(),CheckBrowserNAddCSS(),LoadBARDataToSlider(),$(".bx-viewport").css("background-color","transparent").css("border","none").css("margin-top","15px"),$(".bx-default-pager").css("margin-top","95px"),$(".clsnav").hover(function(){$(this).css("text-decoration","underline")}),$(".clsnav").mouseleave(function(){$(this).css("text-decoration","none")}),$("#lblLogin").hover(function(){$(this).css("text-decoration","underline")}),$("#lblLogin").mouseleave(function(){$(this).css("text-decoration","none")}),$(".slide").mousedown(function(){_idSlider=$(this).find(":button").attr("id"),$droppableEl=$(".gridster-container .gridster")}),$("body").on("change","#divTaskTrailSprint",function(){_taskIndexNO=-1,$("#idSpnLoading").css("display","block"),filterTaskTrailSprintDataJqxGrid();var a=$("#ddlTaskTrailSprint option:selected").text();$("#ddlTaskTrailSprint").attr("title",a),$("#idSpnLoading").css("display","none")}),$("body").on("change","#ddlNewTskSprint",function(){var a=($("#ddlNewTskSprint option:selected").text(),$("#ddlNewTskSprint option:selected").data("status"));0==a&&($("#divSprintStatusalert").dialog("option","title","Sprint status"),$(".clsremainingfields").html(_vrFreezeSprintStatus),$("#divSprintStatusalert").dialog("open"),$("#divSprintStatusalert").dialog("widget").effect("shake",{times:2},200))}),$("#btnSaveExitComm").click(function(){if(_vrSaveExitClick=_vrSaveExitFlag,$("#btnSaveComm").click(),null!=_vrLocalBRDataOnTaskClick){var a=JSON.parse(localStorage.getItem("jqxGridjqxBillingReport"));a.pagenum=_vrLocalBRDataOnTaskClick.pagenum,localStorage.setItem("jqxGridjqxBillingReport",JSON.stringify(a)),$("#jqxBillingReport").jqxGrid("gotopage",a.pagenum)}}),$("#ddlEmployee").on("change",function(){$("#btnFilter").click()}),$("#ddlReportPoj").on("change",function(){$("#btnFilter").click()}),$("#btnSaveComm").click(function(){var b=$("#txtCommNonBillableHours").val();if(b=b.replace(":","."),parseFloat(b)>0&&$.trim(b).length>0&&0!=$.trim($("#txtCommNonBillableHours").val()).length&&0==$.trim($("#txtNonBillableComm").val()).length)return $("#divNonBillWarningMsg").css("display","block"),!1;$("#divMainLoader").css("display","inline"),$("input[type = submit]").attr("disabled",!0);var c=$("#flCommUpload").val();0!=c.length?(_BaseUrl=_vrLocationOrigin+"/Task/ToFilesUpload?strPicFileName="+_DefaultAttachedFileName+"&strTokenID="+_vrUserTokenId,uploadFile(_BaseUrl,a,"flCommUpload"),FilterBugTrail()):a("")}),$("#btnResetComm").click(function(){$("#txtDueDate").val($("#lblDueDate").text()),$("#ddlStatus").val(_vrTaskStatusId),$("#txtCommInformTo").val(_vrInformToText),$("#ddlAssignTo").val(_vrAssignedTo),$(".clscommhours").val(""),$("#txtTaskComments").val(""),$("#txtNonBillableComm").val(""),$("#ddlCommInformTo").val("-1"),_vrTaskModule=0==$.trim(_vrTaskModule).length?" ":_vrTaskModule,$("#chkBeyondScope").prop("checked",_vrBeyondScope),$("#flCommUpload").replaceWith($("#flCommUpload").clone()),$("#txtFlUpload").val(""),1==_vrNonBillableTask?$("#txtNonBillableComm").css("display","block"):$("#txtNonBillableComm").css("display","none"),$("#divNonBillWarningMsg").css("display","none"),b(_vrCheckDdlChange),$("#txtCommMoreHours").val(""),$("#ddlSelectModule").val($.trim(_vrTaskModule).length>0&&"-1"!=_vrTaskModule?_vrTaskModule:""),$("#txtCommdate").val("")}),$(".clsCancelComm").click(function(){}),$(".gridster").on("click","#btnBRFilter",function(){$("#btnBRFilter").attr("disabled",!0),_vrSetWidthOfGraph=860,_vrSetHeightOfGraph=320,_selMonthInBAR=$("#ddlBRMonth option:selected").val(),_selYearInBAR=$("#ddlBRYear option:selected").val(),$("#idBARLoading").css("display","block"),loadBARData()}),$("#MagnifierDialog").on("click","#btnBRFilter",function(){$("#btnBRFilter").attr("disabled",!0),_vrSetWidthOfGraph=1080,_vrSetHeightOfGraph=400,_selMonthInBAR=$("#ddlBRMonth option:selected").val(),_selYearInBAR=$("#ddlBRYear option:selected").val(),$("#divMainLoader").css("display","inline"),loadBARData()}),$("#lblSignOut").click(function(){logOutUser()}),$("#txtCommNonBillableHours").blur(function(){if(!_vrNonBillableTask){var a=$("#txtCommNonBillableHours").val();a=a.replace(":","."),parseFloat(a)>0&&$.trim(a).length>0?($("#divCommNonBillable").css("display","inline"),$("#txtNonBillableComm").css("display","inline")):($("#divCommNonBillable").css("display","none"),$("#divNonBillWarningMsg").css("display","none"),$("#txtNonBillableComm").val(""))}}),$(".clscommhours").keypress(function(a){if(46!=a.which&&8!=a.which&&58!=a.which&&0!=a.which&&(a.which<48||a.which>57))return!1;var b=String.fromCharCode(a.which),c=$(this).val(),d=a.target.selectionStart,e=a.target.selectionEnd,f=c.substring(d,e);if($.trim(f).length!=c.length){var g=$(this).val()+parseFloat(b);if(g.indexOf(".")>-1||g.indexOf(":")>-1){if(46==a.which||58==a.which)return!1;var h=g.split(":");if(parseFloat(h[1])>59)return!1}if(g=g.replace(":","."),parseFloat(g)>24)return!1;_vrEventVal=b}}),$(".clscommhours").bind("copy paste cut",function(){return!1}),$(".clscommhours").click(function(){$(this).select()}),$(".clsspecifichours").keypress(function(a){if(46!=a.which&&8!=a.which&&58!=a.which&&0!=a.which&&(a.which<48||a.which>57))return!1;var b=String.fromCharCode(a.which),c=$(this).val(),d=a.target.selectionStart,e=a.target.selectionEnd,f=c.substring(d,e);if($.trim(f).length!=c.length){var g=$(this).val()+parseFloat(b);if(g.indexOf(".")>-1||g.indexOf(":")>-1){if(46==a.which||58==a.which)return!1;var h=g.split(":");if(parseFloat(h[1])>59)return!1}}}),$(".clstxthrs").blur(function(){var a=$(this).val(),b=$(this).attr("id"),c=a.replace(":",".");return c=parseFloat(c),0==c?($("#"+b).val(""),!1):(_vrMaxLengthTxt=b==_vrTskProjBudgetPlannedId?_vrMaxLengthProjBudget:_vrMaxEffLength,$(this).val(displayFormat(a)),_vrMaxLengthTxt=_vrMaxEffLength,void(c>_vrDayHrs&&("txtCommBillHours"==b||"txtCommNonBillableHours"==b)&&$("#"+b).val("")))}),$("#lnkAddComment").click(function(){event.preventDefault()}),$("#lnkNewTask").click(function(){_vrProjectIDedit="",_ddlTaskTrailProject=parseInt($("#ddlTaskTrailProject").val()),_ddlTaskTrailSprint=$("#ddlTaskTrailSprint").val(),createNewTask(_vrTaskStatus)}),$("body").on("click","#btnNewTaskInMaginfier",function(){$("#lnkNewTask").click()}),$("#lnkViewReports").click(function(){_vrReportProjVal="",$("#ddlReportPoj").empty(),$("#idAttachedFilesLink").css("display","inline"),$("#idEmpReport").css("display","none"),$("#idEffortsInfo").css("display","none"),$("#ddlReportPoj").css("display","none"),$("#lblReportProj").css("display","none"),$("#idProjBillReport").css("display","none"),$("#idEmpBillReport").css("display","none"),_vrattachedStatus="",_vrattachedTask="",_vrReportMagnifyStatus="",_vrSummaryReportDialog=1,_vrEditTaskDetails=1,_vrSummaryBillingFlag="",ViewReport()}),$("#lnkDeployment").click(function(){createNewDeployment()}),$("#ddlNewTskCustomer").change(function(){_vrProjectIDedit="",_ddlTaskTrailProject=0,$("#ddlNewTskProject").empty(),$("#ddlNewTskModule").empty(),$("#ddlNewTskAssignTo").empty(),$("#ddlNewTskInformTo").empty(),$("#ddlNewTskSprint").empty(),$("#ddlNewTskSprint").append("<option value=''>Select sprint</option>"),$("#ddlNewTskProject").append("<option value=''>Select project</option>"),$("#ddlNewTskModule").append("<option value=''>Select module</option>"),$("#ddlNewTskAssignTo").append("<option value=''>Select assign to</option>"),$("#ddlNewTskInformTo").append("<option value=''>Select inform to</option>"),$("#ddlNewTskOwner").append("<option value=''>Select owner</option>"),$("#txtNewTskInformTo").val(""),$("#txtNewTskInformTo").attr("title",""),g=$("#ddlNewTskCustomer").val(),$("#ddlAssTaskList").empty().trigger("chosen:updated"),g>0?$("#ddlNewTskProject").attr("disabled",!1):($("#ddlNewTskProject").attr("disabled",!0),$("#ddlNewTskSprint").attr("disabled",!0),$("#ddlNewTskModule").attr("disabled",!0),$("#ddlNewTskAssignTo").attr("disabled",!0),$("#ddlNewTskInformTo").attr("disabled",!0),$("#ddlAssTaskList").attr("disabled",!0).trigger("chosen:updated")),$.trim(g).length>0&&(_BaseUrl=_vrLocationOrigin+"/project/GetProjectNames?intID="+g+"&strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskProject))}),$("#ddlNewTskProject").change(function(){g=$("#ddlNewTskProject").val(),g>0?($("#ddlNewTskProject").attr("disabled",!1),$("#ddlNewTskSprint").attr("disabled",!1),$("#ddlNewTskModule").attr("disabled",!1),$("#ddlNewTskAssignTo").attr("disabled",!1),$("#ddlNewTskInformTo").attr("disabled",!1),$("#ddlAssTaskList").attr("disabled",!1).trigger("chosen:updated")):($("#ddlNewTskSprint").attr("disabled",!0),$("#ddlNewTskModule").attr("disabled",!0),$("#ddlNewTskAssignTo").attr("disabled",!0),$("#ddlNewTskInformTo").attr("disabled",!0),$("#ddlAssTaskList").attr("disabled",!0).trigger("chosen:updated")),null==g||"undefined"==g?(_vrEditStatusReport=1,_BaseUrl=_vrLocationOrigin+"/project/FetchPrjctsEmp?strPrjctID="+_vrProjectIDedit+"&strEmployeeID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskModules)):g.length>0?(_BaseUrl=_vrLocationOrigin+"/project/FetchPrjctsEmp?strPrjctID="+g+"&strEmployeeID="+_EmpId+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTskModules)):($("#ddlNewTskModule").empty(),$("#ddlNewTskAssignTo").empty(),$("#ddlNewTskInformTo").empty(),$("#ddlNewTskOwner").empty(),$("#ddlNewTskModule").append("<option value=''>Select module<option>"),$("#ddlNewTskAssignTo").append("<option value=''>Select assign to<option>"),$("#ddlNewTskInformTo").append("<option value=''>Select inform to<option>"),$("#ddlNewTskOwner").append("<option value=''>Select owner</option>"))}),$("#ddlStatus").change(function(){b(_vrDdlStatusChange)}),$("#ddlCommInformTo").change(function(){InformToOnChange("ddlCommInformTo","txtCommInformTo")}),$("#ddlNewTskInformTo").change(function(){InformToOnChange("ddlNewTskInformTo","txtNewTskInformTo");var a=$("#txtNewTskInformTo").val();$("#txtNewTskInformTo").attr("title",a)}),$("body").on("click","#chkFilterTasks",function(){getTasksBasedEmployee()}),$("body").on("click","#lnkBar",function(){c()}),$("body").on("click","#btnAddScore",function(){c()}),$("body").on("change","#ddlTaskTrailEmployee",function(){_vrLocalTaskDataOnTaskClick=null,_taskIndexNO=-1;var a=$("#ddlTaskTrailEmployee option:selected").text();$("#ddlTaskTrailEmployee").prop("title",a),getTasksBasedEmployee()}),$(".gridster").on("click","#btnRefreshTasksGrid",function(){_taskIndexNO=-1,_ddlTaskTrailProject=0,$("#imgTasksMagnify").attr("disabled",!0),_vrLocalTaskDataOnTaskClick=null,bindDataToTaskDropDownDyn(),$("#ddlTskTrailStatus").val("0"),$("#ddlTaskTrailSprint").empty(),$("#ddlTaskTrailSprint").append("<option value='0'>Select sprint</option>"),$("#ddlTaskTrailProject").empty(),$("#ddlTaskTrailProject").append("<option value='0'>Select project</option>"),void 0!==$("#ddlTaskTrailEmployee option[value='"+_EmpId+"']").val()&&$("#ddlTaskTrailEmployee").val(_EmpId),getTasksBasedEmployee(),null==$("#ddlTaskTrailEmployee").val()&&$("#ddlTaskTrailEmployee").val("0"),$("#imgTasksMagnify").attr("disabled",!1)}),$("body").on("change","#ddlTaskTrailProject",function(){_taskIndexNO=-1;var a=$("#ddlTaskTrailProject").val();$("#ddlTaskTrailSprint").empty(),0==a?$("#ddlTaskTrailSprint").append("<option value='0'>Select sprint</option>"):($("#ddlTaskTrailSprint").append("<option value='0'>Select sprint</option>"),_BaseUrl=_vrLocationOrigin+"/project/GetSprintDetails?intProjectID="+a+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagTaskWidgetSprintName)),$("#ddlTaskTrailProject").attr("title",$("#ddlTaskTrailProject option:selected").text()),getTasksBasedEmployee(),$("#ddlTaskTrailProject").attr("title",$("#ddlTaskTrailProject option:selected").text())}),$("body").on("change","#ddlNewTskSprint",function(){$("#ddlNewTskSprint option:selected").text()}),$("body").on("change","#ddlProcsstatus",function(){$("#").css("display","block");var a=$("##ddlProcsstatus").val();LoadProcsNTemlate(a),$("#ddlProcsstatus").attr("title",$("#ddlProcsstatus option:selected").text()),$("#").css("display","none")}),$("body").on("change","#ddlTskTrailStatus",function(){$("#idSpnLoading").css("display","block"),filterTaskTrailSprintDataJqxGrid(),$("#ddlTskTrailStatus").attr("title",$("#ddlTskTrailStatus option:selected").text()),$("#idSpnLoading").css("display","none")}),$(".clsNewUserMandatory").blur(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#mandatoryUserReqField").css("display","none")}),$(".clsNewTskMandatory").blur(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#errNewTskError").css("display","none")}),$("#btnNewTaskSave").click(function(){_vrCloseDialog="1",validateNewTskFields()}),$("#btnNewTaskSaveNew").click(function(){_vrCloseDialog="0",validateNewTskFields()}),$("#btnNewTaskCancel").click(function(){_vrCloseDialog="1",ClearNewTaskFields(),$("#idSpnLoading").css("display","none")}),$("body").on("change","#ddlBugTrProject",function(){_BTIndexNO=-1,$("#ddlBugTrTaskName").empty(),$("#ddlBugTrTaskName").append("<option value='0'>Select task</option>"),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+$("#ddlBugTrProject").val()+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagBugTrTask);var a=$("#ddlBugTrProject option:selected").text();$("#ddlBugTrProject").prop("title",a),$("#btnFilterBugTrail").click()}),$("body").on("change","#ddlTskOpenBugTrProject",function(){$("#ddlTskOPenBugTrTaskName").empty(),$("#ddlTskOPenBugTrTaskName").append("<option value='0'>Select task</option>"),_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+$("#ddlTskOpenBugTrProject").val()+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrTskOpenBugsTsk);var a=$("#ddlTskOPenBugTrTaskName option:selected").text();$("#ddlTskOPenBugTrTaskName").prop("title",a),$("#btnTskOpenFilterBugTrail").click()}),$("body").on("change","#ddlTskOpenBugTrEmp",function(){var a=$("#ddlTskOpenBugTrEmp option:selected").text();$("#ddlTskOpenBugTrEmp").prop("title",a),$("#btnTskOpenFilterBugTrail").click()}),$("body").on("change","#ddlTskOPenBugTrTaskName",function(){var a=$("#ddlTskOPenBugTrTaskName option:selected").text();$("#ddlTskOPenBugTrTaskName").prop("title",a),$("#btnTskOpenFilterBugTrail").click()}),$("body").on("change","#ddlTskOpenBugStatus",function(){var a=$("#ddlTskOpenBugStatus option:selected").text();$("#ddlTskOpenBugStatus").prop("title",a),$("#btnTskOpenFilterBugTrail").click()}),$("body").on("change","#ddlBugTrEmp",function(){var a=$("#ddlBugTrEmp option:selected").text();$("#ddlBugTrEmp").prop("title",a),$("#btnFilterBugTrail").click()}),$("body").on("change","#ddlBugTrTaskName",function(){var a=$("#ddlBugTrTaskName option:selected").text();$("#ddlBugTrTaskName").prop("title",a),$("#btnFilterBugTrail").click()}),$("body").on("change","#ddlBugStatus",function(){var a=$("#ddlBugStatus option:selected").text();
$("#ddlBugStatus").prop("title",a),$("#btnFilterBugTrail").click()}),$("#ddlBugProjectName").change(function(){$("#ddlBugProjectName").val()!=_vrDdlDefault?(_BaseUrl=_vrLocationOrigin+"/project/GetPrjctRelatdTsk?strPrjctID="+$("#ddlBugProjectName").val()+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,bindFieldsToDropdown,_vrFlagNewBugTrTask)):($("#ddlNewBugTask").empty(),$("#ddlNewBugTask").append("<option value='0'>Select task</option>"))}),$("#ddlCreateBugBrowser").change(function(){InformToOnChange("ddlCreateBugBrowser","txtBrowsers")}),$("body").on("change","#ddlBRYear",function(){_varcheckDragDropBAR++,_selYearInBAR=$("#ddlBRYear option:selected").val(),$("#ddlBRYear").attr("title",_selYearInBAR)}),$("body").on("change","#ddlBRMonth",function(){_varcheckDragDropBAR++,_selMonthInBAR=$("#ddlBRMonth option:selected").val();var a=$("#ddlBRMonth option:selected").text();$("#ddlBRMonth").attr("title",a)}),$("#lnkCreateBug").click(function(){createNewBug()}),$("body").on("click","#btnFilterBugTrail",function(){$("#idBugTrailLoading").css("display","block"),_vrLocalBTDataOnBugClick=null,_vrddlProjId=$("#ddlBugTrProject").val(),_vrddlTaskId=$("#ddlBugTrTaskName").val(),_vrddlStatus=$("#ddlBugStatus").val(),_vrddlEmpName=$("#ddlBugTrEmp").val(),_vrblnProjId="0"==_vrddlProjId?!1:!0,_vrblnTaskId="0"==_vrddlTaskId?!1:!0,_vrblnStatus="0"==_vrddlStatus?!1:!0,_vrblnEmpName="0"==_vrddlEmpName?!1:!0,FilterBugTrail()}),$("body").on("click","#btnTskOpenFilterBugTrail",function(){$("#idTskBugTrailLoading").css("display","block"),_vrTskddlProjId=$("#ddlTskOpenBugTrProject").val(),_vrTskddlTaskId=$("#ddlTskOPenBugTrTaskName").val(),_vrTskddlStatus=$("#ddlTskOpenBugStatus").val(),_vrTskddlEmpName=$("#ddlTskOpenBugTrEmp").val(),_vrTskblnProjId="0"==_vrTskddlProjId?!1:!0,_vrTskblnTaskId="0"==_vrTskddlTaskId?!1:!0,_vrTskblnStatus="0"==_vrTskddlStatus?!1:!0,_vrTskblnEmpName="0"==_vrTskddlEmpName?!1:!0,FilterTskOpenBugTrail()}),$(".clsnewbugmandatory").change(function(){$.trim($(this).val()).length>0&&$(this).removeClass("error"),0==$(".error").length&&$("#divErrNewBug").css("display","none")}),$("#btnSaveBug").click(function(){_vrFunctionalityStatus=_vrBugSaveStatus,submitBugData()}),$("#btnSaveNewBug").click(function(){_vrSaveNewBug=_vrResponseId,vrstatus=!0,_vrFunctionalityStatus=_vrBugSaveStatus,submitBugData()}),$("#btnUpdateBug").click(function(){if(_vrFunctionalityStatus=_vrBugUpdateStatus,_vrLocalBTDataOnBugClick=null,_vrLocalBTDataOnBugClick=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial")),$("#divBugAttachedFiles .clsremovefileonupdate").length>0){var a="";$(".clshrefupdatedbug").each(function(){if(1==$(this).hasClass("clsremovefileonupdate")){var b=$(this).find("a").prop("title");a=a+b+"~"}}),_BaseUrl=_vrLocationOrigin+"/Bug/DeleteFile";var b={FileName:a,TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,b,submitBugData)}else submitBugData()}),$(".clsuploadedfiles").on("click",".clsnewbugfileremove",function(){var a=$(this).closest(".clsbugdynfilename").prop("title");_BaseUrl=_vrLocationOrigin+"/Bug/DeleteFile";var b={FileName:a,TokenID:_vrUserTokenId};ajaxCallWithObject(_BaseUrl,b,loadBugFileName),$(this).closest(".clsnewbugdynupload").remove(),event.preventDefault()}),$("#btnClearBug").click(function(){0!=_vrFileUploading.length&&(_vrFileUploading=_vrFileUploadCanceled),$("#dailog").dialog("option","title",_vrDialogBoxNewBug),deleteUploadedFile(),vrstatus=!1,clearBugDetailsFields()}),$("#txtBugSearch").keypress(function(a){var b=a.which;return 13==b?($("#btnSearchBugId").click(),!1):void 0}),$("#btnSearchBugId").click(function(){deleteUploadedFile(),vrstatus=!1,$.trim($("#txtBugSearch").val())>0&&(_BaseUrl=_vrLocationOrigin+"/Bug/GetBugTrailData?intBugID="+$("#txtBugSearch").val()+"&strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,BindBugFields))}),$("#btnGoToTask").click(function(){0!=_vrFileUploading.length&&(_vrFileUploading=_vrFileUploadCanceled),deleteUploadedFile(),taskLink(_vrExistingBugTaskId,_vrExistingBugProjId,_vrExistingBugTaskSubject)}),$(".gridster").on("click","#imgNewTask",function(){_vrLocalTaskDataOnTaskClick=null,_vrLocalTaskDataOnTaskClick=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid"));$(this).attr("id");_ddlTaskTrailProject=parseInt($("#ddlTaskTrailProject").val()),_ddlTaskTrailSprint=$("#ddlTaskTrailSprint").val(),createNewTask(_vrTaskStatus)}),$(".gridster").on("click","#imgNewBug",function(){_vrLocalBTDataOnBugClick=null,_vrLocalBTDataOnBugClick=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial")),createNewBug()}),$("body").on("click",".clsnewnavfields",function(){var a=$(this).html(),b=$(this).find("label").attr("id");"lblLogin"==b&&(a="User details"),0==a.length&&(a=_vrBugRecorded),$("#divUnderDevelopment").dialog("option","title",a),$(".clsremainingfields").html(_vrUnderDevelop),$("#divUnderDevelopment").dialog("open"),$("#divUnderDevelopment").dialog("widget").effect("shake",{times:2},200)}),$("#btnSubmitDevelopment").click(function(){$("#flCommUpload").replaceWith($("#flCommUpload").clone()),$("#flNewTskAttachFile").replaceWith($("#flNewTskAttachFile").clone()),$("#divUnderDevelopment").dialog("close")}),$("#btnSubmitSprintStatus").click(function(){if($("#divSprintStatusalert").dialog("close"),$("#ddlNewTskSprint").val(0),1==_vrEditTaskFlagSprint){$("#ddlNewTskSprint").val(_vrEditSprintID);var a=$("#ddlNewTskSprint").val();null==a&&$("#ddlNewTskSprint").val(0)}}),$("#txtSearchWebstation").focus(function(){$("#lblSearchDevelopment").css("display","inline"),$(this).removeAttr("placeholder")}),$("#txtSearchWebstation").focusout(function(){$(this).attr("placeholder","Search any thing in Webstation")}),$("#txtSearchWebstation").blur(function(){$("#lblSearchDevelopment").css("display","none")}),$(".gridster-container").click(function(){$(".jqx-menu").css("display","none"),$(".clsDatePicker").datepicker("hide")}),$("#imgFlUpload").click(function(){$("#txtFlUpload").val(""),$("#flCommUpload").replaceWith($("#flCommUpload").clone()),$("#flCommUpload").click()}),$("#btnSubmitPreferences").click(function(){_vrUserPrefBtnClick.length>0&&ShowNHideColumns(_vrUserPrefBtnClick);$(".info").html("Saving user preferences"),showStatusDiv(),$(".clsusertasks .clstasksfields").length>0&&$("#jqxTasksgrid").jqxGrid("setcolumnproperty","TaskID","text","Task ID");var a={col:"",row:"",xaxisval:"",yaxisval:"",WidgetId:"",vrAllWidgetContrlData:[]},b={},c="",d=[],e=[],f="";$(".widget").each(function(){var g=$(this).attr("id");if("undefined"!=typeof g){var h=g.replace("divWidget","chk");if($("#"+h).prop("checked")){a={col:"",row:"",xaxisval:"",yaxisval:"",WidgetId:"",vrAllWidgetContrlData:[]},b={},e=[],a.xaxisval=$(this).attr("data-sizex"),a.yaxisval=$(this).attr("data-sizey"),a.col=$(this).attr("data-col"),a.row=$(this).attr("data-row"),a.WidgetId=g;for(var i=$("#"+g).find(".clscontroluserpref"),j=0;j<i.length;j++)c=i[j].id,"chkFilterTasks"==c||"chkHoldBugs"==c||"chkBillingReportBeyondScope"==c?(f=$("#"+c).prop("checked"),b[c]=f):b[c]=$("#"+c).val();e.push(b),a.vrAllWidgetContrlData=e,d.push(a)}}}),_vrObjJqxGrids.jqxGridjqxBillingReport=JSON.parse(localStorage.getItem("jqxGridjqxBillingReport")),null!=_vrObjJqxGrids.jqxGridjqxBillingReport&&(_vrObjJqxGrids.jqxGridjqxBillingReport.pagesize=_vrBillingGridPagerSize,_vrObjJqxGrids.jqxGridjqxBillingReport.width=_vrBillingReportGridWidth),_vrObjJqxGrids.jqxGridjqxBugTrial=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial")),null!=_vrObjJqxGrids.jqxGridjqxBugTrial&&(_vrObjJqxGrids.jqxGridjqxBugTrial.pagesize=_vrDefaultBugSizer,_vrObjJqxGrids.jqxGridjqxBugTrial.width=_vrProjectsTasksWidth),_vrObjJqxGrids.jqxGridjqxCustomerTrial=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial")),null!=_vrObjJqxGrids.jqxGridjqxCustomerTrial&&(_vrObjJqxGrids.jqxGridjqxCustomerTrial.pagesize=_vrDefaultCustomerSizer,_vrObjJqxGrids.jqxGridjqxCustomerTrial.width=_vrCustomersGridWidth),_vrObjJqxGrids.jqxGridjqxProjectsGrid=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid")),null!=_vrObjJqxGrids.jqxGridjqxProjectsGrid&&(_vrObjJqxGrids.jqxGridjqxProjectsGrid.pagesize=_vrDefaultProjSizer,_vrObjJqxGrids.jqxGridjqxProjectsGrid.width=_vrProjectsGridWidth),_vrObjJqxGrids.jqxGridjqxTasksgrid=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid")),null!=_vrObjJqxGrids.jqxGridjqxTasksgrid&&(_vrObjJqxGrids.jqxGridjqxTasksgrid.pagesize=_vrDefaultTaskSizer,_vrObjJqxGrids.jqxGridjqxTasksgrid.width=_vrProjectsTasksWidth),_vrObjJqxGrids.jqxGridjqxUserTrial=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial")),null!=_vrObjJqxGrids.jqxGridjqxUserTrial&&(_vrObjJqxGrids.jqxGridjqxUserTrial.pagesize=_vrDefaulUserSizer,_vrObjJqxGrids.jqxGridjqxUserTrial.width=_vrUsersGridWidth),_vrObjJqxGrids.jqxGridjqxDeployGrid=JSON.parse(localStorage.getItem("jqxGridjqxDeployGrid")),null!=_vrObjJqxGrids.jqxGridjqxDeployGrid&&(_vrObjJqxGrids.jqxGridjqxDeployGrid.pagesize=_vrDefaultDeploySizer,_vrObjJqxGrids.jqxGridjqxDeployGrid.width=_vrProjectsTasksWidth),_vrObjJqxGrids.gridsterWidgets=d,null!=_vrObjJqxGrids.jqxGridjqxTasksgrid&&(_vrObjJqxGrids.jqxGridjqxTasksgrid.columns.TaskID.text="Task ID"),_BaseUrl=_vrLocationOrigin+"/user/InsertUserPreferenceDetails";var g={TokenID:_vrUserTokenId,EmpID:_EmpId,Preferences:JSON.stringify(_vrObjJqxGrids)};ajaxCallWithObject(_BaseUrl,g,GetInsertedResponse),$(".clsusertasks .clstasksfields").length>0&&$("#jqxTasksgrid").jqxGrid("setcolumnproperty","TaskID","text",'Task ID <img src="img/Status.png" title="Status" class="clsstatushdrimg">')}),$("#imgUserPref").click(function(){_vrUserPrefBtnClick="",$("#btnSubmitPreferences").click()})});var linkrenderer_Reports=function(a,b,c){return linkrenderreportvalues("ReportGrid",a,b,c)},linkrenderreportvalues=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c){var d=c.TaskID,e=c.ProjectID,f=c.TaskName;if(null!=f)var g=convertDoubleSingleQuotetoChar(c.TaskName.toString())}return"<div class='clscustcompanyvalues clsaddellipsis'><a href='#' onclick='SummaryTaskLink("+d+","+e+","+g+")' >"+f+"</a></div>"},linkrenderer_ReportsEmployee=function(a,b,c){return linkrenderreportEmpvalues("ReportGrid",a,b,c)},linkrenderreportEmpvalues=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c)var d=c.EmpFirstName,e=c.EmpID;return"<div class='clscustcompanyvalues clsaddellipsis'><a href='#' onclick='RepotEmployeeValues("+e+")' >"+d+"</a></div>"},linkrenderer_ReportsFiles=function(a,b,c){return linkrenderreportFiles("ReportGrid",a,b,c)},linkrenderreportFiles=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c)var d=c.AttachedFiles;var e=_vrAttachedFilesPath+d;return"<div class='clscustcompanyvalues clsaddellipsis'><a target='_blanck' href='"+e+"'  >"+d+"</a></div>"},linkrenderer_ReportCreatedOn=function(a,b,c){return linkrenderreportcreatedon("ReportGrid",a,b,c)},linkrenderreportcreatedon=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c&&"undefined"!=typeof c.CreatedOn){var d=c.CreatedOn,e=d.split(" "),f=e[0].split("/"),g=f[1]+"/"+f[0]+"/"+f[2],h=g+" "+e[1];return"<div class='clscustcompanyvalues clsaddellipsis' title='"+h+"'>"+h+"</div>"}},linkrenderer_taskcreatedon=function(a,b,c){return linkrendertaskcreatedon("jqxTasksgrid",a,b,c)},linkrendertaskcreatedon=function(a,b){var c=$("#"+a).jqxGrid("getrowdata",b);if(null!=c&&"undefined"!=typeof c.CreatedOn){var d=c.CreatedOn,e=d.split(" "),f=e[0].split("/"),g=f[1]+"/"+f[0]+"/"+f[2],h=g+" "+e[1];return"<div class='clscustcompanyvalues clsaddellipsis' title='"+h+"'>"+h+"</div>"}},vrProjId="",vrInProgTasks="",vrProjectName="",vrProjectManager="",vrProjVersionNumber="",vrProjManagersIds="",vrProjectManagers="",vrProjectNameShow="",_vrFirstTimeProjectLoading="1",_vrProjectLoaded="",rowIDs=new Array,SprintStatus="",vrJqxId="",_vrSprintStatus="";$(document).ready(function(){$("#addrowbutton").jqxButton(),$(".clspercentagenumeric").keypress(function(a){return a.keyCode>=48&&a.keyCode<=57?void 0:!1}),$(".clspercentagenumeric").keypress(function(a){return a.keyCode>=48&&a.keyCode<=57?void 0:!1}),$(".gridster").on("click","#btnRefreshProjectsGrid",function(){_projIndexNO=-1,$("#btnMagnifyProject").attr("disabled",!0),_vrSelProjStatus="",_vrSelProjCustomer="",$("#divProjectLoading").css("display","block"),$("#txtProjTrProjects").val(""),fetchProjectsData(),LoadCountDataToCustUserProjSilde(),$("#btnMagnifyProject").attr("disabled",!1),$("#divProjectLoading").css("visibility","none")}),$(".gridster").on("click","#btnProjectResetSearch",function(){$("#txtProjTrProjects").val(""),filterProjectsJqxGrid()}),$("#ddlFirstReleaseVersion").change(function(){var a=$("#ddlFirstReleaseVersion option:selected").text();$("#ddlFirstReleaseVersion").prop("title",a)}),$("#ddlSecondReleaseVersion").change(function(){var a=$("#ddlSecondReleaseVersion option:selected").text();$("#ddlSecondReleaseVersion").prop("title",a)}),$("#divCreateNewProject").on("change",".error",function(){$.trim($(this).val()).length>0&&($(this).removeClass("error"),0==$("#divCreateNewProject .error").length&&$(".clserrorprojlbl").css("display","none"))}),$("#divProjAttachedFiles").on("click",".clsupdatedprojectfileremove",function(){$(this).closest(".clsprojattachedfiles").find("a").prop("title");$(this).closest(".clsprojattachedfiles").addClass("clsremoveprojectfileonupdate"),$(this).css("display","none"),$(this).closest(".clsprojattachedfiles").find(".clsprojfileremovecancel").css("display","inline")}),$("#divProjAttachedFiles").on("click",".clsprojfileremovecancel",function(){$(this).closest(".clsprojattachedfiles").find("a").prop("title");$(this).closest(".clsprojattachedfiles").removeClass("clsremoveprojectfileonupdate"),$(this).css("display","none"),$(this).closest(".clsprojattachedfiles").find(".clsupdatedprojectfileremove").css("display","inline")})});var linkrenderer_projects=function(a,b,c){return linkrendervalues("jqxProjectsGrid",a,b,c)},linkrenderer_projectsmagnifier=function(a,b,c){return linkrendervalues("jqxPreviewGrid",a,b,c)},linkrenderer_projectname=function(a,b,c){return linkrendererprojectnamevalues("jqxProjectsGrid",a,b,c)},linkrenderer_projectnamemagnifier=function(a,b,c){return linkrendererprojectnamevalues("jqxPreviewGrid",a,b,c)},linkrendervalues=function(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);return null!=c&&(vrInProgTasks=c.InProgressTasks,vrProjId=c.ProjectID,vrProjectName=convertDoubleSingleQuotetoChar(c.ProjectName),vrProjectManager=convertDoubleSingleQuotetoChar(c.ProjectManager)),"<div><a href='#' onclick='projInProgLink("+vrProjId+","+vrProjectName+","+vrProjectManager+")' class='clsprojinprogcount'>"+vrInProgTasks+"</a></div>"}catch(d){}},linkrendererprojectnamevalues=function(a,b){try{var c=$("#"+a).jqxGrid("getrowdata",b);return null!=c&&(vrInProgTasks=c.InProgressTasks,vrProjId=c.ProjectID,vrProjectNameShow=$.trim(c.ProjectName),vrProjectName=convertDoubleSingleQuotetoChar(c.ProjectName),vrProjectManager=convertDoubleSingleQuotetoChar(c.ProjectManager)),"<div  class='clsprojnameprojects clsaddellipsis'><a href='#' onclick='projInProgLink("+vrProjId+","+vrProjectName+","+vrProjectManager+")'>"+vrProjectNameShow+"</a></div>"}catch(d){}};$("#txtProjTrProjects").on("mouseleave",function(){$("#txtProjTrProjects").css("cursor","none")});var linkrenderer_sprintstatus=function(a,b,c){return linkrendersprintstatus("JqxGridSprint",a,b,c)},imagerenderer=function(){return'<input type="text" id="txtBugTrFromDate" class="clsDatePicker hasDatepicker" readonly="" placeholder="From date" title="From date"><img height="60" width="50" src="http://localhost:61349/images/calendar.gif"/>'};Date.prototype.getMonthName=function(){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];return a[this.getMonth()]},$(document).ready(function(){$("#divProjAttachFiles").on("click",".clsnewprojfileremove",function(){var a=$(this).closest(".clsprojdynfilename").prop("title");deleteUploadedFileFunc(a),$(this).closest(".clsnewprojdynupload").remove(),0==$.trim($("#divProjAttachFiles").html()).length?$("#divProjAttachFiles").css("border","none"):$("#divProjAttachFiles").css("border","1px solid rgb(210, 208, 208)"),0==$.trim($("#divProjAttachedFiles").html()).length?$("#divProjAttachedFiles").css("border","none"):$("#divProjAttachedFiles").css("border","1px solid rgb(210, 208, 208)"),event.preventDefault()})});var linkrenderer_SprintDatetimeformat=function(a,b,c){var d=formatSprintDisplayDate(c);return"<div title='"+d+"' class='clssprintprojects'><label title='"+d+"'>"+d+"</label></div>"};$(document).ready(function(){$("#txtQuoteDate").css("width","195px").attr("disabled",!0),$("#lblTestingQuote").text(_vrTestingQuote+_vrCalType),$("#lblDocumentationQuote").text(_vrDocumentationQuote+_vrCalType),$("#lblSupportQuote").text(_vrSupQuote+_vrCalType),$("#lblDeployQuote").text(_vrDepQuote+_vrCalType),$("#btnAddRowQuote").click(function(){$("#jqxQuoteGrid").jqxGrid("addrow",null,{});var a=$("#jqxQuoteGrid").jqxGrid("getdatainformation").rowscount,b=a-1;$("#jqxQuoteGrid").jqxGrid("setcellvalue",b,"TaskCategoryType","Feature addition/development"),$("#jqxQuoteGrid").jqxGrid("setcellvalue",b,"IsTaskCreated",!0),$("#jqxQuoteGrid").jqxGrid("refreshData")}),$("#btnDeleteRowQuote").on("click",function(){var a=$("#jqxQuoteGrid").jqxGrid("getselectedrowindex"),b=$("#jqxQuoteGrid").jqxGrid("getdatainformation").rowscount;if(a>=0&&b>a){var c=$("#jqxQuoteGrid").jqxGrid("getrowid",a),d=$("#jqxQuoteGrid").jqxGrid("getrowdata",c),e=($("#jqxQuoteGrid").jqxGrid("deleterow",c),d.QuoteDetailsID);parseInt(e)>0&&(_BaseUrl=_vrLocationOrigin+"/Customer/DeleteQuoteHistoryDetails?intQuoteDetailsID="+e+"&strTokenID="+_vrUserTokenId,ajaxCallBindDropDown(_BaseUrl,deleteSelQuoteRec))}}),$("#jqxQuoteGrid").bind("cellendedit",function(a){{var b=(parseInt(_vrTestingQuote)+parseInt(_vrDocumentationQuote)+parseInt(_vrSupQuote)+parseInt(_vrDepQuote),a.args),c=b.datafield,d=b.rowindex,e=b.value;b.oldvalue}if(_vrQuoteCellValue==c){var f=e*(_vrTestingQuote/_vrTotalPercent),g=e*(_vrDocumentationQuote/_vrTotalPercent),h=e*(_vrDepQuote/_vrTotalPercent),i=e*(_vrSupQuote/_vrTotalPercent),j=parseFloat(e)+parseFloat(f)+parseFloat(g)+parseFloat(h)+parseFloat(i);$("#jqxQuoteGrid").jqxGrid("setcellvalue",d,"Testing",f),$("#jqxQuoteGrid").jqxGrid("setcellvalue",d,"Documentation",g),$("#jqxQuoteGrid").jqxGrid("setcellvalue",d,"Deployment",h),$("#jqxQuoteGrid").jqxGrid("setcellvalue",d,"Support",i),$("#jqxQuoteGrid").jqxGrid("setcellvalue",d,"TotalHours",j);var k=$("#jqxQuoteGrid").jqxGrid("getcolumnaggregateddata","TotalHours",["sum"]).sum;$("#lblTtlHrsExt").text(displayFormat(k))}}),$("#ddlQuoteClientName").change(function(){$("#ddlQuoteProjectName").attr("disabled",!1);var a=$("#ddlQuoteClientName").val();0!=a?(_BaseUrl=_vrLocationOrigin+"/project/GetProjectNames?intID="+a+"&strTokenID="+_vrUserTokenId+"&blnIsProjectManager="+_vrUserIsProjManager+"&intEmpID="+_EmpId+"&intRoleID="+_UserRoleId,ajaxCallBindDropDown(_BaseUrl,bindQuoteProjectDdl)):($("#ddlQuoteProjectName").empty(),$("#ddlQuoteProjectName").append("<option value='0'>Select project</option>"),$("#ddlQuoteProjectName").attr("disabled",!0))}),$(".clsquotemandatory").change(function(){$.trim($(this).val())>0&&($(this).removeClass("error"),$(".error").length>0&&$("#lblQuoteMandatoryError").css("display","none"))}),$("#ddlQuoteStatus").change(function(){$("#ddlQuoteStatus").val()==_vrQuoteClienbtApprove?setEditableDisable():setEditableEnable()})});var linkrenderer_QuoteId=function(a,b,c){return linkrendercustomerquote("jqxQuotationGrid",a,b,c)},linkrendercustomerquote=function(a,b,c,d){var e="",f=$("#"+a).jqxGrid("getrowdata",b);return null!=f&&(e=JSON.stringify(f.QuoteID).toString()),"<div class='clstsktrltaskname clsaddellipsis'><a  href='#' onclick='quoteLink("+e+")'>"+d+"</a></div>"},_idSlider,_idTasks="idTasksSlide",_idBugs="idBugsSlide",_idProjects="idProjectsSlide",_idImgMagnify="imgTasksMagnify",_idImgUserMagnify="imgUserMagnify",_idImgBillingReportMagnify="imgBIllingReportrMagnify",_idUser="idUserSlide",_idBillingReport="idBillingReportSlide",_idImgCustomerTrMagnify="imgCustomerMagnifier",_idImgBugTrMagnify="imgBugTrMagnify",_idImgProjTrMagnify="btnMagnifyProject",_idbtnImgBARMagnify="btnImgBAR",_idCustomer="idCustomerSlide",_idDashboard="idDashboardslide",_idProcSlide="idProcSlide",_idQuote="idQuotationSlide",_idDeployment="idDeploymentSlide",_idImgDeployMagnify="imgDeployMagnify",_idBarScore="idBARSlide",_idImgQuoteMagnify="imgQuotationMagnify",topSlider=startupModule(function(a){var b,c,d=function(){b=a(".slider"),c=a(".slider .slide"),c.draggable({appendTo:"body",helper:"clone",cursor:"move"}),b.bxSlider({mode:"horizontal",slideWidth:215,minSlides:2,maxSlides:5,moveSlides:1,slideMargin:16,responsive:!0,infiniteLoop:!1,hideControlOnEnd:!0,pager:!1}),a(".add_to_grid").click(function(){var b=a(this).data("fetch");b&&gridster.addToWidget(b)})};return{init:d}}(jQuery,document)),gridster=startupModule(function(){function a(a,c){var d=checkUserPrefWidgetsPosition(c).split(",");$.trim(d).length>0?b.add_widget(a,parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])):c==_idBarScore?b.add_widget(a,2,1):b.add_widget(a,1,1)}var b,c;if($(window).width()<=800&&$(window).width()>=500){var d=1;$(".clsbugtrail").attr("data-row","2"),$(".clsbugtrail").attr("data-col","1")}else if($(window).width()<1200&&$(window).width()>800){var d=2;$(".clsbugtrail").attr("data-row","2"),$(".clsbugtrail").attr("data-col","1")}else if($(window).width()>=1200&&$(window).width()<1750)var d=3;else if($(window).width()>=1750)var d=4;var e=_DefaultWidget,f=_widgetTasksHeader+$(".clsusertasks").html()+_widgetEnd,g=_widgetBugHeader+$(".clsbugtrail").html()+_widgetEnd,h=_widgetUserHeader+$(".clsuser").html()+_widgetEnd,i=_widgetProjectHeader+$(".clsprojwidget").html()+_widgetEnd,j=_widgetCustomerHeader+$(".clscustomertrail").html()+_widgetEnd,k=_widgetBillingReportHeader+$(".clsBillingReportwidget").html()+_widgetEnd,l=_widgetProjTasksCount+$(".clsclientroletskdetcharts").html()+_widgetEnd,m=_widgetDeploymentHeader+$(".clsdeploy").html()+_widgetEnd,n=_widgetQuoteHeader+$(".clsquotation").html()+_widgetEnd,o=_widgetBAR+$(".clsbrPoints").html()+_widgetEnd;_vrHTMLBRWidget=$("#idShowBARInMagnify").html();var p=function(){c=$(".gridster"),b=c.gridster({widget_selector:".widget",autogrow_cols:!0,widget_margins:[10,10],min_cols:d,max_cols:d,widget_base_dimensions:[410,423],resize:{enabled:!0},serialize_params:function(a,b){return{id:$(a).attr("id"),col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}}}).data("gridster"),c.on("click",".close_widget",function(){$(".clsslideinner").find("button").prop("disabled",!1),b.remove_widget($(this).parents(".widget"))}),c.on("click",".magnify_widget",function(){var a=$(this).attr("id");if(_idImgMagnify===a){if(null!=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid"))){_vrPageNumForTaskWidget=JSON.parse(localStorage.getItem("jqxGridjqxTasksgrid")).pagenum;var b=_vrPageNumForTaskWidget*_vrDefaultTaskSizer+_vrDefaultTaskSizer,c=(b/_vrMagnifierTaskSizer).toFixed()}openMagnifyDialogBox(_vrTaskTrailTitle,"jqxTasksgrid",_vrMagnifierTaskSizer),$("#MagnifierDialog").append($(".clstasksfields")),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager&&($("#imgTaskUserPref").css("margin-left","0px"),$("#imgTaskUserPref").css("margin-top","5px")),$("#btnNewTaskInMaginfier").css("display","block"),$("#btnNewTaskInMaginfier").jqxButton(),$("#ddlTskTrailStatus").css("margin-left","20px"),$("#ddlTskTrailStatus").css("margin-top","5px"),$("#divBlnExcludeCSD").css("margin-left","36px"),$("#imgTaskUserPref").css("display","block"),loadJqxTasksGrid(_vrFlagData),filterTaskTrailSprintDataJqxGrid(),_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId||0!=_vrUserIsProjManager||$("#btnNewTaskInMaginfier").css("display","none"),_vrBtnWidgetResize>0?_vrBtnWidgetResize--:_vrBtnWidgetResize++,c>=0&&(c--,$("#jqxTasksgrid").jqxGrid("gotopage",c))}else if(_idImgBugTrMagnify==a){if(null!=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial"))){_vrPageNumForBugTrailWidget=JSON.parse(localStorage.getItem("jqxGridjqxBugTrial")).pagenum;var d=_vrPageNumForBugTrailWidget*_vrDefaultBugSizer+_vrDefaultBugSizer,e=(d/_vrMagnifierBugSizer).toFixed()}$("#imgBTUserPref").css("display","block"),openMagnifyDialogBox(_vrDialogBoxBugTrail,"jqxBugTrial",_vrMagnifierBugSizer),$("#divBugTrToDate").removeClass("clsbugtrailfields"),$("#ddlBugStatus").css("margin-left","10px"),$("#txtBugTrFromDate, #txtBugTrToDate").css("margin-left","0px"),$("#bugTrailCheckBox").css("margin-top","35px"),_vrBtnBugTrailResize>0?_vrBtnBugTrailResize--:_vrBtnBugTrailResize++,$("#divBugTrToDate").addClass("clsbugtrailtodate"),$("#MagnifierDialog").append($("#idBugTrail")),loadJqxBugGrid(_vrFlagData),e>=0&&(e--,$("#jqxBugTrial").jqxGrid("gotopage",e))}else if(_idImgProjTrMagnify==a){if(null!=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid"))){_vrPageNumForProjectsWidget=JSON.parse(localStorage.getItem("jqxGridjqxProjectsGrid")).pagenum;var f=_vrPageNumForProjectsWidget*_vrDefaultProjSizer+_vrDefaultProjSizer,g=(f/_vrMagnifierProjSizer).toFixed()}$("#imgProjUserPref").css("display","block"),_vrProjMagnifyDialog=1,openMagnifyDialogBox(_vrProjectsTitle,"jqxProjectsGrid",_vrMagnifierProjSizer),loadJqxProjectsGrid(),$("#MagnifierDialog").append($("#divProjectsTrail")),$("#btnProjectResetSearch").click(function(){$("#txtProjTrProjects").val(""),filterProjectsJqxGrid()}),g>=0&&(g--,$("#jqxProjectsGrid").jqxGrid("gotopage",g))}else if(_idImgCustomerTrMagnify==a){if(_vrLocalCustDataOnCustClick=null,null!=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial"))){_vrPageNumForCustWidget=JSON.parse(localStorage.getItem("jqxGridjqxCustomerTrial")).pagenum;var h=_vrPageNumForCustWidget*_vrDefaultCustomerSizer+_vrDefaultCustomerSizer,i=(h/_vrMagnifierCustomerSizer).toFixed()}_vrCustMagnifyDialog=1,$("#imgCustUserPrefCont").css("display","block"),openMagnifyDialogBox(_vrCustomerDialogHdr,"jqxCustomerTrial",_vrMagnifierCustomerSizer),$("#MagnifierDialog").append($(" #idCustomerTrail")),loadJqxCustomersGrid(),$("#btnCustomerResetSearch").click(function(){$("#idSearchCustomer").val(""),filterCustomersJqxGrid()}),i>=0&&(i--,$("#jqxCustomerTrial").jqxGrid("gotopage",i))}else if(_idImgUserMagnify==a){if(_vrLocalUserDataOnUserClick=null,null!=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial"))){_vrPageNumForUserWidget=JSON.parse(localStorage.getItem("jqxGridjqxUserTrial")).pagenum;var j=_vrPageNumForUserWidget*_vrDefaultUserSizer+_vrDefaultUserSizer,k=(j/_vrMagnifierUserSizer).toFixed()}_vrUserMagnifyDialog=1,$("#imgWidgetUserPrefContainer").css("display","block"),openMagnifyDialogBox(_vrUserTitle,"jqxUserTrial",_vrMagnifierUserSizer),$("#MagnifierDialog").append($("#idUser")),loadJqxUserMagifyClickGrid(),$("#btnUserResetSearch").click(function(){$("#txtUserSearch").val(""),filterUserJqxGrid()}),k>=0&&(k--,$("#jqxUserTrial").jqxGrid("gotopage",k))}else if(_idImgBillingReportMagnify==a){if(null!=JSON.parse(localStorage.getItem("jqxGridjqxBillingReport"))){_vrPageNumForBRWidget=JSON.parse(localStorage.getItem("jqxGridjqxBillingReport")).pagenum;var l=_vrPageNumForBRWidget*_vrBillingGridPagerSize+_vrBillingGridPagerSize,m=(l/_vrDefaultBillingReportSizer).toFixed()}$("#divBRUserPrefCont").css("display","block"),_UserRoleId==_vrUserRoleId&&(0==_vrUserIsProjManager?$("#imgBRUserPref").css("margin-left","440px"):$("#imgBRUserPref").css("margin-left","440px")),openMagnifyDialogBox(_vrBillingReportTitle,"jqxBillingReport",_vrDefaultBillingReportSizer),$("#MagnifierDialog").append($("#divInnerBillingReportContent")),loadJqBillingModifiedsGrid(),m>=0&&(m--,$("#jqxBillingReport").jqxGrid("gotopage",m))}else if(_idImgDeployMagnify==a){if(null!=JSON.parse(localStorage.getItem("jqxGridjqxDeployGrid"))){_vrLocalDeployData=JSON.parse(localStorage.getItem("jqxGridjqxDeployGrid")).pagenum;var n=_vrLocalDeployData*_vrDeployGridPagerSize+_vrDeployGridPagerSize,o=(n/_vrMagnifierDeploySizer).toFixed()}openMagnifyDialogBox(_vrDialogDeployment,"jqxDeployGrid",_vrMagnifierDeploySizer),$("#MagnifierDialog").append($("#idDeploy")),$("#imgDeployUserPref").css("display","block"),$(".clsdeployfieldcontent").css("margin-left","190px"),$(".clsdeploystatus").css("margin-left","10px"),$("#txtDeploySearch").css("margin-left","10px"),$("#btnDeployResetSearch").css("margin-right"," 137px"),$("#jqxDeployGrid").css("margin-left"," 15px"),$(".clsdeployfieldleft .ui-datepicker-trigger").css("margin-top"," 2px"),_vrGridDeployMagnify=1,loadJqxDeployMagifyClickGrid(),filterDeployJqxGrid(),$("#btnDeployResetSearch").click(function(){$("#txtDeploySearch").val(""),filterDeployJqxGrid()}),o>=0&&$("#jqxDeployGrid").jqxGrid("gotopage",--o)}else _idbtnImgBARMagnify==a?($("#MagnifierDialog").dialog("option","title",_BARTitle),$("#MagnifierDialog").dialog("open"),_vrMagnifyCloneTitle=_BARTitle,$("#divMainLoader").css("display","inline"),$("#MagnifierDialog").append($("#idShowBARInMagnify")),_vrSetWidthOfGraph=1080,_vrSetHeightOfGraph=400,showbrEmpgraph()):_idImgQuoteMagnify==a&&(openMagnifyDialogBox(_vrQuotation,"jqxQuotationGrid",_vrMagnifierDeploySizer),$("#MagnifierDialog").append($(".clsquotetoappend")),bindDataToJqx("jqxQuotationGrid",_vrQuoteData,_vrQuoteWidgetColumns,_vrMagnifyGridWidth),filterBasedOnQuoteStatus())}),c.on("click",".resize_widget",function(){$widget=$(this).parents(".widget"),$widgetSizeX=$widget.attr("data-sizex"),$widgetSizeY=$widget.attr("data-sizex"),"1"===$widgetSizeX&&"1"===$widgetSizeY?b.resize_widget($widget,2,2,!0):b.resize_widget($widget,1,1,!0),pagerMgnfierDisplay($widget,$widgetSizeX,$widgetSizeY)}),c.on("click",".gs-resize-handle",function(){})},q=function(){try{if($("#MagnifierDialog").dialog("isOpen")===!1&&$("#divMagnifyHdrTitle").css("display","none"),_idSlider===_idTasks){_vrLocalTaskDataOnTaskClick=null,$("#ddlTaskTrailSprint").append("<option value='0'>Select sprint</option>"),$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");if($(".gridster .clsusertasks").length&&c.remove_widget($(".clsusertasks")),bindDataToTaskDropDownDyn(),_BaseUrl=_vrLocationOrigin+"/Task/GetStatusDetails?strTokenID="+_vrUserTokenId,ajaxCall(_BaseUrl,bindStatus),_UserRoleId!=_vrUserRoleId&&_UserRoleId!=_vrClientRoleId||0!=_vrUserIsProjManager||($("#lnkNewTask").css("color","#B3BFCB"),$("#imgNewTask").css("display","none"),$("#btnRefreshTasksGrid").css("margin-right","80px"),$("#btnExportTasks").css("margin-right","-22px"),$(".clslogin").css("width","350px"),$("#lnkBar").css("display","none")),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop)if(_taskIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetTasksSlide"),_taskIndexNO>-1){if(Object.keys(_vrWidgetCOntrolData[_taskIndexNO]).length>0){var d={EmpID:_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailEmployee,ProjectID:_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailProject,SprintID:_vrWidgetCOntrolData[_taskIndexNO].ddlTaskTrailSprint,IsExcludeCSD:_vrWidgetCOntrolData[_taskIndexNO].chkFilterTasks,StatusID:_vrWidgetCOntrolData[_taskIndexNO].ddlTskTrailStatus,TokenID:_vrUserTokenId};_BaseUrl=_vrLocationOrigin+"/Task/GetTaskDataUsingEmpID/",ajaxCallWithObject(_BaseUrl,d,bindTasksBasedOnConTrolData),$("#chkFilterTasks").prop("checked",_vrWidgetCOntrolData[_taskIndexNO].chkFilterTasks),_vrCheckDragNDrop=""}}else bindTasksBasedOnClientID(_vrTaskProjId,_EmpId,_vrBlnExcludeDefault,bindJqxGrid),_taskIndexNO=-1;else bindTasksBasedOnClientID(_vrTaskProjId,_EmpId,_vrBlnExcludeDefault,bindJqxGrid),_taskIndexNO=-1;_vrBtnWidgetResize>0&&(_vrBtnWidgetResize=0),a(f,_idSlider),$("#imgTasksMagnify").attr("disabled",!1)}else if(_idSlider==_idBugs){_vrLocalBTDataOnBugClick=null,localStorage.setItem("jqxGridjqxBugTrial",JSON.stringify(_vrLocalBTDataOnBugClick)),$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");if($(".gridster .clsbugtrail").length&&c.remove_widget($(".clsbugtrail")),a(g,_idSlider),setDefaultValuesBugTrail(),bindDataToBugDropDownDyn(),BindValuesToBugFields(),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop)if(_BTIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetBugsSlide"),_BTIndexNO>-1){if(Object.keys(_vrWidgetCOntrolData[_BTIndexNO]).length>0){var p={strPrjctID:_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrProject,intTaskId:_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrTaskName,strStatus:_vrWidgetCOntrolData[_BTIndexNO].ddlBugStatus,strFrmDate:_vrWidgetCOntrolData[_BTIndexNO].txtBugTrFromDate,strUsrRleID:_UserRoleId,boolOnHoldFilter:_vrWidgetCOntrolData[_BTIndexNO].chkHoldBugs,TokenID:_vrUserTokenId},q=_vrWidgetCOntrolData[_BTIndexNO].txtBugTrFromDate.split("/"),r=_vrWidgetCOntrolData[_BTIndexNO].txtBugTrToDate.split("/");
q=q[2]+"-"+q[1]+"-"+q[0],r=r[2]+"-"+r[1]+"-"+r[0],p.strFrmDate=q,p.strToDate=r,p.blnDate=_vrWidgetCOntrolData[_BTIndexNO].txtBugTrFromDate.length>0&&_vrWidgetCOntrolData[_BTIndexNO].txtBugTrToDate.length>0?!0:!1,p.strEmpID=parseInt(_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrEmp)>0?_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrEmp:_EmpId,p.blnEmpID=parseInt(_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrEmp)>0?!0:!1,p.blnPrjct=parseInt(_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrProject)>0?!0:!1,p.blnTaskId=parseInt(_vrWidgetCOntrolData[_BTIndexNO].ddlBugTrTaskName)>0?!0:!1,p.blnStatus=parseInt(_vrWidgetCOntrolData[_BTIndexNO].ddlBugStatus)>0?!0:!1,_BaseUrl=_vrLocationOrigin+"/Bug/GetBugFilterData",ajaxCallWithObject(_BaseUrl,p,bindBugTrial),$("#chkHoldBugs").prop("checked",_vrWidgetCOntrolData[_BTIndexNO].chkHoldBugs),_vrCheckDragNDrop=""}}else FilterBugTrail(),_BTIndexNO=-1;else FilterBugTrail(),_BTIndexNO=-1;bindBugStatus(),_vrBtnBugTrailResize>0&&(_vrBtnBugTrailResize=0)}else if(_idSlider==_idProjects){_vrLocalTaskDataOnProjClick=null,_vrSelProjStatus="",_vrSelProjCustomer="",$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");$(".gridster .clsprojwidget").length&&c.remove_widget($(".clsprojwidget")),a(i,_idSlider),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop&&(_projIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetProjectsSlide"),_vrCheckDragNDrop=""),fetchProjectsData(),_UserRoleId==_vrClientRoleId&&($("#ddlProjCustomer").css("display","none"),$("#btnCreateProject").css("display","none"),$("#btnRefreshProjectsGrid").css("margin-right","85px"),$(".search-wrapper-proj").css("margin-left","160px"),$("#btnExportProjGrid").css("margin-right","-21px"))}else if(_idSlider==_idCustomer){_vrSelCustomerStatus="",_vrLocalCustDataOnCustClick=null,$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");$(".gridster .clscustomertrail").length&&c.remove_widget($(".clscustomertrail")),$("#ddlCustomerProject").empty(),a(j,_idSlider),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop&&(_custIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetCustomerSlide"),_vrCheckDragNDrop=""),bindCustomersDetails()}else if(_idSlider==_idUser){_vrLocalUserDataOnUserClick=null,_vrSelUserStatus="",$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");$(".gridster .clsuser").length&&c.remove_widget($(".clsuser")),$("#ddlUserstatus").empty(),a(h,_idSlider),bindUserStatus(),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop&&(_userIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetUserSlide"),_vrCheckDragNDrop=""),LoadUserDataToWidget()}else if(_idSlider==_idBillingReport){_vrSelUserStatus="",_vrDragDropBillRprt="1",_vrBillingLoadingFlag=_vrBillingGridInit,$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");if($(".gridster .clsBillingReport").length&&c.remove_widget($(".clsBillingReport")),a(k,_idSlider),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop)if(_BRIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetBillingReportSlide"),_BRIndexNO>-1){if(Object.keys(_vrWidgetCOntrolData[_BRIndexNO]).length>0){_vrBRCheckCallFromLogin=1,loadFieldsDataToBillRprt(),_BaseUrl=_vrLocationOrigin+"/Task/FilterBillingDetails";var s={EmpID:_vrWidgetCOntrolData[_BRIndexNO].ddlBillingRprtEmpName,ProjectID:_vrWidgetCOntrolData[_BRIndexNO].ddlBillingRprtProjectName,IsBeyondScope:_vrWidgetCOntrolData[_BRIndexNO].chkBillingReportBeyondScope,TokenID:_vrUserTokenId,ProjectManager:_EmpId,RoleID:_UserRoleId,IsProjectManager:_vrUserIsProjManager,LoggedInEmpID:_EmpId},q=_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtFromDate.split("/"),r=_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtToDate.split("/");q=q[2]+"-"+q[1]+"-"+q[0],r=r[2]+"-"+r[1]+"-"+r[0],s.BlnEmpID=parseInt(_vrWidgetCOntrolData[_BRIndexNO].ddlBillingRprtEmpName)>0?!0:!1,s.BlnProject=parseInt(_vrWidgetCOntrolData[_BRIndexNO].ddlBillingRprtProjectName)>0?!0:!1,s.BlnFromDate=_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtFromDate.length>0?!0:!1,s.BlnToDate=_vrWidgetCOntrolData[_BRIndexNO].txtBillingRprtToDate.length>0?!0:!1,s.FromDate=q,s.ToDate=r,ajaxCallWithObject(_BaseUrl,s,bindBillingReportData),_UserRoleId==_vrUserRoleId&&0==_vrUserIsProjManager&&$("#ddlBillingRprtEmpName").attr("disabled",!0),$("#chkBillingReportBeyondScope").prop("checked",_vrWidgetCOntrolData[_BRIndexNO].chkBillingReportBeyondScope),_vrCheckDragNDrop=""}}else loadFieldsDataToBillRprt(),_BRIndexNO=-1;else loadFieldsDataToBillRprt(),_BRIndexNO=-1}else if(_idSlider==_idDashboard){var c=$(".gridster").gridster().data("gridster");$(".gridster .clsclientroletskdetcharts").length&&c.remove_widget($(".clsclientroletskdetcharts")),a(l,_idSlider),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop&&(_DashboardIndexNo=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetDashboardslide"),_DashboardIndexNo>-1&&(_vrCheckDragNDrop="")),loadDdlInTasksCount()}else if(_idSlider==_idDeployment){_vrsliderDates=1,_vrGridDeployMagnify=0,_vrLocalDeployData=null,$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");$(".gridster .clsdeploy").length&&c.remove_widget($(".clsdeploy")),a(m,_idSlider),BindValuesToDeployFields(),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop&&(_deployIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetDeploymentSlide"),_deployIndexNO>-1&&Object.keys(_vrWidgetCOntrolData[_deployIndexNO]).length>0&&($("#txtDeployFromDate").val(_vrWidgetCOntrolData[_deployIndexNO].txtDeployFromDate),$("#txtDeployToDate").val(_vrWidgetCOntrolData[_deployIndexNO].txtDeployToDate),$("#ddlDeploystatus").val(_vrWidgetCOntrolData[_deployIndexNO].ddlDeploystatus),$("#txtDeploySearch").val(_vrWidgetCOntrolData[_deployIndexNO].txtDeploySearch),_vrCheckDragNDrop="")),FilterDeploymentDetail()}else if(_idSlider==_idQuote){$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");$(".gridster .clsquotation").length&&c.remove_widget($(".clsquotation")),_vrWidgetCOntrolData.length>0&&1==_vrCheckDragNDrop&&(_QuoteIndexNO=getIndexOfObjBasedOnValue(_vrWidgetCOntrolData,_vrWidgetIDProperty,"divWidgetQuotationSlide"),_vrCheckDragNDrop=""),loadQuotationFields(),a(n,_idSlider)}else if(_idSlider==_idBarScore){$("#idBARLoading").css("display","block"),$("#"+_idSlider).find("button").prop("disabled","true");var c=$(".gridster").gridster().data("gridster");$(".gridster .clsbrPoints").length&&c.remove_widget($(".clsbrPoints")),$("#idBARLoading").css("display","block"),_varcheckDragDropBAR=0,_vrSetWidthOfGraph=850,_vrSetHeightOfGraph=320,a(o,_idSlider),LoadDataToBARControls(),loadBARData()}else b.add_widget(e,1,1);$(".dropdown-menu").css("display","none"),_vrUserPrefWidgetWidth=1,setTimeout(function(){checkUserPrefWidgets(_idSlider)},1e3),checkUserPrefWidgets(_idSlider)}catch(t){}};return{init:p,addToWidget:q}}(jQuery,document)),droppable=startupModule(function(){var a,b=function(){a=$(".gridster-container .gridster"),a.droppable({hoverClass:"gridster-container-hover",accept:":not(.ui-sortable-helper)",drop:function(){var a=$(this).data("fetch");a&&gridster.addToWidget(a)}})};return{init:b}}(jQuery,document));